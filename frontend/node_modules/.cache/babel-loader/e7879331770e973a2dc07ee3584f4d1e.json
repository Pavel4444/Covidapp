{"ast":null,"code":"/* @license C3.js v0.4.24 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.c3 = factory();\n})(this, function () {\n  'use strict';\n\n  var CLASS = {\n    target: 'c3-target',\n    chart: 'c3-chart',\n    chartLine: 'c3-chart-line',\n    chartLines: 'c3-chart-lines',\n    chartBar: 'c3-chart-bar',\n    chartBars: 'c3-chart-bars',\n    chartText: 'c3-chart-text',\n    chartTexts: 'c3-chart-texts',\n    chartArc: 'c3-chart-arc',\n    chartArcs: 'c3-chart-arcs',\n    chartArcsTitle: 'c3-chart-arcs-title',\n    chartArcsBackground: 'c3-chart-arcs-background',\n    chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n    chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n    chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n    selectedCircle: 'c3-selected-circle',\n    selectedCircles: 'c3-selected-circles',\n    eventRect: 'c3-event-rect',\n    eventRects: 'c3-event-rects',\n    eventRectsSingle: 'c3-event-rects-single',\n    eventRectsMultiple: 'c3-event-rects-multiple',\n    zoomRect: 'c3-zoom-rect',\n    brush: 'c3-brush',\n    focused: 'c3-focused',\n    defocused: 'c3-defocused',\n    region: 'c3-region',\n    regions: 'c3-regions',\n    title: 'c3-title',\n    tooltipContainer: 'c3-tooltip-container',\n    tooltip: 'c3-tooltip',\n    tooltipName: 'c3-tooltip-name',\n    shape: 'c3-shape',\n    shapes: 'c3-shapes',\n    line: 'c3-line',\n    lines: 'c3-lines',\n    bar: 'c3-bar',\n    bars: 'c3-bars',\n    circle: 'c3-circle',\n    circles: 'c3-circles',\n    arc: 'c3-arc',\n    arcLabelLine: 'c3-arc-label-line',\n    arcs: 'c3-arcs',\n    area: 'c3-area',\n    areas: 'c3-areas',\n    empty: 'c3-empty',\n    text: 'c3-text',\n    texts: 'c3-texts',\n    gaugeValue: 'c3-gauge-value',\n    grid: 'c3-grid',\n    gridLines: 'c3-grid-lines',\n    xgrid: 'c3-xgrid',\n    xgrids: 'c3-xgrids',\n    xgridLine: 'c3-xgrid-line',\n    xgridLines: 'c3-xgrid-lines',\n    xgridFocus: 'c3-xgrid-focus',\n    ygrid: 'c3-ygrid',\n    ygrids: 'c3-ygrids',\n    ygridLine: 'c3-ygrid-line',\n    ygridLines: 'c3-ygrid-lines',\n    axis: 'c3-axis',\n    axisX: 'c3-axis-x',\n    axisXLabel: 'c3-axis-x-label',\n    axisY: 'c3-axis-y',\n    axisYLabel: 'c3-axis-y-label',\n    axisY2: 'c3-axis-y2',\n    axisY2Label: 'c3-axis-y2-label',\n    legendBackground: 'c3-legend-background',\n    legendItem: 'c3-legend-item',\n    legendItemEvent: 'c3-legend-item-event',\n    legendItemTile: 'c3-legend-item-tile',\n    legendItemHidden: 'c3-legend-item-hidden',\n    legendItemFocused: 'c3-legend-item-focused',\n    dragarea: 'c3-dragarea',\n    EXPANDED: '_expanded_',\n    SELECTED: '_selected_',\n    INCLUDED: '_included_'\n  };\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var classCallCheck = function classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var inherits = function inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  var possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  };\n\n  var isValue = function isValue(v) {\n    return v || v === 0;\n  };\n\n  var isFunction = function isFunction(o) {\n    return typeof o === 'function';\n  };\n\n  var isArray = function isArray(o) {\n    return Array.isArray(o);\n  };\n\n  var isString = function isString(o) {\n    return typeof o === 'string';\n  };\n\n  var isUndefined = function isUndefined(v) {\n    return typeof v === 'undefined';\n  };\n\n  var isDefined = function isDefined(v) {\n    return typeof v !== 'undefined';\n  };\n\n  var ceil10 = function ceil10(v) {\n    return Math.ceil(v / 10) * 10;\n  };\n\n  var asHalfPixel = function asHalfPixel(n) {\n    return Math.ceil(n) + 0.5;\n  };\n\n  var diffDomain = function diffDomain(d) {\n    return d[1] - d[0];\n  };\n\n  var isEmpty = function isEmpty(o) {\n    return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && Object.keys(o).length === 0;\n  };\n\n  var notEmpty = function notEmpty(o) {\n    return !c3_chart_internal_fn.isEmpty(o);\n  };\n\n  var getOption = function getOption(options, key, defaultValue) {\n    return isDefined(options[key]) ? options[key] : defaultValue;\n  };\n\n  var hasValue = function hasValue(dict, value) {\n    var found = false;\n    Object.keys(dict).forEach(function (key) {\n      if (dict[key] === value) {\n        found = true;\n      }\n    });\n    return found;\n  };\n\n  var sanitise = function sanitise(str) {\n    return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n  };\n\n  var getPathBox = function getPathBox(path) {\n    var box = path.getBoundingClientRect(),\n        items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n        minX = items[0].x,\n        minY = Math.min(items[0].y, items[1].y);\n    return {\n      x: minX,\n      y: minY,\n      width: box.width,\n      height: box.height\n    };\n  };\n\n  var c3_axis_fn;\n  var c3_axis_internal_fn;\n\n  function AxisInternal(component, params) {\n    var internal = this;\n    internal.component = component;\n    internal.params = params || {};\n    internal.d3 = component.d3;\n    internal.scale = internal.d3.scale.linear();\n    internal.range;\n    internal.orient = \"bottom\";\n    internal.innerTickSize = 6;\n    internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n    internal.tickPadding = 3;\n    internal.tickValues = null;\n    internal.tickFormat;\n    internal.tickArguments;\n    internal.tickOffset = 0;\n    internal.tickCulling = true;\n    internal.tickCentered;\n    internal.tickTextCharSize;\n    internal.tickTextRotate = internal.params.tickTextRotate;\n    internal.tickLength;\n    internal.axis = internal.generateAxis();\n  }\n\n  c3_axis_internal_fn = AxisInternal.prototype;\n\n  c3_axis_internal_fn.axisX = function (selection, x, tickOffset) {\n    selection.attr(\"transform\", function (d) {\n      return \"translate(\" + Math.ceil(x(d) + tickOffset) + \", 0)\";\n    });\n  };\n\n  c3_axis_internal_fn.axisY = function (selection, y) {\n    selection.attr(\"transform\", function (d) {\n      return \"translate(0,\" + Math.ceil(y(d)) + \")\";\n    });\n  };\n\n  c3_axis_internal_fn.scaleExtent = function (domain) {\n    var start = domain[0],\n        stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  };\n\n  c3_axis_internal_fn.generateTicks = function (scale) {\n    var internal = this;\n    var i,\n        domain,\n        ticks = [];\n\n    if (scale.ticks) {\n      return scale.ticks.apply(scale, internal.tickArguments);\n    }\n\n    domain = scale.domain();\n\n    for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n      ticks.push(i);\n    }\n\n    if (ticks.length > 0 && ticks[0] > 0) {\n      ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n    }\n\n    return ticks;\n  };\n\n  c3_axis_internal_fn.copyScale = function () {\n    var internal = this;\n    var newScale = internal.scale.copy(),\n        domain;\n\n    if (internal.params.isCategory) {\n      domain = internal.scale.domain();\n      newScale.domain([domain[0], domain[1] - 1]);\n    }\n\n    return newScale;\n  };\n\n  c3_axis_internal_fn.textFormatted = function (v) {\n    var internal = this,\n        formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n    return typeof formatted !== 'undefined' ? formatted : '';\n  };\n\n  c3_axis_internal_fn.updateRange = function () {\n    var internal = this;\n    internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n    return internal.range;\n  };\n\n  c3_axis_internal_fn.updateTickTextCharSize = function (tick) {\n    var internal = this;\n\n    if (internal.tickTextCharSize) {\n      return internal.tickTextCharSize;\n    }\n\n    var size = {\n      h: 11.5,\n      w: 5.5\n    };\n    tick.select('text').text(function (d) {\n      return internal.textFormatted(d);\n    }).each(function (d) {\n      var box = this.getBoundingClientRect(),\n          text = internal.textFormatted(d),\n          h = box.height,\n          w = text ? box.width / text.length : undefined;\n\n      if (h && w) {\n        size.h = h;\n        size.w = w;\n      }\n    }).text('');\n    internal.tickTextCharSize = size;\n    return size;\n  };\n\n  c3_axis_internal_fn.transitionise = function (selection) {\n    return this.params.withoutTransition ? selection : this.d3.transition(selection);\n  };\n\n  c3_axis_internal_fn.isVertical = function () {\n    return this.orient === 'left' || this.orient === 'right';\n  };\n\n  c3_axis_internal_fn.tspanData = function (d, i, ticks, scale) {\n    var internal = this;\n    var splitted = internal.params.tickMultiline ? internal.splitTickText(d, ticks, scale) : [].concat(internal.textFormatted(d));\n\n    if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n      splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n    }\n\n    return splitted.map(function (s) {\n      return {\n        index: i,\n        splitted: s,\n        length: splitted.length\n      };\n    });\n  };\n\n  c3_axis_internal_fn.splitTickText = function (d, ticks, scale) {\n    var internal = this,\n        tickText = internal.textFormatted(d),\n        maxWidth = internal.params.tickWidth,\n        subtext,\n        spaceIndex,\n        textWidth,\n        splitted = [];\n\n    if (Object.prototype.toString.call(tickText) === \"[object Array]\") {\n      return tickText;\n    }\n\n    if (!maxWidth || maxWidth <= 0) {\n      maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(ticks[1]) - scale(ticks[0])) - 12 : 110;\n    }\n\n    function split(splitted, text) {\n      spaceIndex = undefined;\n\n      for (var i = 1; i < text.length; i++) {\n        if (text.charAt(i) === ' ') {\n          spaceIndex = i;\n        }\n\n        subtext = text.substr(0, i + 1);\n        textWidth = internal.tickTextCharSize.w * subtext.length; // if text width gets over tick width, split by space index or crrent index\n\n        if (maxWidth < textWidth) {\n          return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n        }\n      }\n\n      return splitted.concat(text);\n    }\n\n    return split(splitted, tickText + \"\");\n  };\n\n  c3_axis_internal_fn.ellipsify = function (splitted, max) {\n    if (splitted.length <= max) {\n      return splitted;\n    }\n\n    var ellipsified = splitted.slice(0, max);\n    var remaining = 3;\n\n    for (var i = max - 1; i >= 0; i--) {\n      var available = ellipsified[i].length;\n      ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n      remaining -= available;\n\n      if (remaining <= 0) {\n        break;\n      }\n    }\n\n    return ellipsified;\n  };\n\n  c3_axis_internal_fn.updateTickLength = function () {\n    var internal = this;\n    internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n  };\n\n  c3_axis_internal_fn.lineY2 = function (d) {\n    var internal = this,\n        tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n    return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n  };\n\n  c3_axis_internal_fn.textY = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n  };\n\n  c3_axis_internal_fn.textTransform = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? \"rotate(\" + rotate + \")\" : \"\";\n  };\n\n  c3_axis_internal_fn.textTextAnchor = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? rotate > 0 ? \"start\" : \"end\" : \"middle\";\n  };\n\n  c3_axis_internal_fn.tspanDx = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n  };\n\n  c3_axis_internal_fn.tspanDy = function (d, i) {\n    var internal = this,\n        dy = internal.tickTextCharSize.h;\n\n    if (i === 0) {\n      if (internal.isVertical()) {\n        dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n      } else {\n        dy = \".71em\";\n      }\n    }\n\n    return dy;\n  };\n\n  c3_axis_internal_fn.generateAxis = function () {\n    var internal = this,\n        d3 = internal.d3,\n        params = internal.params;\n\n    function axis(g) {\n      g.each(function () {\n        var g = axis.g = d3.select(this);\n        var scale0 = this.__chart__ || internal.scale,\n            scale1 = this.__chart__ = internal.copyScale();\n        var ticks = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n            tick = g.selectAll(\".tick\").data(ticks, scale1),\n            tickEnter = tick.enter().insert(\"g\", \".domain\").attr(\"class\", \"tick\").style(\"opacity\", 1e-6),\n            // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n        tickExit = tick.exit().remove(),\n            tickUpdate = internal.transitionise(tick).style(\"opacity\", 1),\n            tickTransform,\n            tickX,\n            tickY;\n\n        if (params.isCategory) {\n          internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n          tickX = internal.tickCentered ? 0 : internal.tickOffset;\n          tickY = internal.tickCentered ? internal.tickOffset : 0;\n        } else {\n          internal.tickOffset = tickX = 0;\n        }\n\n        tickEnter.append(\"line\");\n        tickEnter.append(\"text\");\n        internal.updateRange();\n        internal.updateTickLength();\n        internal.updateTickTextCharSize(g.select('.tick'));\n        var lineUpdate = tickUpdate.select(\"line\"),\n            textUpdate = tickUpdate.select(\"text\"),\n            tspanUpdate = tick.select(\"text\").selectAll('tspan').data(function (d, i) {\n          return internal.tspanData(d, i, ticks, scale1);\n        });\n        tspanUpdate.enter().append('tspan');\n        tspanUpdate.exit().remove();\n        tspanUpdate.text(function (d) {\n          return d.splitted;\n        });\n        var path = g.selectAll(\".domain\").data([0]),\n            pathUpdate = (path.enter().append(\"path\").attr(\"class\", \"domain\"), internal.transitionise(path)); // TODO: each attr should be one function and change its behavior by internal.orient, probably\n\n        switch (internal.orient) {\n          case \"bottom\":\n            {\n              tickTransform = internal.axisX;\n              lineUpdate.attr(\"x1\", tickX).attr(\"x2\", tickX).attr(\"y2\", function (d, i) {\n                return internal.lineY2(d, i);\n              });\n              textUpdate.attr(\"x\", 0).attr(\"y\", function (d, i) {\n                return internal.textY(d, i);\n              }).attr(\"transform\", function (d, i) {\n                return internal.textTransform(d, i);\n              }).style(\"text-anchor\", function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr(\"dy\", function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr(\"d\", \"M\" + internal.range[0] + \",\" + internal.outerTickSize + \"V0H\" + internal.range[1] + \"V\" + internal.outerTickSize);\n              break;\n            }\n\n          case \"top\":\n            {\n              // TODO: rotated tick text\n              tickTransform = internal.axisX;\n              lineUpdate.attr(\"x1\", tickX).attr(\"x2\", tickX).attr(\"y2\", function (d, i) {\n                return -1 * internal.lineY2(d, i);\n              });\n              textUpdate.attr(\"x\", 0).attr(\"y\", function (d, i) {\n                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n              }).attr(\"transform\", function (d, i) {\n                return internal.textTransform(d, i);\n              }).style(\"text-anchor\", function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr(\"dy\", function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr(\"d\", \"M\" + internal.range[0] + \",\" + -internal.outerTickSize + \"V0H\" + internal.range[1] + \"V\" + -internal.outerTickSize);\n              break;\n            }\n\n          case \"left\":\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr(\"x2\", -internal.innerTickSize).attr(\"y1\", tickY).attr(\"y2\", tickY);\n              textUpdate.attr(\"x\", -internal.tickLength).attr(\"y\", internal.tickOffset).style(\"text-anchor\", \"end\");\n              tspanUpdate.attr('x', -internal.tickLength).attr(\"dy\", function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr(\"d\", \"M\" + -internal.outerTickSize + \",\" + internal.range[0] + \"H0V\" + internal.range[1] + \"H\" + -internal.outerTickSize);\n              break;\n            }\n\n          case \"right\":\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr(\"x2\", internal.innerTickSize).attr(\"y1\", tickY).attr(\"y2\", tickY);\n              textUpdate.attr(\"x\", internal.tickLength).attr(\"y\", internal.tickOffset).style(\"text-anchor\", \"start\");\n              tspanUpdate.attr('x', internal.tickLength).attr(\"dy\", function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr(\"d\", \"M\" + internal.outerTickSize + \",\" + internal.range[0] + \"H0V\" + internal.range[1] + \"H\" + internal.outerTickSize);\n              break;\n            }\n        }\n\n        if (scale1.rangeBand) {\n          var x = scale1,\n              dx = x.rangeBand() / 2;\n\n          scale0 = scale1 = function scale1(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, internal.tickOffset);\n        }\n\n        tickEnter.call(tickTransform, scale0, internal.tickOffset);\n        tickUpdate.call(tickTransform, scale1, internal.tickOffset);\n      });\n    }\n\n    axis.scale = function (x) {\n      if (!arguments.length) {\n        return internal.scale;\n      }\n\n      internal.scale = x;\n      return axis;\n    };\n\n    axis.orient = function (x) {\n      if (!arguments.length) {\n        return internal.orient;\n      }\n\n      internal.orient = x in {\n        top: 1,\n        right: 1,\n        bottom: 1,\n        left: 1\n      } ? x + \"\" : \"bottom\";\n      return axis;\n    };\n\n    axis.tickFormat = function (format) {\n      if (!arguments.length) {\n        return internal.tickFormat;\n      }\n\n      internal.tickFormat = format;\n      return axis;\n    };\n\n    axis.tickCentered = function (isCentered) {\n      if (!arguments.length) {\n        return internal.tickCentered;\n      }\n\n      internal.tickCentered = isCentered;\n      return axis;\n    };\n\n    axis.tickOffset = function () {\n      return internal.tickOffset;\n    };\n\n    axis.tickInterval = function () {\n      var interval, length;\n\n      if (params.isCategory) {\n        interval = internal.tickOffset * 2;\n      } else {\n        length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n        interval = length / axis.g.selectAll('line').size();\n      }\n\n      return interval === Infinity ? 0 : interval;\n    };\n\n    axis.ticks = function () {\n      if (!arguments.length) {\n        return internal.tickArguments;\n      }\n\n      internal.tickArguments = arguments;\n      return axis;\n    };\n\n    axis.tickCulling = function (culling) {\n      if (!arguments.length) {\n        return internal.tickCulling;\n      }\n\n      internal.tickCulling = culling;\n      return axis;\n    };\n\n    axis.tickValues = function (x) {\n      if (typeof x === 'function') {\n        internal.tickValues = function () {\n          return x(internal.scale.domain());\n        };\n      } else {\n        if (!arguments.length) {\n          return internal.tickValues;\n        }\n\n        internal.tickValues = x;\n      }\n\n      return axis;\n    };\n\n    return axis;\n  };\n\n  var Axis = function (_Component) {\n    inherits(Axis, _Component);\n\n    function Axis(owner) {\n      classCallCheck(this, Axis);\n      var fn = {\n        fn: c3_axis_fn,\n        internal: {\n          fn: c3_axis_internal_fn\n        }\n      };\n\n      var _this = possibleConstructorReturn(this, (Axis.__proto__ || Object.getPrototypeOf(Axis)).call(this, owner, 'axis', fn));\n\n      _this.d3 = owner.d3;\n      _this.internal = AxisInternal;\n      return _this;\n    }\n\n    return Axis;\n  }(Component);\n\n  c3_axis_fn = Axis.prototype;\n\n  c3_axis_fn.init = function init() {\n    var $$ = this.owner,\n        config = $$.config,\n        main = $$.main;\n    $$.axes.x = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisX).attr(\"clip-path\", config.axis_x_inner ? \"\" : $$.clipPathForXAxis).attr(\"transform\", $$.getTranslate('x')).style(\"visibility\", config.axis_x_show ? 'visible' : 'hidden');\n    $$.axes.x.append(\"text\").attr(\"class\", CLASS.axisXLabel).attr(\"transform\", config.axis_rotated ? \"rotate(-90)\" : \"\").style(\"text-anchor\", this.textAnchorForXAxisLabel.bind(this));\n    $$.axes.y = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisY).attr(\"clip-path\", config.axis_y_inner ? \"\" : $$.clipPathForYAxis).attr(\"transform\", $$.getTranslate('y')).style(\"visibility\", config.axis_y_show ? 'visible' : 'hidden');\n    $$.axes.y.append(\"text\").attr(\"class\", CLASS.axisYLabel).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").style(\"text-anchor\", this.textAnchorForYAxisLabel.bind(this));\n    $$.axes.y2 = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisY2) // clip-path?\n    .attr(\"transform\", $$.getTranslate('y2')).style(\"visibility\", config.axis_y2_show ? 'visible' : 'hidden');\n    $$.axes.y2.append(\"text\").attr(\"class\", CLASS.axisY2Label).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").style(\"text-anchor\", this.textAnchorForY2AxisLabel.bind(this));\n  };\n\n  c3_axis_fn.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n        config = $$.config,\n        axisParams = {\n      isCategory: $$.isCategorized(),\n      withOuterTick: withOuterTick,\n      tickMultiline: config.axis_x_tick_multiline,\n      tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n      tickWidth: config.axis_x_tick_width,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n      withoutTransition: withoutTransition\n    },\n        axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n\n    if ($$.isTimeSeries() && tickValues && typeof tickValues !== \"function\") {\n      tickValues = tickValues.map(function (v) {\n        return $$.parseDate(v);\n      });\n    } // Set tick\n\n\n    axis.tickFormat(tickFormat).tickValues(tickValues);\n\n    if ($$.isCategorized()) {\n      axis.tickCentered(config.axis_x_tick_centered);\n\n      if (isEmpty(config.axis_x_tick_culling)) {\n        config.axis_x_tick_culling = false;\n      }\n    }\n\n    return axis;\n  };\n\n  c3_axis_fn.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n    var $$ = this.owner,\n        config = $$.config,\n        tickValues;\n\n    if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n      tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n    }\n\n    if (axis) {\n      axis.tickValues(tickValues);\n    } else {\n      $$.xAxis.tickValues(tickValues);\n      $$.subXAxis.tickValues(tickValues);\n    }\n\n    return tickValues;\n  };\n\n  c3_axis_fn.getYAxis = function getYAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n        config = $$.config,\n        axisParams = {\n      withOuterTick: withOuterTick,\n      withoutTransition: withoutTransition,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n    },\n        axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient).tickFormat(tickFormat);\n\n    if ($$.isTimeSeriesY()) {\n      axis.ticks($$.d3.time[config.axis_y_tick_time_value], config.axis_y_tick_time_interval);\n    } else {\n      axis.tickValues(tickValues);\n    }\n\n    return axis;\n  };\n\n  c3_axis_fn.getId = function getId(id) {\n    var config = this.owner.config;\n    return id in config.data_axes ? config.data_axes[id] : 'y';\n  };\n\n  c3_axis_fn.getXAxisTickFormat = function getXAxisTickFormat() {\n    var $$ = this.owner,\n        config = $$.config,\n        format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n      return v < 0 ? v.toFixed(0) : v;\n    };\n\n    if (config.axis_x_tick_format) {\n      if (isFunction(config.axis_x_tick_format)) {\n        format = config.axis_x_tick_format;\n      } else if ($$.isTimeSeries()) {\n        format = function format(date) {\n          return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : \"\";\n        };\n      }\n    }\n\n    return isFunction(format) ? function (v) {\n      return format.call($$, v);\n    } : format;\n  };\n\n  c3_axis_fn.getTickValues = function getTickValues(tickValues, axis) {\n    return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n  };\n\n  c3_axis_fn.getXAxisTickValues = function getXAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n  };\n\n  c3_axis_fn.getYAxisTickValues = function getYAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n  };\n\n  c3_axis_fn.getY2AxisTickValues = function getY2AxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n  };\n\n  c3_axis_fn.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n    var $$ = this.owner,\n        config = $$.config,\n        option;\n\n    if (axisId === 'y') {\n      option = config.axis_y_label;\n    } else if (axisId === 'y2') {\n      option = config.axis_y2_label;\n    } else if (axisId === 'x') {\n      option = config.axis_x_label;\n    }\n\n    return option;\n  };\n\n  c3_axis_fn.getLabelText = function getLabelText(axisId) {\n    var option = this.getLabelOptionByAxisId(axisId);\n    return isString(option) ? option : option ? option.text : null;\n  };\n\n  c3_axis_fn.setLabelText = function setLabelText(axisId, text) {\n    var $$ = this.owner,\n        config = $$.config,\n        option = this.getLabelOptionByAxisId(axisId);\n\n    if (isString(option)) {\n      if (axisId === 'y') {\n        config.axis_y_label = text;\n      } else if (axisId === 'y2') {\n        config.axis_y2_label = text;\n      } else if (axisId === 'x') {\n        config.axis_x_label = text;\n      }\n    } else if (option) {\n      option.text = text;\n    }\n  };\n\n  c3_axis_fn.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n    var option = this.getLabelOptionByAxisId(axisId),\n        position = option && (typeof option === 'undefined' ? 'undefined' : _typeof(option)) === 'object' && option.position ? option.position : defaultPosition;\n    return {\n      isInner: position.indexOf('inner') >= 0,\n      isOuter: position.indexOf('outer') >= 0,\n      isLeft: position.indexOf('left') >= 0,\n      isCenter: position.indexOf('center') >= 0,\n      isRight: position.indexOf('right') >= 0,\n      isTop: position.indexOf('top') >= 0,\n      isMiddle: position.indexOf('middle') >= 0,\n      isBottom: position.indexOf('bottom') >= 0\n    };\n  };\n\n  c3_axis_fn.getXAxisLabelPosition = function getXAxisLabelPosition() {\n    return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n  };\n\n  c3_axis_fn.getYAxisLabelPosition = function getYAxisLabelPosition() {\n    return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  c3_axis_fn.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n    return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  c3_axis_fn.getLabelPositionById = function getLabelPositionById(id) {\n    return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n  };\n\n  c3_axis_fn.textForXAxisLabel = function textForXAxisLabel() {\n    return this.getLabelText('x');\n  };\n\n  c3_axis_fn.textForYAxisLabel = function textForYAxisLabel() {\n    return this.getLabelText('y');\n  };\n\n  c3_axis_fn.textForY2AxisLabel = function textForY2AxisLabel() {\n    return this.getLabelText('y2');\n  };\n\n  c3_axis_fn.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n    var $$ = this.owner;\n\n    if (forHorizontal) {\n      return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n    } else {\n      return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n    }\n  };\n\n  c3_axis_fn.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? \"0.5em\" : position.isRight ? \"-0.5em\" : \"0\";\n    } else {\n      return position.isTop ? \"-0.5em\" : position.isBottom ? \"0.5em\" : \"0\";\n    }\n  };\n\n  c3_axis_fn.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n    } else {\n      return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n    }\n  };\n\n  c3_axis_fn.xForXAxisLabel = function xForXAxisLabel() {\n    return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  c3_axis_fn.xForYAxisLabel = function xForYAxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  c3_axis_fn.xForY2AxisLabel = function xForY2AxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  c3_axis_fn.dxForXAxisLabel = function dxForXAxisLabel() {\n    return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  c3_axis_fn.dxForYAxisLabel = function dxForYAxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  c3_axis_fn.dxForY2AxisLabel = function dxForY2AxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  c3_axis_fn.dyForXAxisLabel = function dyForXAxisLabel() {\n    var $$ = this.owner,\n        config = $$.config,\n        position = this.getXAxisLabelPosition();\n\n    if (config.axis_rotated) {\n      return position.isInner ? \"1.2em\" : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n    } else {\n      return position.isInner ? \"-0.5em\" : config.axis_x_height ? config.axis_x_height - 10 : \"3em\";\n    }\n  };\n\n  c3_axis_fn.dyForYAxisLabel = function dyForYAxisLabel() {\n    var $$ = this.owner,\n        position = this.getYAxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? \"-0.5em\" : \"3em\";\n    } else {\n      return position.isInner ? \"1.2em\" : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n    }\n  };\n\n  c3_axis_fn.dyForY2AxisLabel = function dyForY2AxisLabel() {\n    var $$ = this.owner,\n        position = this.getY2AxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? \"1.2em\" : \"-2.2em\";\n    } else {\n      return position.isInner ? \"-0.5em\" : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n    }\n  };\n\n  c3_axis_fn.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  c3_axis_fn.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  c3_axis_fn.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  c3_axis_fn.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n    var $$ = this.owner,\n        config = $$.config,\n        maxWidth = 0,\n        targetsToShow,\n        scale,\n        axis,\n        dummy,\n        svg;\n\n    if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n      return $$.currentMaxTickWidths[id];\n    }\n\n    if ($$.svg) {\n      targetsToShow = $$.filterTargetsToShow($$.data.targets);\n\n      if (id === 'y') {\n        scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n        axis = this.getYAxis(scale, $$.yOrient, config.axis_y_tick_format, $$.yAxisTickValues, false, true, true);\n      } else if (id === 'y2') {\n        scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n        axis = this.getYAxis(scale, $$.y2Orient, config.axis_y2_tick_format, $$.y2AxisTickValues, false, true, true);\n      } else {\n        scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n        axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n        this.updateXAxisTickValues(targetsToShow, axis);\n      }\n\n      dummy = $$.d3.select('body').append('div').classed('c3', true);\n      svg = dummy.append(\"svg\").style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n        $$.d3.select(this).selectAll('text').each(function () {\n          var box = this.getBoundingClientRect();\n\n          if (maxWidth < box.width) {\n            maxWidth = box.width;\n          }\n        });\n        dummy.remove();\n      });\n    }\n\n    $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n    return $$.currentMaxTickWidths[id];\n  };\n\n  c3_axis_fn.updateLabels = function updateLabels(withTransition) {\n    var $$ = this.owner;\n    var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n        axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n        axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n    (withTransition ? axisXLabel.transition() : axisXLabel).attr(\"x\", this.xForXAxisLabel.bind(this)).attr(\"dx\", this.dxForXAxisLabel.bind(this)).attr(\"dy\", this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n    (withTransition ? axisYLabel.transition() : axisYLabel).attr(\"x\", this.xForYAxisLabel.bind(this)).attr(\"dx\", this.dxForYAxisLabel.bind(this)).attr(\"dy\", this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n    (withTransition ? axisY2Label.transition() : axisY2Label).attr(\"x\", this.xForY2AxisLabel.bind(this)).attr(\"dx\", this.dxForY2AxisLabel.bind(this)).attr(\"dy\", this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n  };\n\n  c3_axis_fn.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n    var p = typeof padding === 'number' ? padding : padding[key];\n\n    if (!isValue(p)) {\n      return defaultValue;\n    }\n\n    if (padding.unit === 'ratio') {\n      return padding[key] * domainLength;\n    } // assume padding is pixels if unit is not specified\n\n\n    return this.convertPixelsToAxisPadding(p, domainLength);\n  };\n\n  c3_axis_fn.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n    var $$ = this.owner,\n        length = $$.config.axis_rotated ? $$.width : $$.height;\n    return domainLength * (pixels / length);\n  };\n\n  c3_axis_fn.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n    var tickValues = values,\n        targetCount,\n        start,\n        end,\n        count,\n        interval,\n        i,\n        tickValue;\n\n    if (tickCount) {\n      targetCount = isFunction(tickCount) ? tickCount() : tickCount; // compute ticks according to tickCount\n\n      if (targetCount === 1) {\n        tickValues = [values[0]];\n      } else if (targetCount === 2) {\n        tickValues = [values[0], values[values.length - 1]];\n      } else if (targetCount > 2) {\n        count = targetCount - 2;\n        start = values[0];\n        end = values[values.length - 1];\n        interval = (end - start) / (count + 1); // re-construct unique values\n\n        tickValues = [start];\n\n        for (i = 0; i < count; i++) {\n          tickValue = +start + interval * (i + 1);\n          tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n        }\n\n        tickValues.push(end);\n      }\n    }\n\n    if (!forTimeSeries) {\n      tickValues = tickValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    return tickValues;\n  };\n\n  c3_axis_fn.generateTransitions = function generateTransitions(duration) {\n    var $$ = this.owner,\n        axes = $$.axes;\n    return {\n      axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n      axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n      axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n      axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n    };\n  };\n\n  c3_axis_fn.redraw = function redraw(transitions, isHidden) {\n    var $$ = this.owner;\n    $$.axes.x.style(\"opacity\", isHidden ? 0 : 1);\n    $$.axes.y.style(\"opacity\", isHidden ? 0 : 1);\n    $$.axes.y2.style(\"opacity\", isHidden ? 0 : 1);\n    $$.axes.subx.style(\"opacity\", isHidden ? 0 : 1);\n    transitions.axisX.call($$.xAxis);\n    transitions.axisY.call($$.yAxis);\n    transitions.axisY2.call($$.y2Axis);\n    transitions.axisSubX.call($$.subXAxis);\n  };\n\n  var c3 = {\n    version: \"0.4.24\"\n  };\n  var c3_chart_fn;\n  var c3_chart_internal_fn;\n\n  function Component(owner, componentKey, fn) {\n    this.owner = owner;\n    c3.chart.internal[componentKey] = fn;\n  }\n\n  function Chart(config) {\n    var $$ = this.internal = new ChartInternal(this);\n    $$.loadConfig(config);\n    $$.beforeInit(config);\n    $$.init();\n    $$.afterInit(config); // bind \"this\" to nested API\n\n    (function bindThis(fn, target, argThis) {\n      Object.keys(fn).forEach(function (key) {\n        target[key] = fn[key].bind(argThis);\n\n        if (Object.keys(fn[key]).length > 0) {\n          bindThis(fn[key], target[key], argThis);\n        }\n      });\n    })(c3_chart_fn, this, this);\n  }\n\n  function ChartInternal(api) {\n    var $$ = this;\n    $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require(\"d3\") : undefined;\n    $$.api = api;\n    $$.config = $$.getDefaultConfig();\n    $$.data = {};\n    $$.cache = {};\n    $$.axes = {};\n  }\n\n  c3.generate = function (config) {\n    return new Chart(config);\n  };\n\n  c3.chart = {\n    fn: Chart.prototype,\n    internal: {\n      fn: ChartInternal.prototype\n    }\n  };\n  c3_chart_fn = c3.chart.fn;\n  c3_chart_internal_fn = c3.chart.internal.fn;\n\n  c3_chart_internal_fn.beforeInit = function () {// can do something\n  };\n\n  c3_chart_internal_fn.afterInit = function () {// can do something\n  };\n\n  c3_chart_internal_fn.init = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.initParams();\n\n    if (config.data_url) {\n      $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n    } else if (config.data_json) {\n      $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n    } else if (config.data_rows) {\n      $$.initWithData($$.convertRowsToData(config.data_rows));\n    } else if (config.data_columns) {\n      $$.initWithData($$.convertColumnsToData(config.data_columns));\n    } else {\n      throw Error('url or json or rows or columns is required.');\n    }\n  };\n\n  c3_chart_internal_fn.initParams = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config; // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n\n    $$.clipId = \"c3-\" + +new Date() + '-clip', $$.clipIdForXAxis = $$.clipId + '-xaxis', $$.clipIdForYAxis = $$.clipId + '-yaxis', $$.clipIdForGrid = $$.clipId + '-grid', $$.clipIdForSubchart = $$.clipId + '-subchart', $$.clipPath = $$.getClipPath($$.clipId), $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis), $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n    $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid), $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart), $$.dragStart = null;\n    $$.dragging = false;\n    $$.flowing = false;\n    $$.cancelClick = false;\n    $$.mouseover = false;\n    $$.transiting = false;\n    $$.color = $$.generateColor();\n    $$.levelColor = $$.generateLevelColor();\n    $$.dataTimeFormat = config.data_xLocaltime ? d3.time.format : d3.time.format.utc;\n    $$.axisTimeFormat = config.axis_x_localtime ? d3.time.format : d3.time.format.utc;\n    $$.defaultAxisTimeFormat = $$.axisTimeFormat.multi([[\".%L\", function (d) {\n      return d.getMilliseconds();\n    }], [\":%S\", function (d) {\n      return d.getSeconds();\n    }], [\"%I:%M\", function (d) {\n      return d.getMinutes();\n    }], [\"%I %p\", function (d) {\n      return d.getHours();\n    }], [\"%-m/%-d\", function (d) {\n      return d.getDay() && d.getDate() !== 1;\n    }], [\"%-m/%-d\", function (d) {\n      return d.getDate() !== 1;\n    }], [\"%-m/%-d\", function (d) {\n      return d.getMonth();\n    }], [\"%Y/%-m/%-d\", function () {\n      return true;\n    }]]);\n    $$.hiddenTargetIds = [];\n    $$.hiddenLegendIds = [];\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n    $$.xOrient = config.axis_rotated ? config.axis_x_inner ? \"right\" : \"left\" : config.axis_x_inner ? \"top\" : \"bottom\";\n    $$.yOrient = config.axis_rotated ? config.axis_y_inner ? \"top\" : \"bottom\" : config.axis_y_inner ? \"right\" : \"left\";\n    $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? \"bottom\" : \"top\" : config.axis_y2_inner ? \"left\" : \"right\";\n    $$.subXOrient = config.axis_rotated ? \"left\" : \"bottom\";\n    $$.isLegendRight = config.legend_position === 'right';\n    $$.isLegendInset = config.legend_position === 'inset';\n    $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n    $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n    $$.legendStep = 0;\n    $$.legendItemWidth = 0;\n    $$.legendItemHeight = 0;\n    $$.currentMaxTickWidths = {\n      x: 0,\n      y: 0,\n      y2: 0\n    };\n    $$.rotated_padding_left = 30;\n    $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n    $$.rotated_padding_top = 5;\n    $$.withoutFadeIn = {};\n    $$.intervalForObserveInserted = undefined;\n    $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n  };\n\n  c3_chart_internal_fn.initChartElements = function () {\n    if (this.initBar) {\n      this.initBar();\n    }\n\n    if (this.initLine) {\n      this.initLine();\n    }\n\n    if (this.initArc) {\n      this.initArc();\n    }\n\n    if (this.initGauge) {\n      this.initGauge();\n    }\n\n    if (this.initText) {\n      this.initText();\n    }\n  };\n\n  c3_chart_internal_fn.initWithData = function (data) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n    var defs,\n        main,\n        binding = true;\n    $$.axis = new Axis($$);\n\n    if ($$.initPie) {\n      $$.initPie();\n    }\n\n    if ($$.initBrush) {\n      $$.initBrush();\n    }\n\n    if ($$.initZoom) {\n      $$.initZoom();\n    }\n\n    if (!config.bindto) {\n      $$.selectChart = d3.selectAll([]);\n    } else if (typeof config.bindto.node === 'function') {\n      $$.selectChart = config.bindto;\n    } else {\n      $$.selectChart = d3.select(config.bindto);\n    }\n\n    if ($$.selectChart.empty()) {\n      $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n      $$.observeInserted($$.selectChart);\n      binding = false;\n    }\n\n    $$.selectChart.html(\"\").classed(\"c3\", true); // Init data as targets\n\n    $$.data.xs = {};\n    $$.data.targets = $$.convertDataToTargets(data);\n\n    if (config.data_filter) {\n      $$.data.targets = $$.data.targets.filter(config.data_filter);\n    } // Set targets to hide if needed\n\n\n    if (config.data_hide) {\n      $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n    }\n\n    if (config.legend_hide) {\n      $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n    } // Init sizes and scales\n\n\n    $$.updateSizes();\n    $$.updateScales(); // Set domains for each scale\n\n    $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n    $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n    $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n    $$.subX.domain($$.x.domain());\n    $$.subY.domain($$.y.domain());\n    $$.subY2.domain($$.y2.domain()); // Save original x domain for zoom update\n\n    $$.orgXDomain = $$.x.domain(); // Set initialized scales to brush and zoom\n\n    if ($$.brush) {\n      $$.brush.scale($$.subX);\n    }\n\n    if (config.zoom_enabled) {\n      $$.zoom.scale($$.x);\n    }\n    /*-- Basic Elements --*/\n    // Define svgs\n\n\n    $$.svg = $$.selectChart.append(\"svg\").style(\"overflow\", \"hidden\").on('mouseenter', function () {\n      return config.onmouseover.call($$);\n    }).on('mouseleave', function () {\n      return config.onmouseout.call($$);\n    });\n\n    if ($$.config.svg_classname) {\n      $$.svg.attr('class', $$.config.svg_classname);\n    } // Define defs\n\n\n    defs = $$.svg.append(\"defs\");\n    $$.clipChart = $$.appendClip(defs, $$.clipId);\n    $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n    $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n    $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n    $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n    $$.updateSvgSize(); // Define regions\n\n    main = $$.main = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('main'));\n\n    if ($$.initSubchart) {\n      $$.initSubchart();\n    }\n\n    if ($$.initTooltip) {\n      $$.initTooltip();\n    }\n\n    if ($$.initLegend) {\n      $$.initLegend();\n    }\n\n    if ($$.initTitle) {\n      $$.initTitle();\n    }\n    /*-- Main Region --*/\n    // text when empty\n\n\n    main.append(\"text\").attr(\"class\", CLASS.text + ' ' + CLASS.empty).attr(\"text-anchor\", \"middle\") // horizontal centering of text at x position in all browsers.\n    .attr(\"dominant-baseline\", \"middle\"); // vertical centering of text at y position in all browsers, except IE.\n    // Regions\n\n    $$.initRegion(); // Grids\n\n    $$.initGrid(); // Define g for chart area\n\n    main.append('g').attr(\"clip-path\", $$.clipPath).attr('class', CLASS.chart); // Grid lines\n\n    if (config.grid_lines_front) {\n      $$.initGridLines();\n    } // Cover whole with rects for events\n\n\n    $$.initEventRect(); // Define g for chart\n\n    $$.initChartElements(); // if zoom privileged, insert rect to forefront\n    // TODO: is this needed?\n\n    main.insert('rect', config.zoom_privileged ? null : 'g.' + CLASS.regions).attr('class', CLASS.zoomRect).attr('width', $$.width).attr('height', $$.height).style('opacity', 0).on(\"dblclick.zoom\", null); // Set default extent if defined\n\n    if (config.axis_x_extent) {\n      $$.brush.extent($$.getDefaultExtent());\n    } // Add Axis\n\n\n    $$.axis.init(); // Set targets\n\n    $$.updateTargets($$.data.targets); // Draw with targets\n\n    if (binding) {\n      $$.updateDimension();\n      $$.config.oninit.call($$);\n      $$.redraw({\n        withTransition: false,\n        withTransform: true,\n        withUpdateXDomain: true,\n        withUpdateOrgXDomain: true,\n        withTransitionForAxis: false\n      });\n    } // Bind resize event\n\n\n    $$.bindResize(); // export element of the chart\n\n    $$.api.element = $$.selectChart.node();\n  };\n\n  c3_chart_internal_fn.smoothLines = function (el, type) {\n    var $$ = this;\n\n    if (type === 'grid') {\n      el.each(function () {\n        var g = $$.d3.select(this),\n            x1 = g.attr('x1'),\n            x2 = g.attr('x2'),\n            y1 = g.attr('y1'),\n            y2 = g.attr('y2');\n        g.attr({\n          'x1': Math.ceil(x1),\n          'x2': Math.ceil(x2),\n          'y1': Math.ceil(y1),\n          'y2': Math.ceil(y2)\n        });\n      });\n    }\n  };\n\n  c3_chart_internal_fn.updateSizes = function () {\n    var $$ = this,\n        config = $$.config;\n    var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n        legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n        legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n        hasArc = $$.hasArcType(),\n        xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n        subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + xAxisHeight : 0;\n    $$.currentWidth = $$.getCurrentWidth();\n    $$.currentHeight = $$.getCurrentHeight(); // for main\n\n    $$.margin = config.axis_rotated ? {\n      top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n    } : {\n      top: 4 + $$.getCurrentPaddingTop(),\n      // for top tick text\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n    }; // for subchart\n\n    $$.margin2 = config.axis_rotated ? {\n      top: $$.margin.top,\n      right: NaN,\n      bottom: 20 + legendHeightForBottom,\n      left: $$.rotated_padding_left\n    } : {\n      top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n      right: NaN,\n      bottom: xAxisHeight + legendHeightForBottom,\n      left: $$.margin.left\n    }; // for legend\n\n    $$.margin3 = {\n      top: 0,\n      right: NaN,\n      bottom: 0,\n      left: 0\n    };\n\n    if ($$.updateSizeForLegend) {\n      $$.updateSizeForLegend(legendHeight, legendWidth);\n    }\n\n    $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n    $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n\n    if ($$.width < 0) {\n      $$.width = 0;\n    }\n\n    if ($$.height < 0) {\n      $$.height = 0;\n    }\n\n    $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n    $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n\n    if ($$.width2 < 0) {\n      $$.width2 = 0;\n    }\n\n    if ($$.height2 < 0) {\n      $$.height2 = 0;\n    } // for arc\n\n\n    $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n    $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n\n    if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n      $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n    }\n\n    if ($$.updateRadius) {\n      $$.updateRadius();\n    }\n\n    if ($$.isLegendRight && hasArc) {\n      $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n    }\n  };\n\n  c3_chart_internal_fn.updateTargets = function (targets) {\n    var $$ = this;\n    /*-- Main --*/\n    //-- Text --//\n\n    $$.updateTargetsForText(targets); //-- Bar --//\n\n    $$.updateTargetsForBar(targets); //-- Line --//\n\n    $$.updateTargetsForLine(targets); //-- Arc --//\n\n    if ($$.hasArcType() && $$.updateTargetsForArc) {\n      $$.updateTargetsForArc(targets);\n    }\n    /*-- Sub --*/\n\n\n    if ($$.updateTargetsForSubchart) {\n      $$.updateTargetsForSubchart(targets);\n    } // Fade-in each chart\n\n\n    $$.showTargets();\n  };\n\n  c3_chart_internal_fn.showTargets = function () {\n    var $$ = this;\n    $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n      return $$.isTargetToShow(d.id);\n    }).transition().duration($$.config.transition_duration).style(\"opacity\", 1);\n  };\n\n  c3_chart_internal_fn.redraw = function (options, transitions) {\n    var $$ = this,\n        main = $$.main,\n        d3 = $$.d3,\n        config = $$.config;\n    var areaIndices = $$.getShapeIndices($$.isAreaType),\n        barIndices = $$.getShapeIndices($$.isBarType),\n        lineIndices = $$.getShapeIndices($$.isLineType);\n    var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n    var hideAxis = $$.hasArcType();\n    var drawArea, drawBar, drawLine, xForText, yForText;\n    var duration, durationForExit, durationForAxis;\n    var waitForDraw, flow;\n    var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n        tickValues,\n        i,\n        intervalForCulling,\n        xDomainForZoom;\n    var xv = $$.xv.bind($$),\n        cx,\n        cy;\n    options = options || {};\n    withY = getOption(options, \"withY\", true);\n    withSubchart = getOption(options, \"withSubchart\", true);\n    withTransition = getOption(options, \"withTransition\", true);\n    withTransform = getOption(options, \"withTransform\", false);\n    withUpdateXDomain = getOption(options, \"withUpdateXDomain\", false);\n    withUpdateOrgXDomain = getOption(options, \"withUpdateOrgXDomain\", false);\n    withTrimXDomain = getOption(options, \"withTrimXDomain\", true);\n    withUpdateXAxis = getOption(options, \"withUpdateXAxis\", withUpdateXDomain);\n    withLegend = getOption(options, \"withLegend\", false);\n    withEventRect = getOption(options, \"withEventRect\", true);\n    withDimension = getOption(options, \"withDimension\", true);\n    withTransitionForExit = getOption(options, \"withTransitionForExit\", withTransition);\n    withTransitionForAxis = getOption(options, \"withTransitionForAxis\", withTransition);\n    duration = withTransition ? config.transition_duration : 0;\n    durationForExit = withTransitionForExit ? duration : 0;\n    durationForAxis = withTransitionForAxis ? duration : 0;\n    transitions = transitions || $$.axis.generateTransitions(durationForAxis); // update legend and transform each g\n\n    if (withLegend && config.legend_show) {\n      $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n    } else if (withDimension) {\n      // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n      // no need to update axis in it because they will be updated in redraw()\n      $$.updateDimension(true);\n    } // MEMO: needed for grids calculation\n\n\n    if ($$.isCategorized() && targetsToShow.length === 0) {\n      $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n    }\n\n    if (targetsToShow.length) {\n      $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n\n      if (!config.axis_x_tick_values) {\n        tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n      }\n    } else {\n      $$.xAxis.tickValues([]);\n      $$.subXAxis.tickValues([]);\n    }\n\n    if (config.zoom_rescale && !options.flow) {\n      xDomainForZoom = $$.x.orgDomain();\n    }\n\n    $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n    $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n\n    if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n      $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n    }\n\n    if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n      $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n    } // axes\n\n\n    $$.axis.redraw(transitions, hideAxis); // Update axis label\n\n    $$.axis.updateLabels(withTransition); // show/hide if manual culling needed\n\n    if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n      if (config.axis_x_tick_culling && tickValues) {\n        for (i = 1; i < tickValues.length; i++) {\n          if (tickValues.length / i < config.axis_x_tick_culling_max) {\n            intervalForCulling = i;\n            break;\n          }\n        }\n\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n          var index = tickValues.indexOf(e);\n\n          if (index >= 0) {\n            d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n          }\n        });\n      } else {\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n      }\n    } // setup drawer - MEMO: these must be called after axis updated\n\n\n    drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n    drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n    drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n    xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n    yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false); // Update sub domain\n\n    if (withY) {\n      $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n      $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n    } // xgrid focus\n\n\n    $$.updateXgridFocus(); // Data empty label positioning and text.\n\n    main.select(\"text.\" + CLASS.text + '.' + CLASS.empty).attr(\"x\", $$.width / 2).attr(\"y\", $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1); // grid\n\n    $$.updateGrid(duration); // rect for regions\n\n    $$.updateRegion(duration); // bars\n\n    $$.updateBar(durationForExit); // lines, areas and cricles\n\n    $$.updateLine(durationForExit);\n    $$.updateArea(durationForExit);\n    $$.updateCircle(); // text\n\n    if ($$.hasDataLabel()) {\n      $$.updateText(durationForExit);\n    } // title\n\n\n    if ($$.redrawTitle) {\n      $$.redrawTitle();\n    } // arc\n\n\n    if ($$.redrawArc) {\n      $$.redrawArc(duration, durationForExit, withTransform);\n    } // subchart\n\n\n    if ($$.redrawSubchart) {\n      $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n    } // circles for select\n\n\n    main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove(); // event rects will redrawn when flow called\n\n    if (config.interaction_enabled && !options.flow && withEventRect) {\n      $$.redrawEventRect();\n\n      if ($$.updateZoom) {\n        $$.updateZoom();\n      }\n    } // update circleY based on updated parameters\n\n\n    $$.updateCircleY(); // generate circle x/y functions depending on updated params\n\n    cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n    cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\n\n    if (options.flow) {\n      flow = $$.generateFlow({\n        targets: targetsToShow,\n        flow: options.flow,\n        duration: options.flow.duration,\n        drawBar: drawBar,\n        drawLine: drawLine,\n        drawArea: drawArea,\n        cx: cx,\n        cy: cy,\n        xv: xv,\n        xForText: xForText,\n        yForText: yForText\n      });\n    }\n\n    if ((duration || flow) && $$.isTabVisible()) {\n      // Only use transition if tab visible. See #938.\n      // transition should be derived from one transition\n      d3.transition().duration(duration).each(function () {\n        var transitionsToWait = []; // redraw and gather transitions\n\n        [$$.redrawBar(drawBar, true), $$.redrawLine(drawLine, true), $$.redrawArea(drawArea, true), $$.redrawCircle(cx, cy, true), $$.redrawText(xForText, yForText, options.flow, true), $$.redrawRegion(true), $$.redrawGrid(true)].forEach(function (transitions) {\n          transitions.forEach(function (transition) {\n            transitionsToWait.push(transition);\n          });\n        }); // Wait for end of transitions to call flow and onrendered callback\n\n        waitForDraw = $$.generateWait();\n        transitionsToWait.forEach(function (t) {\n          waitForDraw.add(t);\n        });\n      }).call(waitForDraw, function () {\n        if (flow) {\n          flow();\n        }\n\n        if (config.onrendered) {\n          config.onrendered.call($$);\n        }\n      });\n    } else {\n      $$.redrawBar(drawBar);\n      $$.redrawLine(drawLine);\n      $$.redrawArea(drawArea);\n      $$.redrawCircle(cx, cy);\n      $$.redrawText(xForText, yForText, options.flow);\n      $$.redrawRegion();\n      $$.redrawGrid();\n\n      if (config.onrendered) {\n        config.onrendered.call($$);\n      }\n    } // update fadein condition\n\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = true;\n    });\n  };\n\n  c3_chart_internal_fn.updateAndRedraw = function (options) {\n    var $$ = this,\n        config = $$.config,\n        transitions;\n    options = options || {}; // same with redraw\n\n    options.withTransition = getOption(options, \"withTransition\", true);\n    options.withTransform = getOption(options, \"withTransform\", false);\n    options.withLegend = getOption(options, \"withLegend\", false); // NOT same with redraw\n\n    options.withUpdateXDomain = true;\n    options.withUpdateOrgXDomain = true;\n    options.withTransitionForExit = false;\n    options.withTransitionForTransform = getOption(options, \"withTransitionForTransform\", options.withTransition); // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n\n    $$.updateSizes(); // MEMO: called in updateLegend in redraw if withLegend\n\n    if (!(options.withLegend && config.legend_show)) {\n      transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0); // Update scales\n\n      $$.updateScales();\n      $$.updateSvgSize(); // Update g positions\n\n      $$.transformAll(options.withTransitionForTransform, transitions);\n    } // Draw with new sizes & scales\n\n\n    $$.redraw(options, transitions);\n  };\n\n  c3_chart_internal_fn.redrawWithoutRescale = function () {\n    this.redraw({\n      withY: false,\n      withSubchart: false,\n      withEventRect: false,\n      withTransitionForAxis: false\n    });\n  };\n\n  c3_chart_internal_fn.isTimeSeries = function () {\n    return this.config.axis_x_type === 'timeseries';\n  };\n\n  c3_chart_internal_fn.isCategorized = function () {\n    return this.config.axis_x_type.indexOf('categor') >= 0;\n  };\n\n  c3_chart_internal_fn.isCustomX = function () {\n    var $$ = this,\n        config = $$.config;\n    return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n  };\n\n  c3_chart_internal_fn.isTimeSeriesY = function () {\n    return this.config.axis_y_type === 'timeseries';\n  };\n\n  c3_chart_internal_fn.getTranslate = function (target) {\n    var $$ = this,\n        config = $$.config,\n        x,\n        y;\n\n    if (target === 'main') {\n      x = asHalfPixel($$.margin.left);\n      y = asHalfPixel($$.margin.top);\n    } else if (target === 'context') {\n      x = asHalfPixel($$.margin2.left);\n      y = asHalfPixel($$.margin2.top);\n    } else if (target === 'legend') {\n      x = $$.margin3.left;\n      y = $$.margin3.top;\n    } else if (target === 'x') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height;\n    } else if (target === 'y') {\n      x = 0;\n      y = config.axis_rotated ? $$.height : 0;\n    } else if (target === 'y2') {\n      x = config.axis_rotated ? 0 : $$.width;\n      y = config.axis_rotated ? 1 : 0;\n    } else if (target === 'subx') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height2;\n    } else if (target === 'arc') {\n      x = $$.arcWidth / 2;\n      y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n    }\n\n    return \"translate(\" + x + \",\" + y + \")\";\n  };\n\n  c3_chart_internal_fn.initialOpacity = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n  };\n\n  c3_chart_internal_fn.initialOpacityForCircle = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n  };\n\n  c3_chart_internal_fn.opacityForCircle = function (d) {\n    var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n    var opacity = isPointShouldBeShown ? 1 : 0;\n    return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n  };\n\n  c3_chart_internal_fn.opacityForText = function () {\n    return this.hasDataLabel() ? 1 : 0;\n  };\n\n  c3_chart_internal_fn.xx = function (d) {\n    return d ? this.x(d.x) : null;\n  };\n\n  c3_chart_internal_fn.xv = function (d) {\n    var $$ = this,\n        value = d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  c3_chart_internal_fn.yv = function (d) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n    return Math.ceil(yScale(d.value));\n  };\n\n  c3_chart_internal_fn.subxx = function (d) {\n    return d ? this.subX(d.x) : null;\n  };\n\n  c3_chart_internal_fn.transformMain = function (withTransition, transitions) {\n    var $$ = this,\n        xAxis,\n        yAxis,\n        y2Axis;\n\n    if (transitions && transitions.axisX) {\n      xAxis = transitions.axisX;\n    } else {\n      xAxis = $$.main.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        xAxis = xAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY) {\n      yAxis = transitions.axisY;\n    } else {\n      yAxis = $$.main.select('.' + CLASS.axisY);\n\n      if (withTransition) {\n        yAxis = yAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY2) {\n      y2Axis = transitions.axisY2;\n    } else {\n      y2Axis = $$.main.select('.' + CLASS.axisY2);\n\n      if (withTransition) {\n        y2Axis = y2Axis.transition();\n      }\n    }\n\n    (withTransition ? $$.main.transition() : $$.main).attr(\"transform\", $$.getTranslate('main'));\n    xAxis.attr(\"transform\", $$.getTranslate('x'));\n    yAxis.attr(\"transform\", $$.getTranslate('y'));\n    y2Axis.attr(\"transform\", $$.getTranslate('y2'));\n    $$.main.select('.' + CLASS.chartArcs).attr(\"transform\", $$.getTranslate('arc'));\n  };\n\n  c3_chart_internal_fn.transformAll = function (withTransition, transitions) {\n    var $$ = this;\n    $$.transformMain(withTransition, transitions);\n\n    if ($$.config.subchart_show) {\n      $$.transformContext(withTransition, transitions);\n    }\n\n    if ($$.legend) {\n      $$.transformLegend(withTransition);\n    }\n  };\n\n  c3_chart_internal_fn.updateSvgSize = function () {\n    var $$ = this,\n        brush = $$.svg.select(\".c3-brush .background\");\n    $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n    $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n    $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() ? brush.attr('height') : 0);\n    $$.svg.select('.' + CLASS.zoomRect).attr('width', $$.width).attr('height', $$.height); // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n\n    $$.selectChart.style('max-height', $$.currentHeight + \"px\");\n  };\n\n  c3_chart_internal_fn.updateDimension = function (withoutAxis) {\n    var $$ = this;\n\n    if (!withoutAxis) {\n      if ($$.config.axis_rotated) {\n        $$.axes.x.call($$.xAxis);\n        $$.axes.subx.call($$.subXAxis);\n      } else {\n        $$.axes.y.call($$.yAxis);\n        $$.axes.y2.call($$.y2Axis);\n      }\n    }\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    $$.transformAll(false);\n  };\n\n  c3_chart_internal_fn.observeInserted = function (selection) {\n    var $$ = this,\n        observer;\n\n    if (typeof MutationObserver === 'undefined') {\n      window.console.error(\"MutationObserver not defined.\");\n      return;\n    }\n\n    observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'childList' && mutation.previousSibling) {\n          observer.disconnect(); // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n\n          $$.intervalForObserveInserted = window.setInterval(function () {\n            // parentNode will NOT be null when completed\n            if (selection.node().parentNode) {\n              window.clearInterval($$.intervalForObserveInserted);\n              $$.updateDimension();\n\n              if ($$.brush) {\n                $$.brush.update();\n              }\n\n              $$.config.oninit.call($$);\n              $$.redraw({\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransition: false,\n                withTransitionForTransform: false,\n                withLegend: true\n              });\n              selection.transition().style('opacity', 1);\n            }\n          }, 10);\n        }\n      });\n    });\n    observer.observe(selection.node(), {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  };\n\n  c3_chart_internal_fn.bindResize = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.resizeFunction = $$.generateResize(); // need to call .remove\n\n    $$.resizeFunction.add(function () {\n      config.onresize.call($$);\n    });\n\n    if (config.resize_auto) {\n      $$.resizeFunction.add(function () {\n        if ($$.resizeTimeout !== undefined) {\n          window.clearTimeout($$.resizeTimeout);\n        }\n\n        $$.resizeTimeout = window.setTimeout(function () {\n          delete $$.resizeTimeout;\n          $$.api.flush();\n        }, 100);\n      });\n    }\n\n    $$.resizeFunction.add(function () {\n      config.onresized.call($$);\n    });\n\n    $$.resizeIfElementDisplayed = function () {\n      // if element not displayed skip it\n      if ($$.api == null || !$$.api.element.offsetParent) {\n        return;\n      }\n\n      $$.resizeFunction();\n    };\n\n    if (window.attachEvent) {\n      window.attachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.addEventListener) {\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n    } else {\n      // fallback to this, if this is a very old browser\n      var wrapper = window.onresize;\n\n      if (!wrapper) {\n        // create a wrapper that will call all charts\n        wrapper = $$.generateResize();\n      } else if (!wrapper.add || !wrapper.remove) {\n        // there is already a handler registered, make sure we call it too\n        wrapper = $$.generateResize();\n        wrapper.add(window.onresize);\n      } // add this graph to the wrapper, we will be removed if the user calls destroy\n\n\n      wrapper.add($$.resizeFunction);\n\n      window.onresize = function () {\n        // if element not displayed skip it\n        if (!$$.api.element.offsetParent) {\n          return;\n        }\n\n        wrapper();\n      };\n    }\n  };\n\n  c3_chart_internal_fn.generateResize = function () {\n    var resizeFunctions = [];\n\n    function callResizeFunctions() {\n      resizeFunctions.forEach(function (f) {\n        f();\n      });\n    }\n\n    callResizeFunctions.add = function (f) {\n      resizeFunctions.push(f);\n    };\n\n    callResizeFunctions.remove = function (f) {\n      for (var i = 0; i < resizeFunctions.length; i++) {\n        if (resizeFunctions[i] === f) {\n          resizeFunctions.splice(i, 1);\n          break;\n        }\n      }\n    };\n\n    return callResizeFunctions;\n  };\n\n  c3_chart_internal_fn.endall = function (transition, callback) {\n    var n = 0;\n    transition.each(function () {\n      ++n;\n    }).each(\"end\", function () {\n      if (! --n) {\n        callback.apply(this, arguments);\n      }\n    });\n  };\n\n  c3_chart_internal_fn.generateWait = function () {\n    var transitionsToWait = [],\n        f = function f(transition, callback) {\n      var timer = setInterval(function () {\n        var done = 0;\n        transitionsToWait.forEach(function (t) {\n          if (t.empty()) {\n            done += 1;\n            return;\n          }\n\n          try {\n            t.transition();\n          } catch (e) {\n            done += 1;\n          }\n        });\n\n        if (done === transitionsToWait.length) {\n          clearInterval(timer);\n\n          if (callback) {\n            callback();\n          }\n        }\n      }, 10);\n    };\n\n    f.add = function (transition) {\n      transitionsToWait.push(transition);\n    };\n\n    return f;\n  };\n\n  c3_chart_internal_fn.parseDate = function (date) {\n    var $$ = this,\n        parsedDate;\n\n    if (date instanceof Date) {\n      parsedDate = date;\n    } else if (typeof date === 'string') {\n      parsedDate = $$.dataTimeFormat($$.config.data_xFormat).parse(date);\n    } else if ((typeof date === 'undefined' ? 'undefined' : _typeof(date)) === 'object') {\n      parsedDate = new Date(+date);\n    } else if (typeof date === 'number' && !isNaN(date)) {\n      parsedDate = new Date(+date);\n    }\n\n    if (!parsedDate || isNaN(+parsedDate)) {\n      window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n    }\n\n    return parsedDate;\n  };\n\n  c3_chart_internal_fn.isTabVisible = function () {\n    var hidden;\n\n    if (typeof document.hidden !== \"undefined\") {\n      // Opera 12.10 and Firefox 18 and later support\n      hidden = \"hidden\";\n    } else if (typeof document.mozHidden !== \"undefined\") {\n      hidden = \"mozHidden\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n    }\n\n    return document[hidden] ? false : true;\n  };\n\n  c3_chart_internal_fn.isValue = isValue;\n  c3_chart_internal_fn.isFunction = isFunction;\n  c3_chart_internal_fn.isString = isString;\n  c3_chart_internal_fn.isUndefined = isUndefined;\n  c3_chart_internal_fn.isDefined = isDefined;\n  c3_chart_internal_fn.ceil10 = ceil10;\n  c3_chart_internal_fn.asHalfPixel = asHalfPixel;\n  c3_chart_internal_fn.diffDomain = diffDomain;\n  c3_chart_internal_fn.isEmpty = isEmpty;\n  c3_chart_internal_fn.notEmpty = notEmpty;\n  c3_chart_internal_fn.notEmpty = notEmpty;\n  c3_chart_internal_fn.getOption = getOption;\n  c3_chart_internal_fn.hasValue = hasValue;\n  c3_chart_internal_fn.sanitise = sanitise;\n  c3_chart_internal_fn.getPathBox = getPathBox;\n  c3_chart_internal_fn.CLASS = CLASS;\n  /* jshint ignore:start */\n  // PhantomJS doesn't have support for Function.prototype.bind, which has caused confusion. Use\n  // this polyfill to avoid the confusion.\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill\n\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n      if (typeof this !== 'function') {\n        // closest thing possible to the ECMAScript 5\n        // internal IsCallable function\n        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n      }\n\n      var aArgs = Array.prototype.slice.call(arguments, 1),\n          fToBind = this,\n          fNOP = function fNOP() {},\n          fBound = function fBound() {\n        return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n      };\n\n      fNOP.prototype = this.prototype;\n      fBound.prototype = new fNOP();\n      return fBound;\n    };\n  } // SVGPathSeg API polyfill\n  // https://github.com/progers/pathseg\n  //\n  // This is a drop-in replacement for the SVGPathSeg and SVGPathSegList APIs that were removed from\n  // SVG2 (https://lists.w3.org/Archives/Public/www-svg/2015Jun/0044.html), including the latest spec\n  // changes which were implemented in Firefox 43 and Chrome 46.\n\n\n  (function () {\n    if (!(\"SVGPathSeg\" in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n      window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n        this.pathSegType = type;\n        this.pathSegTypeAsLetter = typeAsLetter;\n        this._owningPathSegList = owningPathSegList;\n      };\n\n      window.SVGPathSeg.prototype.classname = \"SVGPathSeg\";\n      window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n      window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n      window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n      window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n      window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n      window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n      window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n      window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19; // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n\n      window.SVGPathSeg.prototype._segmentChanged = function () {\n        if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n      };\n\n      window.SVGPathSegClosePath = function (owningPathSegList) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, \"z\", owningPathSegList);\n      };\n\n      window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegClosePath.prototype.toString = function () {\n        return \"[object SVGPathSegClosePath]\";\n      };\n\n      window.SVGPathSegClosePath.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter;\n      };\n\n      window.SVGPathSegClosePath.prototype.clone = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, \"M\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoAbs.prototype.toString = function () {\n        return \"[object SVGPathSegMovetoAbs]\";\n      };\n\n      window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, \"m\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoRel.prototype.toString = function () {\n        return \"[object SVGPathSegMovetoRel]\";\n      };\n\n      window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype.clone = function () {\n        return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, \"L\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoAbs.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoAbs]\";\n      };\n\n      window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, \"l\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoRel.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoRel]\";\n      };\n\n      window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, \"C\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoCubicAbs]\";\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x1\", {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y1\", {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x2\", {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y2\", {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, \"c\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoCubicRel]\";\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x1\", {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y1\", {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x2\", {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y2\", {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, \"Q\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoQuadraticAbs]\";\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"x1\", {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"y1\", {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, \"q\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoQuadraticRel]\";\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"x1\", {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"y1\", {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, \"A\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcAbs.prototype.toString = function () {\n        return \"[object SVGPathSegArcAbs]\";\n      };\n\n      window.SVGPathSegArcAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._r1 + \" \" + this._r2 + \" \" + this._angle + \" \" + (this._largeArcFlag ? \"1\" : \"0\") + \" \" + (this._sweepFlag ? \"1\" : \"0\") + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegArcAbs.prototype.clone = function () {\n        return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"r1\", {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"r2\", {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"angle\", {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"largeArcFlag\", {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"sweepFlag\", {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, \"a\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcRel.prototype.toString = function () {\n        return \"[object SVGPathSegArcRel]\";\n      };\n\n      window.SVGPathSegArcRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._r1 + \" \" + this._r2 + \" \" + this._angle + \" \" + (this._largeArcFlag ? \"1\" : \"0\") + \" \" + (this._sweepFlag ? \"1\" : \"0\") + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegArcRel.prototype.clone = function () {\n        return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"r1\", {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"r2\", {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"angle\", {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"largeArcFlag\", {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, \"sweepFlag\", {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, \"H\", owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoHorizontalAbs]\";\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, \"h\", owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoHorizontalRel]\";\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, \"V\", owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoVerticalAbs]\";\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, \"v\", owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n        return \"[object SVGPathSegLinetoVerticalRel]\";\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, \"S\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoCubicSmoothAbs]\";\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"x2\", {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"y2\", {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, \"s\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoCubicSmoothRel]\";\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"x2\", {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"y2\", {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, \"T\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoQuadraticSmoothAbs]\";\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, \"t\", owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n        return \"[object SVGPathSegCurvetoQuadraticSmoothRel]\";\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      }); // Add createSVGPathSeg* functions to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n\n      window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n        return new window.SVGPathSegMovetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n        return new window.SVGPathSegMovetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n        return new window.SVGPathSegLinetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n        return new window.SVGPathSegLinetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n      };\n\n      if (!(\"getPathSegAtLength\" in window.SVGPathElement.prototype)) {\n        // Add getPathSegAtLength to SVGPathElement.\n        // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n        // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n        window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n          if (distance === undefined || !isFinite(distance)) throw \"Invalid arguments.\";\n          var measurementElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n          measurementElement.setAttribute(\"d\", this.getAttribute(\"d\"));\n          var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1; // If the path is empty, return 0.\n\n          if (lastPathSegment <= 0) return 0;\n\n          do {\n            measurementElement.pathSegList.removeItem(lastPathSegment);\n            if (distance > measurementElement.getTotalLength()) break;\n            lastPathSegment--;\n          } while (lastPathSegment > 0);\n\n          return lastPathSegment;\n        };\n      }\n    }\n\n    if (!(\"SVGPathSegList\" in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n      window.SVGPathSegList = function (pathElement) {\n        this._pathElement = pathElement;\n        this._list = this._parsePath(this._pathElement.getAttribute(\"d\")); // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n\n        this._mutationObserverConfig = {\n          \"attributes\": true,\n          \"attributeFilter\": [\"d\"]\n        };\n        this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n\n      window.SVGPathSegList.prototype.classname = \"SVGPathSegList\";\n      Object.defineProperty(window.SVGPathSegList.prototype, \"numberOfItems\", {\n        get: function get() {\n          this._checkPathSynchronizedToList();\n\n          return this._list.length;\n        },\n        enumerable: true\n      }); // Add the pathSegList accessors to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n\n      Object.defineProperty(window.SVGPathElement.prototype, \"pathSegList\", {\n        get: function get() {\n          if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n          return this._pathSegList;\n        },\n        enumerable: true\n      }); // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n\n      Object.defineProperty(window.SVGPathElement.prototype, \"normalizedPathSegList\", {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, \"animatedPathSegList\", {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, \"animatedNormalizedPathSegList\", {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      }); // Process any pending mutations to the path element and update the list as needed.\n      // This should be the first call of all public functions and is needed because\n      // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n\n      window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n        this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n      };\n\n      window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n        if (!this._pathElement) return;\n        var hasPathMutations = false;\n        mutationRecords.forEach(function (record) {\n          if (record.attributeName == \"d\") hasPathMutations = true;\n        });\n        if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute(\"d\"));\n      }; // Serialize the list and update the path's 'd' attribute.\n\n\n      window.SVGPathSegList.prototype._writeListToPath = function () {\n        this._pathElementMutationObserver.disconnect();\n\n        this._pathElement.setAttribute(\"d\", window.SVGPathSegList._pathSegArrayAsString(this._list));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      }; // When a path segment changes the list needs to be synchronized back to the path element.\n\n\n      window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.clear = function () {\n        this._checkPathSynchronizedToList();\n\n        this._list.forEach(function (pathSeg) {\n          pathSeg._owningPathSegList = null;\n        });\n\n        this._list = [];\n\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.initialize = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        this._list = [newItem];\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n        if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw \"INDEX_SIZE_ERR\";\n      };\n\n      window.SVGPathSegList.prototype.getItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        return this._list[index];\n      };\n\n      window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n        this._checkPathSynchronizedToList(); // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n\n\n        if (index > this.numberOfItems) index = this.numberOfItems;\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.splice(index, 0, newItem);\n\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._checkValidIndex(index);\n\n        this._list[index] = newItem;\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.removeItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        var item = this._list[index];\n\n        this._list.splice(index, 1);\n\n        this._writeListToPath();\n\n        return item;\n      };\n\n      window.SVGPathSegList.prototype.appendItem = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.push(newItem);\n\n        newItem._owningPathSegList = this; // TODO: Optimize this to just append to the existing attribute.\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n        var string = \"\";\n        var first = true;\n        pathSegArray.forEach(function (pathSeg) {\n          if (first) {\n            first = false;\n            string += pathSeg._asPathString();\n          } else {\n            string += \" \" + pathSeg._asPathString();\n          }\n        });\n        return string;\n      }; // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n\n\n      window.SVGPathSegList.prototype._parsePath = function (string) {\n        if (!string || string.length == 0) return [];\n        var owningPathSegList = this;\n\n        var Builder = function Builder() {\n          this.pathSegList = [];\n        };\n\n        Builder.prototype.appendSegment = function (pathSeg) {\n          this.pathSegList.push(pathSeg);\n        };\n\n        var Source = function Source(string) {\n          this._string = string;\n          this._currentIndex = 0;\n          this._endIndex = this._string.length;\n          this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n\n          this._skipOptionalSpaces();\n        };\n\n        Source.prototype._isCurrentSpace = function () {\n          var character = this._string[this._currentIndex];\n          return character <= \" \" && (character == \" \" || character == \"\\n\" || character == \"\\t\" || character == \"\\r\" || character == \"\\f\");\n        };\n\n        Source.prototype._skipOptionalSpaces = function () {\n          while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {\n            this._currentIndex++;\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n          if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != \",\") return false;\n\n          if (this._skipOptionalSpaces()) {\n            if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \",\") {\n              this._currentIndex++;\n\n              this._skipOptionalSpaces();\n            }\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.hasMoreData = function () {\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.peekSegmentType = function () {\n          var lookahead = this._string[this._currentIndex];\n          return this._pathSegTypeFromChar(lookahead);\n        };\n\n        Source.prototype._pathSegTypeFromChar = function (lookahead) {\n          switch (lookahead) {\n            case \"Z\":\n            case \"z\":\n              return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n\n            case \"M\":\n              return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n\n            case \"m\":\n              return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n\n            case \"L\":\n              return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n\n            case \"l\":\n              return window.SVGPathSeg.PATHSEG_LINETO_REL;\n\n            case \"C\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n\n            case \"c\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n\n            case \"Q\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n\n            case \"q\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n\n            case \"A\":\n              return window.SVGPathSeg.PATHSEG_ARC_ABS;\n\n            case \"a\":\n              return window.SVGPathSeg.PATHSEG_ARC_REL;\n\n            case \"H\":\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n\n            case \"h\":\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n\n            case \"V\":\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n\n            case \"v\":\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n\n            case \"S\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n\n            case \"s\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n\n            case \"T\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n\n            case \"t\":\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n\n            default:\n              return window.SVGPathSeg.PATHSEG_UNKNOWN;\n          }\n        };\n\n        Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n          // Check for remaining coordinates in the current command.\n          if ((lookahead == \"+\" || lookahead == \"-\" || lookahead == \".\" || lookahead >= \"0\" && lookahead <= \"9\") && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            return previousCommand;\n          }\n\n          return window.SVGPathSeg.PATHSEG_UNKNOWN;\n        };\n\n        Source.prototype.initialCommandIsMoveTo = function () {\n          // If the path is empty it is still valid, so return true.\n          if (!this.hasMoreData()) return true;\n          var command = this.peekSegmentType(); // Path must start with moveTo.\n\n          return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n        }; // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n\n\n        Source.prototype._parseNumber = function () {\n          var exponent = 0;\n          var integer = 0;\n          var frac = 1;\n          var decimal = 0;\n          var sign = 1;\n          var expsign = 1;\n          var startIndex = this._currentIndex;\n\n          this._skipOptionalSpaces(); // Read the sign.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \"+\") this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \"-\") {\n            this._currentIndex++;\n            sign = -1;\n          }\n          if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") && this._string.charAt(this._currentIndex) != \".\") // The first character of a number must be one of [0-9+-.].\n            return undefined; // Read the integer part, build right-to-left.\n\n          var startIntPartIndex = this._currentIndex;\n\n          while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n            this._currentIndex++;\n          } // Advance to first non-digit.\n\n\n          if (this._currentIndex != startIntPartIndex) {\n            var scanIntPartIndex = this._currentIndex - 1;\n            var multiplier = 1;\n\n            while (scanIntPartIndex >= startIntPartIndex) {\n              integer += multiplier * (this._string.charAt(scanIntPartIndex--) - \"0\");\n              multiplier *= 10;\n            }\n          } // Read the decimals.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \".\") {\n            this._currentIndex++; // There must be a least one digit following the .\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n              frac *= 10;\n              decimal += (this._string.charAt(this._currentIndex) - \"0\") / frac;\n              this._currentIndex += 1;\n            }\n          } // Read the exponent part.\n\n\n          if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == \"e\" || this._string.charAt(this._currentIndex) == \"E\") && this._string.charAt(this._currentIndex + 1) != \"x\" && this._string.charAt(this._currentIndex + 1) != \"m\") {\n            this._currentIndex++; // Read the sign of the exponent.\n\n            if (this._string.charAt(this._currentIndex) == \"+\") {\n              this._currentIndex++;\n            } else if (this._string.charAt(this._currentIndex) == \"-\") {\n              this._currentIndex++;\n              expsign = -1;\n            } // There must be an exponent.\n\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n              exponent *= 10;\n              exponent += this._string.charAt(this._currentIndex) - \"0\";\n              this._currentIndex++;\n            }\n          }\n\n          var number = integer + decimal;\n          number *= sign;\n          if (exponent) number *= Math.pow(10, expsign * exponent);\n          if (startIndex == this._currentIndex) return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return number;\n        };\n\n        Source.prototype._parseArcFlag = function () {\n          if (this._currentIndex >= this._endIndex) return undefined;\n          var flag = false;\n\n          var flagChar = this._string.charAt(this._currentIndex++);\n\n          if (flagChar == \"0\") flag = false;else if (flagChar == \"1\") flag = true;else return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return flag;\n        };\n\n        Source.prototype.parseSegment = function () {\n          var lookahead = this._string[this._currentIndex];\n\n          var command = this._pathSegTypeFromChar(lookahead);\n\n          if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n            // Possibly an implicit command. Not allowed if this is the first command.\n            if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n            command = this._nextCommandHelper(lookahead, this._previousCommand);\n            if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n          } else {\n            this._currentIndex++;\n          }\n\n          this._previousCommand = command;\n\n          switch (command) {\n            case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n              return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n              return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_REL:\n              return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n              return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n              return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n              return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n              return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n              return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n              this._skipOptionalSpaces();\n\n              return new window.SVGPathSegClosePath(owningPathSegList);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_ARC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            case window.SVGPathSeg.PATHSEG_ARC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            default:\n              throw \"Unknown path seg type.\";\n          }\n        };\n\n        var builder = new Builder();\n        var source = new Source(string);\n        if (!source.initialCommandIsMoveTo()) return [];\n\n        while (source.hasMoreData()) {\n          var pathSeg = source.parseSegment();\n          if (!pathSeg) return [];\n          builder.appendSegment(pathSeg);\n        }\n\n        return builder.pathSegList;\n      };\n    }\n  })(); // String.padEnd polyfill for IE11\n  //\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n\n\n  if (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength, padString) {\n      targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return String(this) + padString.slice(0, targetLength);\n      }\n    };\n  }\n  /* jshint ignore:end */\n\n\n  c3_chart_fn.axis = function () {};\n\n  c3_chart_fn.axis.labels = function (labels) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      Object.keys(labels).forEach(function (axisId) {\n        $$.axis.setLabelText(axisId, labels[axisId]);\n      });\n      $$.axis.updateLabels();\n    } // TODO: return some values?\n\n  };\n\n  c3_chart_fn.axis.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if ((typeof max === 'undefined' ? 'undefined' : _typeof(max)) === 'object') {\n        if (isValue(max.x)) {\n          config.axis_x_max = max.x;\n        }\n\n        if (isValue(max.y)) {\n          config.axis_y_max = max.y;\n        }\n\n        if (isValue(max.y2)) {\n          config.axis_y2_max = max.y2;\n        }\n      } else {\n        config.axis_y_max = config.axis_y2_max = max;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_max,\n        y: config.axis_y_max,\n        y2: config.axis_y2_max\n      };\n    }\n  };\n\n  c3_chart_fn.axis.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if ((typeof min === 'undefined' ? 'undefined' : _typeof(min)) === 'object') {\n        if (isValue(min.x)) {\n          config.axis_x_min = min.x;\n        }\n\n        if (isValue(min.y)) {\n          config.axis_y_min = min.y;\n        }\n\n        if (isValue(min.y2)) {\n          config.axis_y2_min = min.y2;\n        }\n      } else {\n        config.axis_y_min = config.axis_y2_min = min;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_min,\n        y: config.axis_y_min,\n        y2: config.axis_y2_min\n      };\n    }\n  };\n\n  c3_chart_fn.axis.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.axis.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.axis.min(range.min);\n      }\n    } else {\n      return {\n        max: this.axis.max(),\n        min: this.axis.min()\n      };\n    }\n  };\n\n  c3_chart_fn.category = function (i, category) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length > 1) {\n      config.axis_x_categories[i] = category;\n      $$.redraw();\n    }\n\n    return config.axis_x_categories[i];\n  };\n\n  c3_chart_fn.categories = function (categories) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!arguments.length) {\n      return config.axis_x_categories;\n    }\n\n    config.axis_x_categories = categories;\n    $$.redraw();\n    return config.axis_x_categories;\n  };\n\n  c3_chart_fn.resize = function (size) {\n    var $$ = this.internal,\n        config = $$.config;\n    config.size_width = size ? size.width : null;\n    config.size_height = size ? size.height : null;\n    this.flush();\n  };\n\n  c3_chart_fn.flush = function () {\n    var $$ = this.internal;\n    $$.updateAndRedraw({\n      withLegend: true,\n      withTransition: false,\n      withTransitionForTransform: false\n    });\n  };\n\n  c3_chart_fn.destroy = function () {\n    var $$ = this.internal;\n    window.clearInterval($$.intervalForObserveInserted);\n\n    if ($$.resizeTimeout !== undefined) {\n      window.clearTimeout($$.resizeTimeout);\n    }\n\n    if (window.detachEvent) {\n      window.detachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.removeEventListener) {\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\n    } else {\n      var wrapper = window.onresize; // check if no one else removed our wrapper and remove our resizeFunction from it\n\n      if (wrapper && wrapper.add && wrapper.remove) {\n        wrapper.remove($$.resizeFunction);\n      }\n    } // remove the inner resize functions\n\n\n    $$.resizeFunction.remove();\n    $$.selectChart.classed('c3', false).html(\"\"); // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n\n    Object.keys($$).forEach(function (key) {\n      $$[key] = null;\n    });\n    return null;\n  }; // TODO: fix\n\n\n  c3_chart_fn.color = function (id) {\n    var $$ = this.internal;\n    return $$.color(id); // more patterns\n  };\n\n  c3_chart_fn.data = function (targetIds) {\n    var targets = this.internal.data.targets;\n    return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n      return [].concat(targetIds).indexOf(t.id) >= 0;\n    });\n  };\n\n  c3_chart_fn.data.shown = function (targetIds) {\n    return this.internal.filterTargetsToShow(this.data(targetIds));\n  };\n\n  c3_chart_fn.data.values = function (targetId) {\n    var targets,\n        values = null;\n\n    if (targetId) {\n      targets = this.data(targetId);\n      values = targets[0] ? targets[0].values.map(function (d) {\n        return d.value;\n      }) : null;\n    }\n\n    return values;\n  };\n\n  c3_chart_fn.data.names = function (names) {\n    this.internal.clearLegendItemTextBoxCache();\n    return this.internal.updateDataAttributes('names', names);\n  };\n\n  c3_chart_fn.data.colors = function (colors) {\n    return this.internal.updateDataAttributes('colors', colors);\n  };\n\n  c3_chart_fn.data.axes = function (axes) {\n    return this.internal.updateDataAttributes('axes', axes);\n  };\n\n  c3_chart_fn.flow = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        notfoundIds = [],\n        orgDataCount = $$.getMaxDataCount(),\n        dataCount,\n        domain,\n        baseTarget,\n        baseValue,\n        length = 0,\n        tail = 0,\n        diff,\n        to;\n\n    if (args.json) {\n      data = $$.convertJsonToData(args.json, args.keys);\n    } else if (args.rows) {\n      data = $$.convertRowsToData(args.rows);\n    } else if (args.columns) {\n      data = $$.convertColumnsToData(args.columns);\n    } else {\n      return;\n    }\n\n    targets = $$.convertDataToTargets(data, true); // Update/Add data\n\n    $$.data.targets.forEach(function (t) {\n      var found = false,\n          i,\n          j;\n\n      for (i = 0; i < targets.length; i++) {\n        if (t.id === targets[i].id) {\n          found = true;\n\n          if (t.values[t.values.length - 1]) {\n            tail = t.values[t.values.length - 1].index + 1;\n          }\n\n          length = targets[i].values.length;\n\n          for (j = 0; j < length; j++) {\n            targets[i].values[j].index = tail + j;\n\n            if (!$$.isTimeSeries()) {\n              targets[i].values[j].x = tail + j;\n            }\n          }\n\n          t.values = t.values.concat(targets[i].values);\n          targets.splice(i, 1);\n          break;\n        }\n      }\n\n      if (!found) {\n        notfoundIds.push(t.id);\n      }\n    }); // Append null for not found targets\n\n    $$.data.targets.forEach(function (t) {\n      var i, j;\n\n      for (i = 0; i < notfoundIds.length; i++) {\n        if (t.id === notfoundIds[i]) {\n          tail = t.values[t.values.length - 1].index + 1;\n\n          for (j = 0; j < length; j++) {\n            t.values.push({\n              id: t.id,\n              index: tail + j,\n              x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n              value: null\n            });\n          }\n        }\n      }\n    }); // Generate null values for new target\n\n    if ($$.data.targets.length) {\n      targets.forEach(function (t) {\n        var i,\n            missing = [];\n\n        for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n          missing.push({\n            id: t.id,\n            index: i,\n            x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n            value: null\n          });\n        }\n\n        t.values.forEach(function (v) {\n          v.index += tail;\n\n          if (!$$.isTimeSeries()) {\n            v.x += tail;\n          }\n        });\n        t.values = missing.concat(t.values);\n      });\n    }\n\n    $$.data.targets = $$.data.targets.concat(targets); // add remained\n    // check data count because behavior needs to change when it's only one\n\n    dataCount = $$.getMaxDataCount();\n    baseTarget = $$.data.targets[0];\n    baseValue = baseTarget.values[0]; // Update length to flow if needed\n\n    if (isDefined(args.to)) {\n      length = 0;\n      to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n      baseTarget.values.forEach(function (v) {\n        if (v.x < to) {\n          length++;\n        }\n      });\n    } else if (isDefined(args.length)) {\n      length = args.length;\n    } // If only one data, update the domain to flow from left edge of the chart\n\n\n    if (!orgDataCount) {\n      if ($$.isTimeSeries()) {\n        if (baseTarget.values.length > 1) {\n          diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n        } else {\n          diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n        }\n      } else {\n        diff = 1;\n      }\n\n      domain = [baseValue.x - diff, baseValue.x];\n      $$.updateXDomain(null, true, true, false, domain);\n    } else if (orgDataCount === 1) {\n      if ($$.isTimeSeries()) {\n        diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n        domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n        $$.updateXDomain(null, true, true, false, domain);\n      }\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      flow: {\n        index: baseValue.index,\n        length: length,\n        duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n        done: args.done,\n        orgDataCount: orgDataCount\n      },\n      withLegend: true,\n      withTransition: orgDataCount > 1,\n      withTrimXDomain: false,\n      withUpdateXAxis: true\n    });\n  };\n\n  c3_chart_internal_fn.generateFlow = function (args) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    return function () {\n      var targets = args.targets,\n          flow = args.flow,\n          drawBar = args.drawBar,\n          drawLine = args.drawLine,\n          drawArea = args.drawArea,\n          cx = args.cx,\n          cy = args.cy,\n          xv = args.xv,\n          xForText = args.xForText,\n          yForText = args.yForText,\n          duration = args.duration;\n\n      var translateX,\n          scaleX = 1,\n          transform,\n          flowIndex = flow.index,\n          flowLength = flow.length,\n          flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n          flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n          orgDomain = $$.x.domain(),\n          domain,\n          durationForFlow = flow.duration || duration,\n          done = flow.done || function () {},\n          wait = $$.generateWait();\n\n      var xgrid = $$.xgrid || d3.selectAll([]),\n          xgridLines = $$.xgridLines || d3.selectAll([]),\n          mainRegion = $$.mainRegion || d3.selectAll([]),\n          mainText = $$.mainText || d3.selectAll([]),\n          mainBar = $$.mainBar || d3.selectAll([]),\n          mainLine = $$.mainLine || d3.selectAll([]),\n          mainArea = $$.mainArea || d3.selectAll([]),\n          mainCircle = $$.mainCircle || d3.selectAll([]); // set flag\n\n      $$.flowing = true; // remove head data after rendered\n\n      $$.data.targets.forEach(function (d) {\n        d.values.splice(0, flowLength);\n      }); // update x domain to generate axis elements for flow\n\n      domain = $$.updateXDomain(targets, true, true); // update elements related to x scale\n\n      if ($$.updateXGrid) {\n        $$.updateXGrid(true);\n      } // generate transform to flow\n\n\n      if (!flow.orgDataCount) {\n        // if empty\n        if ($$.data.targets[0].values.length !== 1) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          if ($$.isTimeSeries()) {\n            flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n            flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n            translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n          } else {\n            translateX = diffDomain(domain) / 2;\n          }\n        }\n      } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n        translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n      } else {\n        if ($$.isTimeSeries()) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n        }\n      }\n\n      scaleX = diffDomain(orgDomain) / diffDomain(domain);\n      transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n      $$.hideXGridFocus();\n      d3.transition().ease('linear').duration(durationForFlow).each(function () {\n        wait.add($$.axes.x.transition().call($$.xAxis));\n        wait.add(mainBar.transition().attr('transform', transform));\n        wait.add(mainLine.transition().attr('transform', transform));\n        wait.add(mainArea.transition().attr('transform', transform));\n        wait.add(mainCircle.transition().attr('transform', transform));\n        wait.add(mainText.transition().attr('transform', transform));\n        wait.add(mainRegion.filter($$.isRegionOnX).transition().attr('transform', transform));\n        wait.add(xgrid.transition().attr('transform', transform));\n        wait.add(xgridLines.transition().attr('transform', transform));\n      }).call(wait, function () {\n        var i,\n            shapes = [],\n            texts = [],\n            eventRects = []; // remove flowed elements\n\n        if (flowLength) {\n          for (i = 0; i < flowLength; i++) {\n            shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n            texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n            eventRects.push('.' + CLASS.eventRect + '-' + (flowIndex + i));\n          }\n\n          $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n          $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n          $$.svg.selectAll('.' + CLASS.eventRects).selectAll(eventRects).remove();\n          $$.svg.select('.' + CLASS.xgrid).remove();\n        } // draw again for removing flowed elements and reverting attr\n\n\n        xgrid.attr('transform', null).attr($$.xgridAttr);\n        xgridLines.attr('transform', null);\n        xgridLines.select('line').attr(\"x1\", config.axis_rotated ? 0 : xv).attr(\"x2\", config.axis_rotated ? $$.width : xv);\n        xgridLines.select('text').attr(\"x\", config.axis_rotated ? $$.width : 0).attr(\"y\", xv);\n        mainBar.attr('transform', null).attr(\"d\", drawBar);\n        mainLine.attr('transform', null).attr(\"d\", drawLine);\n        mainArea.attr('transform', null).attr(\"d\", drawArea);\n        mainCircle.attr('transform', null).attr(\"cx\", cx).attr(\"cy\", cy);\n        mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n        mainRegion.attr('transform', null);\n        mainRegion.select('rect').filter($$.isRegionOnX).attr(\"x\", $$.regionX.bind($$)).attr(\"width\", $$.regionWidth.bind($$));\n\n        if (config.interaction_enabled) {\n          $$.redrawEventRect();\n        } // callback for end of flow\n\n\n        done();\n        $$.flowing = false;\n      });\n    };\n  };\n\n  c3_chart_fn.focus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n    this.defocus();\n    candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.expandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, true);\n    $$.focusedTargetIds = targetIds;\n    $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  c3_chart_fn.defocus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, false);\n    $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    $$.defocusedTargetIds = targetIds;\n  };\n\n  c3_chart_fn.revert = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n\n    candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    if ($$.config.legend_show) {\n      $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n      $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n        return $$.d3.select(this).classed(CLASS.legendItemFocused);\n      }).classed(CLASS.legendItemFocused, false);\n    }\n\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n  };\n\n  c3_chart_fn.xgrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_x_lines;\n    }\n\n    config.grid_x_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_x_lines;\n  };\n\n  c3_chart_fn.xgrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n  };\n\n  c3_chart_fn.xgrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, true);\n  };\n\n  c3_chart_fn.ygrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_y_lines;\n    }\n\n    config.grid_y_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_y_lines;\n  };\n\n  c3_chart_fn.ygrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n  };\n\n  c3_chart_fn.ygrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, false);\n  };\n\n  c3_chart_fn.groups = function (groups) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (isUndefined(groups)) {\n      return config.data_groups;\n    }\n\n    config.data_groups = groups;\n    $$.redraw();\n    return config.data_groups;\n  };\n\n  c3_chart_fn.legend = function () {};\n\n  c3_chart_fn.legend.show = function (targetIds) {\n    var $$ = this.internal;\n    $$.showLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n\n  c3_chart_fn.legend.hide = function (targetIds) {\n    var $$ = this.internal;\n    $$.hideLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n\n  c3_chart_fn.load = function (args) {\n    var $$ = this.internal,\n        config = $$.config; // update xs if specified\n\n    if (args.xs) {\n      $$.addXs(args.xs);\n    } // update names if exists\n\n\n    if ('names' in args) {\n      c3_chart_fn.data.names.bind(this)(args.names);\n    } // update classes if exists\n\n\n    if ('classes' in args) {\n      Object.keys(args.classes).forEach(function (id) {\n        config.data_classes[id] = args.classes[id];\n      });\n    } // update categories if exists\n\n\n    if ('categories' in args && $$.isCategorized()) {\n      config.axis_x_categories = args.categories;\n    } // update axes if exists\n\n\n    if ('axes' in args) {\n      Object.keys(args.axes).forEach(function (id) {\n        config.data_axes[id] = args.axes[id];\n      });\n    } // update colors if exists\n\n\n    if ('colors' in args) {\n      Object.keys(args.colors).forEach(function (id) {\n        config.data_colors[id] = args.colors[id];\n      });\n    } // use cache if exists\n\n\n    if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n      $$.load($$.getCaches(args.cacheIds), args.done);\n      return;\n    } // unload if needed\n\n\n    if ('unload' in args) {\n      // TODO: do not unload if target will load (included in url/rows/columns)\n      $$.unload($$.mapToTargetIds(typeof args.unload === 'boolean' && args.unload ? null : args.unload), function () {\n        $$.loadFromArgs(args);\n      });\n    } else {\n      $$.loadFromArgs(args);\n    }\n  };\n\n  c3_chart_fn.unload = function (args) {\n    var $$ = this.internal;\n    args = args || {};\n\n    if (args instanceof Array) {\n      args = {\n        ids: args\n      };\n    } else if (typeof args === 'string') {\n      args = {\n        ids: [args]\n      };\n    }\n\n    $$.unload($$.mapToTargetIds(args.ids), function () {\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true,\n        withLegend: true\n      });\n\n      if (args.done) {\n        args.done();\n      }\n    });\n  };\n\n  c3_chart_fn.regions = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = regions;\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  c3_chart_fn.regions.add = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = config.regions.concat(regions);\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  c3_chart_fn.regions.remove = function (options) {\n    var $$ = this.internal,\n        config = $$.config,\n        duration,\n        classes,\n        regions;\n    options = options || {};\n    duration = $$.getOption(options, \"duration\", config.transition_duration);\n    classes = $$.getOption(options, \"classes\", [CLASS.region]);\n    regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n      return '.' + c;\n    }));\n    (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n    config.regions = config.regions.filter(function (region) {\n      var found = false;\n\n      if (!region['class']) {\n        return true;\n      }\n\n      region['class'].split(' ').forEach(function (c) {\n        if (classes.indexOf(c) >= 0) {\n          found = true;\n        }\n      });\n      return !found;\n    });\n    return config.regions;\n  };\n\n  c3_chart_fn.selected = function (targetId) {\n    var $$ = this.internal,\n        d3 = $$.d3;\n    return d3.merge($$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n      return d3.select(this).classed(CLASS.SELECTED);\n    }).map(function (d) {\n      return d.map(function (d) {\n        var data = d.__data__;\n        return data.data ? data.data : data;\n      });\n    }));\n  };\n\n  c3_chart_fn.select = function (ids, indices, resetOther) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d) && !isSelected) {\n          toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n        }\n      } else if (isDefined(resetOther) && resetOther) {\n        if (isSelected) {\n          toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n        }\n      }\n    });\n  };\n\n  c3_chart_fn.unselect = function (ids, indices) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d)) {\n          if (isSelected) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        }\n      }\n    });\n  };\n\n  c3_chart_fn.show = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.removeHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 1, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 1);\n    });\n\n    if (options.withLegend) {\n      $$.showLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  c3_chart_fn.hide = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.addHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 0);\n    });\n\n    if (options.withLegend) {\n      $$.hideLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  c3_chart_fn.toggle = function (targetIds, options) {\n    var that = this,\n        $$ = this.internal;\n    $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n      $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n    });\n  };\n\n  c3_chart_fn.tooltip = function () {};\n\n  c3_chart_fn.tooltip.show = function (args) {\n    var $$ = this.internal,\n        index,\n        mouse; // determine mouse position on the chart\n\n    if (args.mouse) {\n      mouse = args.mouse;\n    } // determine focus data\n\n\n    if (args.data) {\n      if ($$.isMultipleX()) {\n        // if multiple xs, target point will be determined by mouse\n        mouse = [$$.x(args.data.x), $$.getYScale(args.data.id)(args.data.value)];\n        index = null;\n      } else {\n        // TODO: when tooltip_grouped = false\n        index = isValue(args.data.index) ? args.data.index : $$.getIndexByX(args.data.x);\n      }\n    } else if (typeof args.x !== 'undefined') {\n      index = $$.getIndexByX(args.x);\n    } else if (typeof args.index !== 'undefined') {\n      index = args.index;\n    } // emulate mouse events to show\n\n\n    $$.dispatchEvent('mouseover', index, mouse);\n    $$.dispatchEvent('mousemove', index, mouse);\n    $$.config.tooltip_onshow.call($$, args.data);\n  };\n\n  c3_chart_fn.tooltip.hide = function () {\n    // TODO: get target data by checking the state of focus\n    this.internal.dispatchEvent('mouseout', 0);\n    this.internal.config.tooltip_onhide.call(this);\n  };\n\n  c3_chart_fn.transform = function (type, targetIds) {\n    var $$ = this.internal,\n        options = ['pie', 'donut'].indexOf(type) >= 0 ? {\n      withTransform: true\n    } : null;\n    $$.transformTo(targetIds, type, options);\n  };\n\n  c3_chart_internal_fn.transformTo = function (targetIds, type, optionsForRedraw) {\n    var $$ = this,\n        withTransitionForAxis = !$$.hasArcType(),\n        options = optionsForRedraw || {\n      withTransitionForAxis: withTransitionForAxis\n    };\n    options.withTransitionForTransform = false;\n    $$.transiting = false;\n    $$.setTargetType(targetIds, type);\n    $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n\n    $$.updateAndRedraw(options);\n  };\n\n  c3_chart_fn.x = function (x) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetX($$.data.targets, x);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  c3_chart_fn.xs = function (xs) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetXs($$.data.targets, xs);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  c3_chart_fn.zoom = function (domain) {\n    var $$ = this.internal;\n\n    if (domain) {\n      if ($$.isTimeSeries()) {\n        domain = domain.map(function (x) {\n          return $$.parseDate(x);\n        });\n      }\n\n      $$.brush.extent(domain);\n      $$.redraw({\n        withUpdateXDomain: true,\n        withY: $$.config.zoom_rescale\n      });\n      $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n    }\n\n    return $$.brush.extent();\n  };\n\n  c3_chart_fn.zoom.enable = function (enabled) {\n    var $$ = this.internal;\n    $$.config.zoom_enabled = enabled;\n    $$.updateAndRedraw();\n  };\n\n  c3_chart_fn.unzoom = function () {\n    var $$ = this.internal;\n    $$.brush.clear().update();\n    $$.redraw({\n      withUpdateXDomain: true\n    });\n  };\n\n  c3_chart_fn.zoom.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (max === 0 || max) {\n      config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n    } else {\n      return config.zoom_x_max;\n    }\n  };\n\n  c3_chart_fn.zoom.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (min === 0 || min) {\n      config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n    } else {\n      return config.zoom_x_min;\n    }\n  };\n\n  c3_chart_fn.zoom.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.domain.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.domain.min(range.min);\n      }\n    } else {\n      return {\n        max: this.domain.max(),\n        min: this.domain.min()\n      };\n    }\n  };\n\n  c3_chart_internal_fn.initPie = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.pie = d3.layout.pie().value(function (d) {\n      return d.values.reduce(function (a, b) {\n        return a + b.value;\n      }, 0);\n    });\n    $$.pie.sort($$.getOrderFunction() || null);\n  };\n\n  c3_chart_internal_fn.updateRadius = function () {\n    var $$ = this,\n        config = $$.config,\n        w = config.gauge_width || config.donut_width,\n        gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n    $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n    $$.radius = $$.radiusExpanded * 0.95;\n    $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n    $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n    $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n  };\n\n  c3_chart_internal_fn.updateArc = function () {\n    var $$ = this;\n    $$.svgArc = $$.getSvgArc();\n    $$.svgArcExpanded = $$.getSvgArcExpanded();\n    $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n  };\n\n  c3_chart_internal_fn.updateAngle = function (d) {\n    var $$ = this,\n        config = $$.config,\n        found = false,\n        index = 0,\n        gMin,\n        gMax,\n        gTic,\n        gValue;\n\n    if (!config) {\n      return null;\n    }\n\n    $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n      if (!found && t.data.id === d.data.id) {\n        found = true;\n        d = t;\n        d.index = index;\n      }\n\n      index++;\n    });\n\n    if (isNaN(d.startAngle)) {\n      d.startAngle = 0;\n    }\n\n    if (isNaN(d.endAngle)) {\n      d.endAngle = d.startAngle;\n    }\n\n    if ($$.isGaugeType(d.data)) {\n      gMin = config.gauge_min;\n      gMax = config.gauge_max;\n      gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n      gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n      d.startAngle = config.gauge_startingAngle;\n      d.endAngle = d.startAngle + gTic * gValue;\n    }\n\n    return found ? d : null;\n  };\n\n  c3_chart_internal_fn.getSvgArc = function () {\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        arc = $$.d3.svg.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    }),\n        newArc = function newArc(d, withoutUpdate) {\n      var updated;\n\n      if (withoutUpdate) {\n        return arc(d);\n      } // for interpolate\n\n\n      updated = $$.updateAngle(d);\n      return updated ? arc(updated) : \"M 0 0\";\n    }; // TODO: extends all function\n\n\n    newArc.centroid = arc.centroid;\n    return newArc;\n  };\n\n  c3_chart_internal_fn.getSvgArcExpanded = function (rate) {\n    rate = rate || 1;\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n        arc = $$.d3.svg.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    });\n    return function (d) {\n      var updated = $$.updateAngle(d);\n      return updated ? arc(updated) : \"M 0 0\";\n    };\n  };\n\n  c3_chart_internal_fn.getArc = function (d, withoutUpdate, force) {\n    return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : \"M 0 0\";\n  };\n\n  c3_chart_internal_fn.transformForArcLabel = function (d) {\n    var $$ = this,\n        config = $$.config,\n        updated = $$.updateAngle(d),\n        c,\n        x,\n        y,\n        h,\n        ratio,\n        translate = \"\",\n        hasGauge = $$.hasType('gauge');\n\n    if (updated && !hasGauge) {\n      c = this.svgArc.centroid(updated);\n      x = isNaN(c[0]) ? 0 : c[0];\n      y = isNaN(c[1]) ? 0 : c[1];\n      h = Math.sqrt(x * x + y * y);\n\n      if ($$.hasType('donut') && config.donut_label_ratio) {\n        ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n      } else if ($$.hasType('pie') && config.pie_label_ratio) {\n        ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n      } else {\n        ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n      }\n\n      translate = \"translate(\" + x * ratio + ',' + y * ratio + \")\";\n    } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n      var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n      x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n      y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n      translate = \"translate(\" + x + ',' + y + \")\";\n    }\n\n    return translate;\n  };\n\n  c3_chart_internal_fn.getArcRatio = function (d) {\n    var $$ = this,\n        config = $$.config,\n        whole = Math.PI * ($$.hasType('gauge') && !config.gauge_fullCircle ? 1 : 2);\n    return d ? (d.endAngle - d.startAngle) / whole : null;\n  };\n\n  c3_chart_internal_fn.convertToArcData = function (d) {\n    return this.addName({\n      id: d.data.id,\n      value: d.value,\n      ratio: this.getArcRatio(d),\n      index: d.index\n    });\n  };\n\n  c3_chart_internal_fn.textForArcLabel = function (d) {\n    var $$ = this,\n        updated,\n        value,\n        ratio,\n        id,\n        format;\n\n    if (!$$.shouldShowArcLabel()) {\n      return \"\";\n    }\n\n    updated = $$.updateAngle(d);\n    value = updated ? updated.value : null;\n    ratio = $$.getArcRatio(updated);\n    id = d.data.id;\n\n    if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n      return \"\";\n    }\n\n    format = $$.getArcLabelFormat();\n    return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n  };\n\n  c3_chart_internal_fn.textForGaugeMinMax = function (value, isMax) {\n    var $$ = this,\n        format = $$.getGaugeLabelExtents();\n    return format ? format(value, isMax) : value;\n  };\n\n  c3_chart_internal_fn.expandArc = function (targetIds) {\n    var $$ = this,\n        interval; // MEMO: avoid to cancel transition\n\n    if ($$.transiting) {\n      interval = window.setInterval(function () {\n        if (!$$.transiting) {\n          window.clearInterval(interval);\n\n          if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n            $$.expandArc(targetIds);\n          }\n        }\n      }, 10);\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n      if (!$$.shouldExpand(d.data.id)) {\n        return;\n      }\n\n      $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr(\"d\", $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr(\"d\", $$.svgArcExpandedSub).each(function (d) {\n        if ($$.isDonutType(d.data)) ;\n      });\n    });\n  };\n\n  c3_chart_internal_fn.unexpandArc = function (targetIds) {\n    var $$ = this;\n\n    if ($$.transiting) {\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n      return $$.expandDuration(d.data.id);\n    }).attr(\"d\", $$.svgArc);\n    $$.svg.selectAll('.' + CLASS.arc);\n  };\n\n  c3_chart_internal_fn.expandDuration = function (id) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isDonutType(id)) {\n      return config.donut_expand_duration;\n    } else if ($$.isGaugeType(id)) {\n      return config.gauge_expand_duration;\n    } else if ($$.isPieType(id)) {\n      return config.pie_expand_duration;\n    } else {\n      return 50;\n    }\n  };\n\n  c3_chart_internal_fn.shouldExpand = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n  };\n\n  c3_chart_internal_fn.shouldShowArcLabel = function () {\n    var $$ = this,\n        config = $$.config,\n        shouldShow = true;\n\n    if ($$.hasType('donut')) {\n      shouldShow = config.donut_label_show;\n    } else if ($$.hasType('pie')) {\n      shouldShow = config.pie_label_show;\n    } // when gauge, always true\n\n\n    return shouldShow;\n  };\n\n  c3_chart_internal_fn.meetsArcLabelThreshold = function (ratio) {\n    var $$ = this,\n        config = $$.config,\n        threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n    return ratio >= threshold;\n  };\n\n  c3_chart_internal_fn.getArcLabelFormat = function () {\n    var $$ = this,\n        config = $$.config,\n        format = config.pie_label_format;\n\n    if ($$.hasType('gauge')) {\n      format = config.gauge_label_format;\n    } else if ($$.hasType('donut')) {\n      format = config.donut_label_format;\n    }\n\n    return format;\n  };\n\n  c3_chart_internal_fn.getGaugeLabelExtents = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.gauge_label_extents;\n  };\n\n  c3_chart_internal_fn.getArcTitle = function () {\n    var $$ = this;\n    return $$.hasType('donut') ? $$.config.donut_title : \"\";\n  };\n\n  c3_chart_internal_fn.updateTargetsForArc = function (targets) {\n    var $$ = this,\n        main = $$.main,\n        mainPieUpdate,\n        mainPieEnter,\n        classChartArc = $$.classChartArc.bind($$),\n        classArcs = $$.classArcs.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainPieUpdate = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr(\"class\", function (d) {\n      return classChartArc(d) + classFocus(d.data);\n    });\n    mainPieEnter = mainPieUpdate.enter().append(\"g\").attr(\"class\", classChartArc);\n    mainPieEnter.append('g').attr('class', classArcs);\n    mainPieEnter.append(\"text\").attr(\"dy\", $$.hasType('gauge') ? \"-.1em\" : \".35em\").style(\"opacity\", 0).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\"); // MEMO: can not keep same color..., but not bad to update color in redraw\n    //mainPieUpdate.exit().remove();\n  };\n\n  c3_chart_internal_fn.initArc = function () {\n    var $$ = this;\n    $$.arcs = $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartArcs).attr(\"transform\", $$.getTranslate('arc'));\n    $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style(\"text-anchor\", \"middle\").text($$.getArcTitle());\n  };\n\n  c3_chart_internal_fn.redrawArc = function (duration, durationForExit, withTransform) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        main = $$.main,\n        mainArc,\n        backgroundArc,\n        mainArcLabelLine,\n        hasGaugeType = $$.hasType('gauge');\n    mainArc = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n    mainArc.enter().append('path').attr(\"class\", $$.classArc.bind($$)).style(\"fill\", function (d) {\n      return $$.color(d.data);\n    }).style(\"cursor\", function (d) {\n      return config.interaction_enabled && config.data_selection_isselectable(d) ? \"pointer\" : null;\n    }).each(function (d) {\n      if ($$.isGaugeType(d.data)) {\n        d.startAngle = d.endAngle = config.gauge_startingAngle;\n      }\n\n      this._current = d;\n    });\n\n    if (hasGaugeType) {\n      mainArcLabelLine = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n      mainArcLabelLine.enter().append('rect').attr(\"class\", function (d) {\n        return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n      });\n\n      if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n        mainArcLabelLine.style(\"display\", \"none\");\n      } else {\n        mainArcLabelLine.style(\"fill\", function (d) {\n          return config.color_pattern.length > 0 ? $$.levelColor(d.data.values[0].value) : $$.color(d.data);\n        }).style(\"display\", config.gauge_labelLine_show ? \"\" : \"none\").each(function (d) {\n          var lineLength = 0,\n              lineThickness = 2,\n              x = 0,\n              y = 0,\n              transform = \"\";\n\n          if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n            var updated = $$.updateAngle(d),\n                innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n                lineAngle = updated.endAngle - Math.PI / 2,\n                arcInnerRadius = $$.radius - innerLineLength,\n                linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n            lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n            x = Math.cos(linePositioningAngle) * arcInnerRadius;\n            y = Math.sin(linePositioningAngle) * arcInnerRadius;\n            transform = \"rotate(\" + lineAngle * 180 / Math.PI + \", \" + x + \", \" + y + \")\";\n          }\n\n          d3.select(this).attr({\n            x: x,\n            y: y,\n            width: lineLength,\n            height: lineThickness,\n            transform: transform\n          }).style(\"stroke-dasharray\", \"0, \" + (lineLength + lineThickness) + \", 0\");\n        });\n      }\n    }\n\n    mainArc.attr(\"transform\", function (d) {\n      return !$$.isGaugeType(d.data) && withTransform ? \"scale(0)\" : \"\";\n    }).on('mouseover', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.expandArc(updated.data.id);\n        $$.api.focus(updated.data.id);\n        $$.toggleFocusLegend(updated.data.id, true);\n        $$.config.data_onmouseover(arcData, this);\n      }\n    } : null).on('mousemove', config.interaction_enabled ? function (d) {\n      var updated = $$.updateAngle(d),\n          arcData,\n          selectedData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated), selectedData = [arcData];\n        $$.showTooltip(selectedData, this);\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.unexpandArc(updated.data.id);\n        $$.api.revert();\n        $$.revertLegend();\n        $$.hideTooltip();\n        $$.config.data_onmouseout(arcData, this);\n      }\n    } : null).on('click', config.interaction_enabled ? function (d, i) {\n      var updated = $$.updateAngle(d),\n          arcData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n\n        if ($$.toggleShape) {\n          $$.toggleShape(this, arcData, i);\n        }\n\n        $$.config.data_onclick.call($$.api, arcData, this);\n      }\n    } : null).each(function () {\n      $$.transiting = true;\n    }).transition().duration(duration).attrTween(\"d\", function (d) {\n      var updated = $$.updateAngle(d),\n          interpolate;\n\n      if (!updated) {\n        return function () {\n          return \"M 0 0\";\n        };\n      } //                if (this._current === d) {\n      //                    this._current = {\n      //                        startAngle: Math.PI*2,\n      //                        endAngle: Math.PI*2,\n      //                    };\n      //                }\n\n\n      if (isNaN(this._current.startAngle)) {\n        this._current.startAngle = 0;\n      }\n\n      if (isNaN(this._current.endAngle)) {\n        this._current.endAngle = this._current.startAngle;\n      }\n\n      interpolate = d3.interpolate(this._current, updated);\n      this._current = interpolate(0);\n      return function (t) {\n        var interpolated = interpolate(t);\n        interpolated.data = d.data; // data.id will be updated by interporator\n\n        return $$.getArc(interpolated, true);\n      };\n    }).attr(\"transform\", withTransform ? \"scale(1)\" : \"\").style(\"fill\", function (d) {\n      return $$.levelColor ? $$.levelColor(d.data.values[0].value) : $$.color(d.data.id);\n    }) // Where gauge reading color would receive customization.\n    .call($$.endall, function () {\n      $$.transiting = false;\n    });\n    mainArc.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    main.selectAll('.' + CLASS.chartArc).select('text').style(\"opacity\", 0).attr('class', function (d) {\n      return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n    }).text($$.textForArcLabel.bind($$)).attr(\"transform\", $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n      return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n    }).transition().duration(duration).style(\"opacity\", function (d) {\n      return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n    });\n    main.select('.' + CLASS.chartArcsTitle).style(\"opacity\", $$.hasType('donut') || hasGaugeType ? 1 : 0);\n\n    if (hasGaugeType) {\n      var index = 0;\n      backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n      backgroundArc.enter().append(\"path\");\n      backgroundArc.attr(\"class\", function (d, i) {\n        return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n      }).attr(\"d\", function (d1) {\n        if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n          return \"M 0 0\";\n        }\n\n        var d = {\n          data: [{\n            value: config.gauge_max\n          }],\n          startAngle: config.gauge_startingAngle,\n          endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n          index: index++\n        };\n        return $$.getArc(d, true, true);\n      });\n      backgroundArc.exit().remove();\n      $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr(\"dy\", \".75em\").text(config.gauge_label_show ? config.gauge_units : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr(\"dx\", -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + \"px\").attr(\"dy\", \"1.2em\").text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr(\"dx\", $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + \"px\").attr(\"dy\", \"1.2em\").text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n    }\n  };\n\n  c3_chart_internal_fn.initGauge = function () {\n    var arcs = this.arcs;\n\n    if (this.hasType('gauge')) {\n      arcs.append('g').attr(\"class\", CLASS.chartArcsBackground);\n      arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeUnit).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n      arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeMin).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n      arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeMax).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n    }\n  };\n\n  c3_chart_internal_fn.getGaugeLabelHeight = function () {\n    return this.config.gauge_label_show ? 20 : 0;\n  };\n\n  c3_chart_internal_fn.hasCaches = function (ids) {\n    for (var i = 0; i < ids.length; i++) {\n      if (!(ids[i] in this.cache)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  c3_chart_internal_fn.addCache = function (id, target) {\n    this.cache[id] = this.cloneTarget(target);\n  };\n\n  c3_chart_internal_fn.getCaches = function (ids) {\n    var targets = [],\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] in this.cache) {\n        targets.push(this.cloneTarget(this.cache[ids[i]]));\n      }\n    }\n\n    return targets;\n  };\n\n  c3_chart_internal_fn.categoryName = function (i) {\n    var config = this.config;\n    return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n  };\n\n  c3_chart_internal_fn.generateClass = function (prefix, targetId) {\n    return \" \" + prefix + \" \" + prefix + this.getTargetSelectorSuffix(targetId);\n  };\n\n  c3_chart_internal_fn.classText = function (d) {\n    return this.generateClass(CLASS.text, d.index);\n  };\n\n  c3_chart_internal_fn.classTexts = function (d) {\n    return this.generateClass(CLASS.texts, d.id);\n  };\n\n  c3_chart_internal_fn.classShape = function (d) {\n    return this.generateClass(CLASS.shape, d.index);\n  };\n\n  c3_chart_internal_fn.classShapes = function (d) {\n    return this.generateClass(CLASS.shapes, d.id);\n  };\n\n  c3_chart_internal_fn.classLine = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n  };\n\n  c3_chart_internal_fn.classLines = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n  };\n\n  c3_chart_internal_fn.classCircle = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n  };\n\n  c3_chart_internal_fn.classCircles = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n  };\n\n  c3_chart_internal_fn.classBar = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n  };\n\n  c3_chart_internal_fn.classBars = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n  };\n\n  c3_chart_internal_fn.classArc = function (d) {\n    return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n  };\n\n  c3_chart_internal_fn.classArcs = function (d) {\n    return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n  };\n\n  c3_chart_internal_fn.classArea = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n  };\n\n  c3_chart_internal_fn.classAreas = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n  };\n\n  c3_chart_internal_fn.classRegion = function (d, i) {\n    return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n  };\n\n  c3_chart_internal_fn.classEvent = function (d) {\n    return this.generateClass(CLASS.eventRect, d.index);\n  };\n\n  c3_chart_internal_fn.classTarget = function (id) {\n    var $$ = this;\n    var additionalClassSuffix = $$.config.data_classes[id],\n        additionalClass = '';\n\n    if (additionalClassSuffix) {\n      additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n    }\n\n    return $$.generateClass(CLASS.target, id) + additionalClass;\n  };\n\n  c3_chart_internal_fn.classFocus = function (d) {\n    return this.classFocused(d) + this.classDefocused(d);\n  };\n\n  c3_chart_internal_fn.classFocused = function (d) {\n    return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n  };\n\n  c3_chart_internal_fn.classDefocused = function (d) {\n    return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n  };\n\n  c3_chart_internal_fn.classChartText = function (d) {\n    return CLASS.chartText + this.classTarget(d.id);\n  };\n\n  c3_chart_internal_fn.classChartLine = function (d) {\n    return CLASS.chartLine + this.classTarget(d.id);\n  };\n\n  c3_chart_internal_fn.classChartBar = function (d) {\n    return CLASS.chartBar + this.classTarget(d.id);\n  };\n\n  c3_chart_internal_fn.classChartArc = function (d) {\n    return CLASS.chartArc + this.classTarget(d.data.id);\n  };\n\n  c3_chart_internal_fn.getTargetSelectorSuffix = function (targetId) {\n    return targetId || targetId === 0 ? ('-' + targetId).replace(/[\\s?!@#$%^&*()_=+,.<>'\":;\\[\\]\\/|~`{}\\\\]/g, '-') : '';\n  };\n\n  c3_chart_internal_fn.selectorTarget = function (id, prefix) {\n    return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n  };\n\n  c3_chart_internal_fn.selectorTargets = function (ids, prefix) {\n    var $$ = this;\n    ids = ids || [];\n    return ids.length ? ids.map(function (id) {\n      return $$.selectorTarget(id, prefix);\n    }) : null;\n  };\n\n  c3_chart_internal_fn.selectorLegend = function (id) {\n    return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n  };\n\n  c3_chart_internal_fn.selectorLegends = function (ids) {\n    var $$ = this;\n    return ids && ids.length ? ids.map(function (id) {\n      return $$.selectorLegend(id);\n    }) : null;\n  };\n\n  c3_chart_internal_fn.getClipPath = function (id) {\n    var isIE9 = window.navigator.appVersion.toLowerCase().indexOf(\"msie 9.\") >= 0;\n    return \"url(\" + (isIE9 ? \"\" : document.URL.split('#')[0]) + \"#\" + id + \")\";\n  };\n\n  c3_chart_internal_fn.appendClip = function (parent, id) {\n    return parent.append(\"clipPath\").attr(\"id\", id).append(\"rect\");\n  };\n\n  c3_chart_internal_fn.getAxisClipX = function (forHorizontal) {\n    // axis line width + padding for left\n    var left = Math.max(30, this.margin.left);\n    return forHorizontal ? -(1 + left) : -(left - 1);\n  };\n\n  c3_chart_internal_fn.getAxisClipY = function (forHorizontal) {\n    return forHorizontal ? -20 : -this.margin.top;\n  };\n\n  c3_chart_internal_fn.getXAxisClipX = function () {\n    var $$ = this;\n    return $$.getAxisClipX(!$$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getXAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY(!$$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getYAxisClipX = function () {\n    var $$ = this;\n    return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getYAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY($$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getAxisClipWidth = function (forHorizontal) {\n    var $$ = this,\n        left = Math.max(30, $$.margin.left),\n        right = Math.max(30, $$.margin.right); // width + axis line width + padding for left/right\n\n    return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n  };\n\n  c3_chart_internal_fn.getAxisClipHeight = function (forHorizontal) {\n    // less than 20 is not enough to show the axis label 'outer' without legend\n    return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n  };\n\n  c3_chart_internal_fn.getXAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth(!$$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getXAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight(!$$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.getYAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n  };\n\n  c3_chart_internal_fn.getYAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight($$.config.axis_rotated);\n  };\n\n  c3_chart_internal_fn.generateColor = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        colors = config.data_colors,\n        pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.scale.category10().range(),\n        callback = config.data_color,\n        ids = [];\n    return function (d) {\n      var id = d.id || d.data && d.data.id || d,\n          color; // if callback function is provided\n\n      if (colors[id] instanceof Function) {\n        color = colors[id](d);\n      } // if specified, choose that color\n      else if (colors[id]) {\n          color = colors[id];\n        } // if not specified, choose from pattern\n        else {\n            if (ids.indexOf(id) < 0) {\n              ids.push(id);\n            }\n\n            color = pattern[ids.indexOf(id) % pattern.length];\n            colors[id] = color;\n          }\n\n      return callback instanceof Function ? callback(color, d) : color;\n    };\n  };\n\n  c3_chart_internal_fn.generateLevelColor = function () {\n    var $$ = this,\n        config = $$.config,\n        colors = config.color_pattern,\n        threshold = config.color_threshold,\n        asValue = threshold.unit === 'value',\n        values = threshold.values && threshold.values.length ? threshold.values : [],\n        max = threshold.max || 100;\n    return notEmpty(config.color_threshold) ? function (value) {\n      var i,\n          v,\n          color = colors[colors.length - 1];\n\n      for (i = 0; i < values.length; i++) {\n        v = asValue ? value : value * 100 / max;\n\n        if (v < values[i]) {\n          color = colors[i];\n          break;\n        }\n      }\n\n      return color;\n    } : null;\n  };\n\n  c3_chart_internal_fn.getDefaultConfig = function () {\n    var config = {\n      bindto: '#chart',\n      svg_classname: undefined,\n      size_width: undefined,\n      size_height: undefined,\n      padding_left: undefined,\n      padding_right: undefined,\n      padding_top: undefined,\n      padding_bottom: undefined,\n      resize_auto: true,\n      zoom_enabled: false,\n      zoom_extent: undefined,\n      zoom_privileged: false,\n      zoom_rescale: false,\n      zoom_onzoom: function zoom_onzoom() {},\n      zoom_onzoomstart: function zoom_onzoomstart() {},\n      zoom_onzoomend: function zoom_onzoomend() {},\n      zoom_x_min: undefined,\n      zoom_x_max: undefined,\n      interaction_brighten: true,\n      interaction_enabled: true,\n      onmouseover: function onmouseover() {},\n      onmouseout: function onmouseout() {},\n      onresize: function onresize() {},\n      onresized: function onresized() {},\n      oninit: function oninit() {},\n      onrendered: function onrendered() {},\n      transition_duration: 350,\n      data_x: undefined,\n      data_xs: {},\n      data_xFormat: '%Y-%m-%d',\n      data_xLocaltime: true,\n      data_xSort: true,\n      data_idConverter: function data_idConverter(id) {\n        return id;\n      },\n      data_names: {},\n      data_classes: {},\n      data_groups: [],\n      data_axes: {},\n      data_type: undefined,\n      data_types: {},\n      data_labels: {},\n      data_order: 'desc',\n      data_regions: {},\n      data_color: undefined,\n      data_colors: {},\n      data_hide: false,\n      data_filter: undefined,\n      data_selection_enabled: false,\n      data_selection_grouped: false,\n      data_selection_isselectable: function data_selection_isselectable() {\n        return true;\n      },\n      data_selection_multiple: true,\n      data_selection_draggable: false,\n      data_onclick: function data_onclick() {},\n      data_onmouseover: function data_onmouseover() {},\n      data_onmouseout: function data_onmouseout() {},\n      data_onselected: function data_onselected() {},\n      data_onunselected: function data_onunselected() {},\n      data_url: undefined,\n      data_headers: undefined,\n      data_json: undefined,\n      data_rows: undefined,\n      data_columns: undefined,\n      data_mimeType: undefined,\n      data_keys: undefined,\n      // configuration for no plot-able data supplied.\n      data_empty_label_text: \"\",\n      // subchart\n      subchart_show: false,\n      subchart_size_height: 60,\n      subchart_axis_x_show: true,\n      subchart_onbrush: function subchart_onbrush() {},\n      // color\n      color_pattern: [],\n      color_threshold: {},\n      // legend\n      legend_show: true,\n      legend_hide: false,\n      legend_position: 'bottom',\n      legend_inset_anchor: 'top-left',\n      legend_inset_x: 10,\n      legend_inset_y: 0,\n      legend_inset_step: undefined,\n      legend_item_onclick: undefined,\n      legend_item_onmouseover: undefined,\n      legend_item_onmouseout: undefined,\n      legend_equally: false,\n      legend_padding: 0,\n      legend_item_tile_width: 10,\n      legend_item_tile_height: 10,\n      // axis\n      axis_rotated: false,\n      axis_x_show: true,\n      axis_x_type: 'indexed',\n      axis_x_localtime: true,\n      axis_x_categories: [],\n      axis_x_tick_centered: false,\n      axis_x_tick_format: undefined,\n      axis_x_tick_culling: {},\n      axis_x_tick_culling_max: 10,\n      axis_x_tick_count: undefined,\n      axis_x_tick_fit: true,\n      axis_x_tick_values: null,\n      axis_x_tick_rotate: 0,\n      axis_x_tick_outer: true,\n      axis_x_tick_multiline: true,\n      axis_x_tick_multilineMax: 0,\n      axis_x_tick_width: null,\n      axis_x_max: undefined,\n      axis_x_min: undefined,\n      axis_x_padding: {},\n      axis_x_height: undefined,\n      axis_x_extent: undefined,\n      axis_x_label: {},\n      axis_x_inner: undefined,\n      axis_y_show: true,\n      axis_y_type: undefined,\n      axis_y_max: undefined,\n      axis_y_min: undefined,\n      axis_y_inverted: false,\n      axis_y_center: undefined,\n      axis_y_inner: undefined,\n      axis_y_label: {},\n      axis_y_tick_format: undefined,\n      axis_y_tick_outer: true,\n      axis_y_tick_values: null,\n      axis_y_tick_rotate: 0,\n      axis_y_tick_count: undefined,\n      axis_y_tick_time_value: undefined,\n      axis_y_tick_time_interval: undefined,\n      axis_y_padding: {},\n      axis_y_default: undefined,\n      axis_y2_show: false,\n      axis_y2_max: undefined,\n      axis_y2_min: undefined,\n      axis_y2_inverted: false,\n      axis_y2_center: undefined,\n      axis_y2_inner: undefined,\n      axis_y2_label: {},\n      axis_y2_tick_format: undefined,\n      axis_y2_tick_outer: true,\n      axis_y2_tick_values: null,\n      axis_y2_tick_count: undefined,\n      axis_y2_padding: {},\n      axis_y2_default: undefined,\n      // grid\n      grid_x_show: false,\n      grid_x_type: 'tick',\n      grid_x_lines: [],\n      grid_y_show: false,\n      // not used\n      // grid_y_type: 'tick',\n      grid_y_lines: [],\n      grid_y_ticks: 10,\n      grid_focus_show: true,\n      grid_lines_front: true,\n      // point - point of each data\n      point_show: true,\n      point_r: 2.5,\n      point_sensitivity: 10,\n      point_focus_expand_enabled: true,\n      point_focus_expand_r: undefined,\n      point_select_r: undefined,\n      // line\n      line_connectNull: false,\n      line_step_type: 'step',\n      // bar\n      bar_width: undefined,\n      bar_width_ratio: 0.6,\n      bar_width_max: undefined,\n      bar_zerobased: true,\n      bar_space: 0,\n      // area\n      area_zerobased: true,\n      area_above: false,\n      // pie\n      pie_label_show: true,\n      pie_label_format: undefined,\n      pie_label_threshold: 0.05,\n      pie_label_ratio: undefined,\n      pie_expand: {},\n      pie_expand_duration: 50,\n      // gauge\n      gauge_fullCircle: false,\n      gauge_label_show: true,\n      gauge_labelLine_show: true,\n      gauge_label_format: undefined,\n      gauge_min: 0,\n      gauge_max: 100,\n      gauge_startingAngle: -1 * Math.PI / 2,\n      gauge_label_extents: undefined,\n      gauge_units: undefined,\n      gauge_width: undefined,\n      gauge_arcs_minWidth: 5,\n      gauge_expand: {},\n      gauge_expand_duration: 50,\n      // donut\n      donut_label_show: true,\n      donut_label_format: undefined,\n      donut_label_threshold: 0.05,\n      donut_label_ratio: undefined,\n      donut_width: undefined,\n      donut_title: \"\",\n      donut_expand: {},\n      donut_expand_duration: 50,\n      // spline\n      spline_interpolation_type: 'cardinal',\n      // region - region to change style\n      regions: [],\n      // tooltip - show when mouseover on each data\n      tooltip_show: true,\n      tooltip_grouped: true,\n      tooltip_order: undefined,\n      tooltip_format_title: undefined,\n      tooltip_format_name: undefined,\n      tooltip_format_value: undefined,\n      tooltip_position: undefined,\n      tooltip_contents: function tooltip_contents(d, defaultTitleFormat, defaultValueFormat, color) {\n        return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n      },\n      tooltip_init_show: false,\n      tooltip_init_x: 0,\n      tooltip_init_position: {\n        top: '0px',\n        left: '50px'\n      },\n      tooltip_onshow: function tooltip_onshow() {},\n      tooltip_onhide: function tooltip_onhide() {},\n      // title\n      title_text: undefined,\n      title_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      title_position: 'top-center'\n    };\n    Object.keys(this.additionalConfig).forEach(function (key) {\n      config[key] = this.additionalConfig[key];\n    }, this);\n    return config;\n  };\n\n  c3_chart_internal_fn.additionalConfig = {};\n\n  c3_chart_internal_fn.loadConfig = function (config) {\n    var this_config = this.config,\n        target,\n        keys,\n        read;\n\n    function find() {\n      var key = keys.shift(); //        console.log(\"key =>\", key, \", target =>\", target);\n\n      if (key && target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && key in target) {\n        target = target[key];\n        return find();\n      } else if (!key) {\n        return target;\n      } else {\n        return undefined;\n      }\n    }\n\n    Object.keys(this_config).forEach(function (key) {\n      target = config;\n      keys = key.split('_');\n      read = find(); //        console.log(\"CONFIG : \", key, read);\n\n      if (isDefined(read)) {\n        this_config[key] = read;\n      }\n    });\n  };\n\n  c3_chart_internal_fn.convertUrlToData = function (url, mimeType, headers, keys, done) {\n    var $$ = this,\n        type = mimeType ? mimeType : 'csv';\n    var req = $$.d3.xhr(url);\n\n    if (headers) {\n      Object.keys(headers).forEach(function (header) {\n        req.header(header, headers[header]);\n      });\n    }\n\n    req.get(function (error, data) {\n      var d;\n      var dataResponse = data.response || data.responseText; // Fixes IE9 XHR issue; see #1345\n\n      if (!data) {\n        throw new Error(error.responseURL + ' ' + error.status + ' (' + error.statusText + ')');\n      }\n\n      if (type === 'json') {\n        d = $$.convertJsonToData(JSON.parse(dataResponse), keys);\n      } else if (type === 'tsv') {\n        d = $$.convertTsvToData(dataResponse);\n      } else {\n        d = $$.convertCsvToData(dataResponse);\n      }\n\n      done.call($$, d);\n    });\n  };\n\n  c3_chart_internal_fn.convertXsvToData = function (xsv, parser) {\n    var rows = parser.parseRows(xsv),\n        d;\n\n    if (rows.length === 1) {\n      d = [{}];\n      rows[0].forEach(function (id) {\n        d[0][id] = null;\n      });\n    } else {\n      d = parser.parse(xsv);\n    }\n\n    return d;\n  };\n\n  c3_chart_internal_fn.convertCsvToData = function (csv) {\n    return this.convertXsvToData(csv, this.d3.csv);\n  };\n\n  c3_chart_internal_fn.convertTsvToData = function (tsv) {\n    return this.convertXsvToData(tsv, this.d3.tsv);\n  };\n\n  c3_chart_internal_fn.convertJsonToData = function (json, keys) {\n    var $$ = this,\n        new_rows = [],\n        targetKeys,\n        data;\n\n    if (keys) {\n      // when keys specified, json would be an array that includes objects\n      if (keys.x) {\n        targetKeys = keys.value.concat(keys.x);\n        $$.config.data_x = keys.x;\n      } else {\n        targetKeys = keys.value;\n      }\n\n      new_rows.push(targetKeys);\n      json.forEach(function (o) {\n        var new_row = [];\n        targetKeys.forEach(function (key) {\n          // convert undefined to null because undefined data will be removed in convertDataToTargets()\n          var v = $$.findValueInJson(o, key);\n\n          if (isUndefined(v)) {\n            v = null;\n          }\n\n          new_row.push(v);\n        });\n        new_rows.push(new_row);\n      });\n      data = $$.convertRowsToData(new_rows);\n    } else {\n      Object.keys(json).forEach(function (key) {\n        new_rows.push([key].concat(json[key]));\n      });\n      data = $$.convertColumnsToData(new_rows);\n    }\n\n    return data;\n  };\n\n  c3_chart_internal_fn.findValueInJson = function (object, path) {\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n\n    path = path.replace(/^\\./, ''); // strip a leading dot\n\n    var pathArray = path.split('.');\n\n    for (var i = 0; i < pathArray.length; ++i) {\n      var k = pathArray[i];\n\n      if (k in object) {\n        object = object[k];\n      } else {\n        return;\n      }\n    }\n\n    return object;\n  };\n  /**\n   * Converts the rows to normalized data.\n   * @param {any[][]} rows The row data\n   * @return {Object[]}\n   */\n\n\n  c3_chart_internal_fn.convertRowsToData = function (rows) {\n    var newRows = [];\n    var keys = rows[0];\n\n    for (var i = 1; i < rows.length; i++) {\n      var newRow = {};\n\n      for (var j = 0; j < rows[i].length; j++) {\n        if (isUndefined(rows[i][j])) {\n          throw new Error(\"Source data is missing a component at (\" + i + \",\" + j + \")!\");\n        }\n\n        newRow[keys[j]] = rows[i][j];\n      }\n\n      newRows.push(newRow);\n    }\n\n    return newRows;\n  };\n  /**\n   * Converts the columns to normalized data.\n   * @param {any[][]} columns The column data\n   * @return {Object[]}\n   */\n\n\n  c3_chart_internal_fn.convertColumnsToData = function (columns) {\n    var newRows = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      var key = columns[i][0];\n\n      for (var j = 1; j < columns[i].length; j++) {\n        if (isUndefined(newRows[j - 1])) {\n          newRows[j - 1] = {};\n        }\n\n        if (isUndefined(columns[i][j])) {\n          throw new Error(\"Source data is missing a component at (\" + i + \",\" + j + \")!\");\n        }\n\n        newRows[j - 1][key] = columns[i][j];\n      }\n    }\n\n    return newRows;\n  };\n\n  c3_chart_internal_fn.convertDataToTargets = function (data, appendXs) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.d3.keys(data[0]).filter($$.isNotX, $$),\n        xs = $$.d3.keys(data[0]).filter($$.isX, $$),\n        targets; // save x for update data by load when custom x and c3.x API\n\n    ids.forEach(function (id) {\n      var xKey = $$.getXKey(id);\n\n      if ($$.isCustomX() || $$.isTimeSeries()) {\n        // if included in input data\n        if (xs.indexOf(xKey) >= 0) {\n          $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n            return d[xKey];\n          }).filter(isValue).map(function (rawX, i) {\n            return $$.generateTargetX(rawX, id, i);\n          }));\n        } // if not included in input data, find from preloaded data of other id's x\n        else if (config.data_x) {\n            $$.data.xs[id] = $$.getOtherTargetXs();\n          } // if not included in input data, find from preloaded data\n          else if (notEmpty(config.data_xs)) {\n              $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n            } // MEMO: if no x included, use same x of current will be used\n\n      } else {\n        $$.data.xs[id] = data.map(function (d, i) {\n          return i;\n        });\n      }\n    }); // check x is defined\n\n    ids.forEach(function (id) {\n      if (!$$.data.xs[id]) {\n        throw new Error('x is not defined for id = \"' + id + '\".');\n      }\n    }); // convert to target\n\n    targets = ids.map(function (id, index) {\n      var convertedId = config.data_idConverter(id);\n      return {\n        id: convertedId,\n        id_org: id,\n        values: data.map(function (d, i) {\n          var xKey = $$.getXKey(id),\n              rawX = d[xKey],\n              value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n              x; // use x as categories if custom x and categorized\n\n          if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n            if (index === 0 && i === 0) {\n              config.axis_x_categories = [];\n            }\n\n            x = config.axis_x_categories.indexOf(rawX);\n\n            if (x === -1) {\n              x = config.axis_x_categories.length;\n              config.axis_x_categories.push(rawX);\n            }\n          } else {\n            x = $$.generateTargetX(rawX, id, i);\n          } // mark as x = undefined if value is undefined and filter to remove after mapped\n\n\n          if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n            x = undefined;\n          }\n\n          return {\n            x: x,\n            value: value,\n            id: convertedId\n          };\n        }).filter(function (v) {\n          return isDefined(v.x);\n        })\n      };\n    }); // finish targets\n\n    targets.forEach(function (t) {\n      var i; // sort values by its x\n\n      if (config.data_xSort) {\n        t.values = t.values.sort(function (v1, v2) {\n          var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n              x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n          return x1 - x2;\n        });\n      } // indexing each value\n\n\n      i = 0;\n      t.values.forEach(function (v) {\n        v.index = i++;\n      }); // this needs to be sorted because its index and value.index is identical\n\n      $$.data.xs[t.id].sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    }); // cache information about values\n\n    $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n    $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets); // set target types\n\n    if (config.data_type) {\n      $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n        return !(id in config.data_types);\n      }), config.data_type);\n    } // cache as original id keyed\n\n\n    targets.forEach(function (d) {\n      $$.addCache(d.id_org, d);\n    });\n    return targets;\n  };\n\n  c3_chart_internal_fn.isX = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n  };\n\n  c3_chart_internal_fn.isNotX = function (key) {\n    return !this.isX(key);\n  };\n\n  c3_chart_internal_fn.getXKey = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n  };\n\n  c3_chart_internal_fn.getXValuesOfXKey = function (key, targets) {\n    var $$ = this,\n        xValues,\n        ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n    ids.forEach(function (id) {\n      if ($$.getXKey(id) === key) {\n        xValues = $$.data.xs[id];\n      }\n    });\n    return xValues;\n  };\n\n  c3_chart_internal_fn.getIndexByX = function (x) {\n    var $$ = this,\n        data = $$.filterByX($$.data.targets, x);\n    return data.length ? data[0].index : null;\n  };\n\n  c3_chart_internal_fn.getXValue = function (id, i) {\n    var $$ = this;\n    return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n  };\n\n  c3_chart_internal_fn.getOtherTargetXs = function () {\n    var $$ = this,\n        idsForX = Object.keys($$.data.xs);\n    return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n  };\n\n  c3_chart_internal_fn.getOtherTargetX = function (index) {\n    var xs = this.getOtherTargetXs();\n    return xs && index < xs.length ? xs[index] : null;\n  };\n\n  c3_chart_internal_fn.addXs = function (xs) {\n    var $$ = this;\n    Object.keys(xs).forEach(function (id) {\n      $$.config.data_xs[id] = xs[id];\n    });\n  };\n\n  c3_chart_internal_fn.hasMultipleX = function (xs) {\n    return this.d3.set(Object.keys(xs).map(function (id) {\n      return xs[id];\n    })).size() > 1;\n  };\n\n  c3_chart_internal_fn.isMultipleX = function () {\n    return notEmpty(this.config.data_xs) || !this.config.data_xSort || this.hasType('scatter');\n  };\n\n  c3_chart_internal_fn.addName = function (data) {\n    var $$ = this,\n        name;\n\n    if (data) {\n      name = $$.config.data_names[data.id];\n      data.name = name !== undefined ? name : data.id;\n    }\n\n    return data;\n  };\n\n  c3_chart_internal_fn.getValueOnIndex = function (values, index) {\n    var valueOnIndex = values.filter(function (v) {\n      return v.index === index;\n    });\n    return valueOnIndex.length ? valueOnIndex[0] : null;\n  };\n\n  c3_chart_internal_fn.updateTargetX = function (targets, x) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      t.values.forEach(function (v, i) {\n        v.x = $$.generateTargetX(x[i], t.id, i);\n      });\n      $$.data.xs[t.id] = x;\n    });\n  };\n\n  c3_chart_internal_fn.updateTargetXs = function (targets, xs) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      if (xs[t.id]) {\n        $$.updateTargetX([t], xs[t.id]);\n      }\n    });\n  };\n\n  c3_chart_internal_fn.generateTargetX = function (rawX, id, index) {\n    var $$ = this,\n        x;\n\n    if ($$.isTimeSeries()) {\n      x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n    } else if ($$.isCustomX() && !$$.isCategorized()) {\n      x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n    } else {\n      x = index;\n    }\n\n    return x;\n  };\n\n  c3_chart_internal_fn.cloneTarget = function (target) {\n    return {\n      id: target.id,\n      id_org: target.id_org,\n      values: target.values.map(function (d) {\n        return {\n          x: d.x,\n          value: d.value,\n          id: d.id\n        };\n      })\n    };\n  };\n\n  c3_chart_internal_fn.updateXs = function () {\n    var $$ = this;\n\n    if ($$.data.targets.length) {\n      $$.xs = [];\n      $$.data.targets[0].values.forEach(function (v) {\n        $$.xs[v.index] = v.x;\n      });\n    }\n  };\n\n  c3_chart_internal_fn.getPrevX = function (i) {\n    var x = this.xs[i - 1];\n    return typeof x !== 'undefined' ? x : null;\n  };\n\n  c3_chart_internal_fn.getNextX = function (i) {\n    var x = this.xs[i + 1];\n    return typeof x !== 'undefined' ? x : null;\n  };\n\n  c3_chart_internal_fn.getMaxDataCount = function () {\n    var $$ = this;\n    return $$.d3.max($$.data.targets, function (t) {\n      return t.values.length;\n    });\n  };\n\n  c3_chart_internal_fn.getMaxDataCountTarget = function (targets) {\n    var length = targets.length,\n        max = 0,\n        maxTarget;\n\n    if (length > 1) {\n      targets.forEach(function (t) {\n        if (t.values.length > max) {\n          maxTarget = t;\n          max = t.values.length;\n        }\n      });\n    } else {\n      maxTarget = length ? targets[0] : null;\n    }\n\n    return maxTarget;\n  };\n\n  c3_chart_internal_fn.getEdgeX = function (targets) {\n    var $$ = this;\n    return !targets.length ? [0, 0] : [$$.d3.min(targets, function (t) {\n      return t.values[0].x;\n    }), $$.d3.max(targets, function (t) {\n      return t.values[t.values.length - 1].x;\n    })];\n  };\n\n  c3_chart_internal_fn.mapToIds = function (targets) {\n    return targets.map(function (d) {\n      return d.id;\n    });\n  };\n\n  c3_chart_internal_fn.mapToTargetIds = function (ids) {\n    var $$ = this;\n    return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n  };\n\n  c3_chart_internal_fn.hasTarget = function (targets, id) {\n    var ids = this.mapToIds(targets),\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] === id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  c3_chart_internal_fn.isTargetToShow = function (targetId) {\n    return this.hiddenTargetIds.indexOf(targetId) < 0;\n  };\n\n  c3_chart_internal_fn.isLegendToShow = function (targetId) {\n    return this.hiddenLegendIds.indexOf(targetId) < 0;\n  };\n\n  c3_chart_internal_fn.filterTargetsToShow = function (targets) {\n    var $$ = this;\n    return targets.filter(function (t) {\n      return $$.isTargetToShow(t.id);\n    });\n  };\n\n  c3_chart_internal_fn.mapTargetsToUniqueXs = function (targets) {\n    var $$ = this;\n    var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n      return t.values.map(function (v) {\n        return +v.x;\n      });\n    }))).values();\n    xs = $$.isTimeSeries() ? xs.map(function (x) {\n      return new Date(+x);\n    }) : xs.map(function (x) {\n      return +x;\n    });\n    return xs.sort(function (a, b) {\n      return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    });\n  };\n\n  c3_chart_internal_fn.addHiddenTargetIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n      }\n    }\n  };\n\n  c3_chart_internal_fn.removeHiddenTargetIds = function (targetIds) {\n    this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  c3_chart_internal_fn.addHiddenLegendIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n      }\n    }\n  };\n\n  c3_chart_internal_fn.removeHiddenLegendIds = function (targetIds) {\n    this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  c3_chart_internal_fn.getValuesAsIdKeyed = function (targets) {\n    var ys = {};\n    targets.forEach(function (t) {\n      ys[t.id] = [];\n      t.values.forEach(function (v) {\n        ys[t.id].push(v.value);\n      });\n    });\n    return ys;\n  };\n\n  c3_chart_internal_fn.checkValueInTargets = function (targets, checker) {\n    var ids = Object.keys(targets),\n        i,\n        j,\n        values;\n\n    for (i = 0; i < ids.length; i++) {\n      values = targets[ids[i]].values;\n\n      for (j = 0; j < values.length; j++) {\n        if (checker(values[j].value)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  c3_chart_internal_fn.hasNegativeValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v < 0;\n    });\n  };\n\n  c3_chart_internal_fn.hasPositiveValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v > 0;\n    });\n  };\n\n  c3_chart_internal_fn.isOrderDesc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n  };\n\n  c3_chart_internal_fn.isOrderAsc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n  };\n\n  c3_chart_internal_fn.getOrderFunction = function () {\n    var $$ = this,\n        config = $$.config,\n        orderAsc = $$.isOrderAsc(),\n        orderDesc = $$.isOrderDesc();\n\n    if (orderAsc || orderDesc) {\n      return function (t1, t2) {\n        var reducer = function reducer(p, c) {\n          return p + Math.abs(c.value);\n        };\n\n        var t1Sum = t1.values.reduce(reducer, 0),\n            t2Sum = t2.values.reduce(reducer, 0);\n        return orderDesc ? t2Sum - t1Sum : t1Sum - t2Sum;\n      };\n    } else if (isFunction(config.data_order)) {\n      return config.data_order;\n    } else if (isArray(config.data_order)) {\n      var order = config.data_order;\n      return function (t1, t2) {\n        return order.indexOf(t1.id) - order.indexOf(t2.id);\n      };\n    }\n  };\n\n  c3_chart_internal_fn.orderTargets = function (targets) {\n    var fct = this.getOrderFunction();\n\n    if (fct) {\n      targets.sort(fct);\n\n      if (this.isOrderAsc() || this.isOrderDesc()) {\n        targets.reverse();\n      }\n    }\n\n    return targets;\n  };\n\n  c3_chart_internal_fn.filterByX = function (targets, x) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values;\n    })).filter(function (v) {\n      return v.x - x === 0;\n    });\n  };\n\n  c3_chart_internal_fn.filterRemoveNull = function (data) {\n    return data.filter(function (d) {\n      return isValue(d.value);\n    });\n  };\n\n  c3_chart_internal_fn.filterByXDomain = function (targets, xDomain) {\n    return targets.map(function (t) {\n      return {\n        id: t.id,\n        id_org: t.id_org,\n        values: t.values.filter(function (v) {\n          return xDomain[0] <= v.x && v.x <= xDomain[1];\n        })\n      };\n    });\n  };\n\n  c3_chart_internal_fn.hasDataLabel = function () {\n    var config = this.config;\n\n    if (typeof config.data_labels === 'boolean' && config.data_labels) {\n      return true;\n    } else if (_typeof(config.data_labels) === 'object' && notEmpty(config.data_labels)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  c3_chart_internal_fn.getDataLabelLength = function (min, max, key) {\n    var $$ = this,\n        lengths = [0, 0],\n        paddingCoef = 1.3;\n    $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n      return $$.dataLabelFormat(d.id)(d);\n    }).each(function (d, i) {\n      lengths[i] = this.getBoundingClientRect()[key] * paddingCoef;\n    }).remove();\n    return lengths;\n  };\n\n  c3_chart_internal_fn.isNoneArc = function (d) {\n    return this.hasTarget(this.data.targets, d.id);\n  }, c3_chart_internal_fn.isArc = function (d) {\n    return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n  };\n\n  c3_chart_internal_fn.findSameXOfValues = function (values, index) {\n    var i,\n        targetX = values[index].x,\n        sames = [];\n\n    for (i = index - 1; i >= 0; i--) {\n      if (targetX !== values[i].x) {\n        break;\n      }\n\n      sames.push(values[i]);\n    }\n\n    for (i = index; i < values.length; i++) {\n      if (targetX !== values[i].x) {\n        break;\n      }\n\n      sames.push(values[i]);\n    }\n\n    return sames;\n  };\n\n  c3_chart_internal_fn.findClosestFromTargets = function (targets, pos) {\n    var $$ = this,\n        candidates; // map to array of closest points of each target\n\n    candidates = targets.map(function (target) {\n      return $$.findClosest(target.values, pos);\n    }); // decide closest point and return\n\n    return $$.findClosest(candidates, pos);\n  };\n\n  c3_chart_internal_fn.findClosest = function (values, pos) {\n    var $$ = this,\n        minDist = $$.config.point_sensitivity,\n        closest; // find mouseovering bar\n\n    values.filter(function (v) {\n      return v && $$.isBarType(v.id);\n    }).forEach(function (v) {\n      var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n\n      if (!closest && $$.isWithinBar(shape)) {\n        closest = v;\n      }\n    }); // find closest point from non-bar\n\n    values.filter(function (v) {\n      return v && !$$.isBarType(v.id);\n    }).forEach(function (v) {\n      var d = $$.dist(v, pos);\n\n      if (d < minDist) {\n        minDist = d;\n        closest = v;\n      }\n    });\n    return closest;\n  };\n\n  c3_chart_internal_fn.dist = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        yIndex = config.axis_rotated ? 0 : 1,\n        y = $$.circleY(data, data.index),\n        x = $$.x(data.x);\n    return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n  };\n\n  c3_chart_internal_fn.convertValuesToStep = function (values) {\n    var converted = [].concat(values),\n        i;\n\n    if (!this.isCategorized()) {\n      return values;\n    }\n\n    for (i = values.length + 1; 0 < i; i--) {\n      converted[i] = converted[i - 1];\n    }\n\n    converted[0] = {\n      x: converted[0].x - 1,\n      value: converted[0].value,\n      id: converted[0].id\n    };\n    converted[values.length + 1] = {\n      x: converted[values.length].x + 1,\n      value: converted[values.length].value,\n      id: converted[values.length].id\n    };\n    return converted;\n  };\n\n  c3_chart_internal_fn.updateDataAttributes = function (name, attrs) {\n    var $$ = this,\n        config = $$.config,\n        current = config['data_' + name];\n\n    if (typeof attrs === 'undefined') {\n      return current;\n    }\n\n    Object.keys(attrs).forEach(function (id) {\n      current[id] = attrs[id];\n    });\n    $$.redraw({\n      withLegend: true\n    });\n    return current;\n  };\n\n  c3_chart_internal_fn.load = function (targets, args) {\n    var $$ = this;\n\n    if (targets) {\n      // filter loading targets if needed\n      if (args.filter) {\n        targets = targets.filter(args.filter);\n      } // set type if args.types || args.type specified\n\n\n      if (args.type || args.types) {\n        targets.forEach(function (t) {\n          var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n          $$.setTargetType(t.id, type);\n        });\n      } // Update/Add data\n\n\n      $$.data.targets.forEach(function (d) {\n        for (var i = 0; i < targets.length; i++) {\n          if (d.id === targets[i].id) {\n            d.values = targets[i].values;\n            targets.splice(i, 1);\n            break;\n          }\n        }\n      });\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n\n    if (args.done) {\n      args.done();\n    }\n  };\n\n  c3_chart_internal_fn.loadFromArgs = function (args) {\n    var $$ = this;\n\n    if (args.data) {\n      $$.load($$.convertDataToTargets(args.data), args);\n    } else if (args.url) {\n      $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n        $$.load($$.convertDataToTargets(data), args);\n      });\n    } else if (args.json) {\n      $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n    } else if (args.rows) {\n      $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n    } else if (args.columns) {\n      $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n    } else {\n      $$.load(null, args);\n    }\n  };\n\n  c3_chart_internal_fn.unload = function (targetIds, done) {\n    var $$ = this;\n\n    if (!done) {\n      done = function done() {};\n    } // filter existing target\n\n\n    targetIds = targetIds.filter(function (id) {\n      return $$.hasTarget($$.data.targets, id);\n    }); // If no target, call done and return\n\n    if (!targetIds || targetIds.length === 0) {\n      done();\n      return;\n    }\n\n    $$.svg.selectAll(targetIds.map(function (id) {\n      return $$.selectorTarget(id);\n    })).transition().style('opacity', 0).remove().call($$.endall, done);\n    targetIds.forEach(function (id) {\n      // Reset fadein for future load\n      $$.withoutFadeIn[id] = false; // Remove target's elements\n\n      if ($$.legend) {\n        $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n      } // Remove target\n\n\n      $$.data.targets = $$.data.targets.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  };\n\n  c3_chart_internal_fn.getYDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasNegativeValue;\n\n    if (config.data_groups.length > 0) {\n      hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider negative values\n\n        if (hasNegativeValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v < 0 ? v : 0;\n          });\n        } // Compute min\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.min(Object.keys(ys).map(function (key) {\n      return $$.d3.min(ys[key]);\n    }));\n  };\n\n  c3_chart_internal_fn.getYDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasPositiveValue;\n\n    if (config.data_groups.length > 0) {\n      hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider positive values\n\n        if (hasPositiveValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v > 0 ? v : 0;\n          });\n        } // Compute max\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.max(Object.keys(ys).map(function (key) {\n      return $$.d3.max(ys[key]);\n    }));\n  };\n\n  c3_chart_internal_fn.getYDomain = function (targets, axisId, xDomain) {\n    var $$ = this,\n        config = $$.config,\n        targetsByAxisId = targets.filter(function (t) {\n      return $$.axis.getId(t.id) === axisId;\n    }),\n        yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n        yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n        yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n        yDomainMin = $$.getYDomainMin(yTargets),\n        yDomainMax = $$.getYDomainMax(yTargets),\n        domain,\n        domainLength,\n        padding,\n        padding_top,\n        padding_bottom,\n        center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n        yDomainAbs,\n        lengths,\n        diff,\n        ratio,\n        isAllPositive,\n        isAllNegative,\n        isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n        isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n        showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n        showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated; // MEMO: avoid inverting domain unexpectedly\n\n    yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n    yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n\n    if (yTargets.length === 0) {\n      // use current domain if target of axisId is none\n      return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n    }\n\n    if (isNaN(yDomainMin)) {\n      // set minimum to zero when not number\n      yDomainMin = 0;\n    }\n\n    if (isNaN(yDomainMax)) {\n      // set maximum to have same value as yDomainMin\n      yDomainMax = yDomainMin;\n    }\n\n    if (yDomainMin === yDomainMax) {\n      yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n    }\n\n    isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n    isAllNegative = yDomainMin <= 0 && yDomainMax <= 0; // Cancel zerobased if axis_*_min / axis_*_max specified\n\n    if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n      isZeroBased = false;\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        yDomainMin = 0;\n      }\n\n      if (isAllNegative) {\n        yDomainMax = 0;\n      }\n    }\n\n    domainLength = Math.abs(yDomainMax - yDomainMin);\n    padding = padding_top = padding_bottom = domainLength * 0.1;\n\n    if (typeof center !== 'undefined') {\n      yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n      yDomainMax = center + yDomainAbs;\n      yDomainMin = center - yDomainAbs;\n    } // add padding for data label\n\n\n    if (showHorizontalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n      diff = diffDomain($$.y.range());\n      ratio = [lengths[0] / diff, lengths[1] / diff];\n      padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n      padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n    } else if (showVerticalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n      padding_top += $$.axis.convertPixelsToAxisPadding(lengths[1], domainLength);\n      padding_bottom += $$.axis.convertPixelsToAxisPadding(lengths[0], domainLength);\n    }\n\n    if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n    }\n\n    if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        padding_bottom = yDomainMin;\n      }\n\n      if (isAllNegative) {\n        padding_top = -yDomainMax;\n      }\n    }\n\n    domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n    return isInverted ? domain.reverse() : domain;\n  };\n\n  c3_chart_internal_fn.getXDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n      return $$.d3.min(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  c3_chart_internal_fn.getXDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n      return $$.d3.max(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  c3_chart_internal_fn.getXDomainPadding = function (domain) {\n    var $$ = this,\n        config = $$.config,\n        diff = domain[1] - domain[0],\n        maxDataCount,\n        padding,\n        paddingLeft,\n        paddingRight;\n\n    if ($$.isCategorized()) {\n      padding = 0;\n    } else if ($$.hasType('bar')) {\n      maxDataCount = $$.getMaxDataCount();\n      padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n    } else {\n      padding = diff * 0.01;\n    }\n\n    if (_typeof(config.axis_x_padding) === 'object' && notEmpty(config.axis_x_padding)) {\n      paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n      paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n    } else if (typeof config.axis_x_padding === 'number') {\n      paddingLeft = paddingRight = config.axis_x_padding;\n    } else {\n      paddingLeft = paddingRight = padding;\n    }\n\n    return {\n      left: paddingLeft,\n      right: paddingRight\n    };\n  };\n\n  c3_chart_internal_fn.getXDomain = function (targets) {\n    var $$ = this,\n        xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n        firstX = xDomain[0],\n        lastX = xDomain[1],\n        padding = $$.getXDomainPadding(xDomain),\n        min = 0,\n        max = 0; // show center of x domain if min and max are the same\n\n    if (firstX - lastX === 0 && !$$.isCategorized()) {\n      if ($$.isTimeSeries()) {\n        firstX = new Date(firstX.getTime() * 0.5);\n        lastX = new Date(lastX.getTime() * 1.5);\n      } else {\n        firstX = firstX === 0 ? 1 : firstX * 0.5;\n        lastX = lastX === 0 ? -1 : lastX * 1.5;\n      }\n    }\n\n    if (firstX || firstX === 0) {\n      min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n    }\n\n    if (lastX || lastX === 0) {\n      max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n    }\n\n    return [min, max];\n  };\n\n  c3_chart_internal_fn.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n    var $$ = this,\n        config = $$.config;\n\n    if (withUpdateOrgXDomain) {\n      $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n      $$.orgXDomain = $$.x.domain();\n\n      if (config.zoom_enabled) {\n        $$.zoom.scale($$.x).updateScaleExtent();\n      }\n\n      $$.subX.domain($$.x.domain());\n\n      if ($$.brush) {\n        $$.brush.scale($$.subX);\n      }\n    }\n\n    if (withUpdateXDomain) {\n      $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.extent());\n\n      if (config.zoom_enabled) {\n        $$.zoom.scale($$.x).updateScaleExtent();\n      }\n    } // Trim domain when too big by zoom mousemove event\n\n\n    if (withTrim) {\n      $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n    }\n\n    return $$.x.domain();\n  };\n\n  c3_chart_internal_fn.trimXDomain = function (domain) {\n    var zoomDomain = this.getZoomDomain(),\n        min = zoomDomain[0],\n        max = zoomDomain[1];\n\n    if (domain[0] <= min) {\n      domain[1] = +domain[1] + (min - domain[0]);\n      domain[0] = min;\n    }\n\n    if (max <= domain[1]) {\n      domain[0] = +domain[0] - (domain[1] - max);\n      domain[1] = max;\n    }\n\n    return domain;\n  };\n\n  c3_chart_internal_fn.drag = function (mouse) {\n    var $$ = this,\n        config = $$.config,\n        main = $$.main,\n        d3 = $$.d3;\n    var sx, sy, mx, my, minX, maxX, minY, maxY;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    if (config.zoom_enabled && !$$.zoom.altDomain) {\n      return;\n    } // skip if zoomable because of conflict drag dehavior\n\n\n    if (!config.data_selection_multiple) {\n      return;\n    } // skip when single selection because drag is used for multiple selection\n\n\n    sx = $$.dragStart[0];\n    sy = $$.dragStart[1];\n    mx = mouse[0];\n    my = mouse[1];\n    minX = Math.min(sx, mx);\n    maxX = Math.max(sx, mx);\n    minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n    maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n    main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY); // TODO: binary search when multiple xs\n\n    main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).filter(function (d) {\n      return config.data_selection_isselectable(d);\n    }).each(function (d, i) {\n      var shape = d3.select(this),\n          isSelected = shape.classed(CLASS.SELECTED),\n          isIncluded = shape.classed(CLASS.INCLUDED),\n          _x,\n          _y,\n          _w,\n          _h,\n          toggle,\n          isWithin = false,\n          box;\n\n      if (shape.classed(CLASS.circle)) {\n        _x = shape.attr(\"cx\") * 1;\n        _y = shape.attr(\"cy\") * 1;\n        toggle = $$.togglePoint;\n        isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n      } else if (shape.classed(CLASS.bar)) {\n        box = getPathBox(this);\n        _x = box.x;\n        _y = box.y;\n        _w = box.width;\n        _h = box.height;\n        toggle = $$.togglePath;\n        isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n      } else {\n        // line/area selection not supported yet\n        return;\n      }\n\n      if (isWithin ^ isIncluded) {\n        shape.classed(CLASS.INCLUDED, !isIncluded); // TODO: included/unincluded callback here\n\n        shape.classed(CLASS.SELECTED, !isSelected);\n        toggle.call($$, !isSelected, shape, d, i);\n      }\n    });\n  };\n\n  c3_chart_internal_fn.dragstart = function (mouse) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.dragStart = mouse;\n    $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n    $$.dragging = true;\n  };\n\n  c3_chart_internal_fn.dragend = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n    $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n    $$.dragging = false;\n  };\n\n  c3_chart_internal_fn.getYFormat = function (forArc) {\n    var $$ = this,\n        formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n        formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n    return function (v, ratio, id) {\n      var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n      return format.call($$, v, ratio);\n    };\n  };\n\n  c3_chart_internal_fn.yFormat = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  c3_chart_internal_fn.y2Format = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  c3_chart_internal_fn.defaultValueFormat = function (v) {\n    return isValue(v) ? +v : \"\";\n  };\n\n  c3_chart_internal_fn.defaultArcValueFormat = function (v, ratio) {\n    return (ratio * 100).toFixed(1) + '%';\n  };\n\n  c3_chart_internal_fn.dataLabelFormat = function (targetId) {\n    var $$ = this,\n        data_labels = $$.config.data_labels,\n        format,\n        defaultFormat = function defaultFormat(v) {\n      return isValue(v) ? +v : \"\";\n    }; // find format according to axis id\n\n\n    if (typeof data_labels.format === 'function') {\n      format = data_labels.format;\n    } else if (_typeof(data_labels.format) === 'object') {\n      if (data_labels.format[targetId]) {\n        format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n      } else {\n        format = function format() {\n          return '';\n        };\n      }\n    } else {\n      format = defaultFormat;\n    }\n\n    return format;\n  };\n\n  c3_chart_internal_fn.initGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    $$.grid = $$.main.append('g').attr(\"clip-path\", $$.clipPathForGrid).attr('class', CLASS.grid);\n\n    if (config.grid_x_show) {\n      $$.grid.append(\"g\").attr(\"class\", CLASS.xgrids);\n    }\n\n    if (config.grid_y_show) {\n      $$.grid.append('g').attr('class', CLASS.ygrids);\n    }\n\n    if (config.grid_focus_show) {\n      $$.grid.append('g').attr(\"class\", CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n    }\n\n    $$.xgrid = d3.selectAll([]);\n\n    if (!config.grid_lines_front) {\n      $$.initGridLines();\n    }\n  };\n\n  c3_chart_internal_fn.initGridLines = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.gridLines = $$.main.append('g').attr(\"clip-path\", $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n    $$.gridLines.append('g').attr(\"class\", CLASS.xgridLines);\n    $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n    $$.xgridLines = d3.selectAll([]);\n  };\n\n  c3_chart_internal_fn.updateXGrid = function (withoutUpdate) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n        tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n    $$.xgridAttr = config.axis_rotated ? {\n      'x1': 0,\n      'x2': $$.width,\n      'y1': function y1(d) {\n        return $$.x(d) - tickOffset;\n      },\n      'y2': function y2(d) {\n        return $$.x(d) - tickOffset;\n      }\n    } : {\n      'x1': function x1(d) {\n        return $$.x(d) + tickOffset;\n      },\n      'x2': function x2(d) {\n        return $$.x(d) + tickOffset;\n      },\n      'y1': 0,\n      'y2': $$.height\n    };\n    $$.xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n    $$.xgrid.enter().append('line').attr(\"class\", CLASS.xgrid);\n\n    if (!withoutUpdate) {\n      $$.xgrid.attr($$.xgridAttr).style(\"opacity\", function () {\n        return +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1') === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n      });\n    }\n\n    $$.xgrid.exit().remove();\n  };\n\n  c3_chart_internal_fn.updateYGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n    $$.ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n    $$.ygrid.enter().append('line').attr('class', CLASS.ygrid);\n    $$.ygrid.attr(\"x1\", config.axis_rotated ? $$.y : 0).attr(\"x2\", config.axis_rotated ? $$.y : $$.width).attr(\"y1\", config.axis_rotated ? 0 : $$.y).attr(\"y2\", config.axis_rotated ? $$.height : $$.y);\n    $$.ygrid.exit().remove();\n    $$.smoothLines($$.ygrid, 'grid');\n  };\n\n  c3_chart_internal_fn.gridTextAnchor = function (d) {\n    return d.position ? d.position : \"end\";\n  };\n\n  c3_chart_internal_fn.gridTextDx = function (d) {\n    return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n  };\n\n  c3_chart_internal_fn.xGridTextX = function (d) {\n    return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n  };\n\n  c3_chart_internal_fn.yGridTextX = function (d) {\n    return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n  };\n\n  c3_chart_internal_fn.updateGrid = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        xgridLine,\n        ygridLine,\n        yv; // hide if arc type\n\n    $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    main.select('line.' + CLASS.xgridFocus).style(\"visibility\", \"hidden\");\n\n    if (config.grid_x_show) {\n      $$.updateXGrid();\n    }\n\n    $$.xgridLines = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines); // enter\n\n    xgridLine = $$.xgridLines.enter().append('g').attr(\"class\", function (d) {\n      return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    xgridLine.append('line').style(\"opacity\", 0);\n    xgridLine.append('text').attr(\"text-anchor\", $$.gridTextAnchor).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").attr('dx', $$.gridTextDx).attr('dy', -5).style(\"opacity\", 0); // udpate\n    // done in d3.transition() of the end of this function\n    // exit\n\n    $$.xgridLines.exit().transition().duration(duration).style(\"opacity\", 0).remove(); // Y-Grid\n\n    if (config.grid_y_show) {\n      $$.updateYGrid();\n    }\n\n    $$.ygridLines = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines); // enter\n\n    ygridLine = $$.ygridLines.enter().append('g').attr(\"class\", function (d) {\n      return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    ygridLine.append('line').style(\"opacity\", 0);\n    ygridLine.append('text').attr(\"text-anchor\", $$.gridTextAnchor).attr(\"transform\", config.axis_rotated ? \"rotate(-90)\" : \"\").attr('dx', $$.gridTextDx).attr('dy', -5).style(\"opacity\", 0); // update\n\n    yv = $$.yv.bind($$);\n    $$.ygridLines.select('line').transition().duration(duration).attr(\"x1\", config.axis_rotated ? yv : 0).attr(\"x2\", config.axis_rotated ? yv : $$.width).attr(\"y1\", config.axis_rotated ? 0 : yv).attr(\"y2\", config.axis_rotated ? $$.height : yv).style(\"opacity\", 1);\n    $$.ygridLines.select('text').transition().duration(duration).attr(\"x\", config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr(\"y\", yv).text(function (d) {\n      return d.text;\n    }).style(\"opacity\", 1); // exit\n\n    $$.ygridLines.exit().transition().duration(duration).style(\"opacity\", 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawGrid = function (withTransition) {\n    var $$ = this,\n        config = $$.config,\n        xv = $$.xv.bind($$),\n        lines = $$.xgridLines.select('line'),\n        texts = $$.xgridLines.select('text');\n    return [(withTransition ? lines.transition() : lines).attr(\"x1\", config.axis_rotated ? 0 : xv).attr(\"x2\", config.axis_rotated ? $$.width : xv).attr(\"y1\", config.axis_rotated ? xv : 0).attr(\"y2\", config.axis_rotated ? xv : $$.height).style(\"opacity\", 1), (withTransition ? texts.transition() : texts).attr(\"x\", config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr(\"y\", xv).text(function (d) {\n      return d.text;\n    }).style(\"opacity\", 1)];\n  };\n\n  c3_chart_internal_fn.showXGridFocus = function (selectedData) {\n    var $$ = this,\n        config = $$.config,\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n        xx = $$.xx.bind($$);\n\n    if (!config.tooltip_show) {\n      return;\n    } // Hide when scatter plot exists\n\n\n    if ($$.hasType('scatter') || $$.hasArcType()) {\n      return;\n    }\n\n    focusEl.style(\"visibility\", \"visible\").data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n    $$.smoothLines(focusEl, 'grid');\n  };\n\n  c3_chart_internal_fn.hideXGridFocus = function () {\n    this.main.select('line.' + CLASS.xgridFocus).style(\"visibility\", \"hidden\");\n  };\n\n  c3_chart_internal_fn.updateXgridFocus = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('line.' + CLASS.xgridFocus).attr(\"x1\", config.axis_rotated ? 0 : -10).attr(\"x2\", config.axis_rotated ? $$.width : -10).attr(\"y1\", config.axis_rotated ? -10 : 0).attr(\"y2\", config.axis_rotated ? -10 : $$.height);\n  };\n\n  c3_chart_internal_fn.generateGridData = function (type, scale) {\n    var $$ = this,\n        gridData = [],\n        xDomain,\n        firstYear,\n        lastYear,\n        i,\n        tickNum = $$.main.select(\".\" + CLASS.axisX).selectAll('.tick').size();\n\n    if (type === 'year') {\n      xDomain = $$.getXDomain();\n      firstYear = xDomain[0].getFullYear();\n      lastYear = xDomain[1].getFullYear();\n\n      for (i = firstYear; i <= lastYear; i++) {\n        gridData.push(new Date(i + '-01-01 00:00:00'));\n      }\n    } else {\n      gridData = scale.ticks(10);\n\n      if (gridData.length > tickNum) {\n        // use only int\n        gridData = gridData.filter(function (d) {\n          return (\"\" + d).indexOf('.') < 0;\n        });\n      }\n    }\n\n    return gridData;\n  };\n\n  c3_chart_internal_fn.getGridFilterToRemove = function (params) {\n    return params ? function (line) {\n      var found = false;\n      [].concat(params).forEach(function (param) {\n        if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n          found = true;\n        }\n      });\n      return found;\n    } : function () {\n      return true;\n    };\n  };\n\n  c3_chart_internal_fn.removeGridLines = function (params, forX) {\n    var $$ = this,\n        config = $$.config,\n        toRemove = $$.getGridFilterToRemove(params),\n        toShow = function toShow(line) {\n      return !toRemove(line);\n    },\n        classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n        classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n\n    $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n\n    if (forX) {\n      config.grid_x_lines = config.grid_x_lines.filter(toShow);\n    } else {\n      config.grid_y_lines = config.grid_y_lines.filter(toShow);\n    }\n  };\n\n  c3_chart_internal_fn.initEventRect = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.eventRects).style('fill-opacity', 0);\n  };\n\n  c3_chart_internal_fn.redrawEventRect = function () {\n    var $$ = this,\n        config = $$.config,\n        eventRectUpdate,\n        maxDataCountTarget,\n        isMultipleX = $$.isMultipleX(); // rects for mouseover\n\n    var eventRects = $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null).classed(CLASS.eventRectsMultiple, isMultipleX).classed(CLASS.eventRectsSingle, !isMultipleX); // clear old rects\n\n    eventRects.selectAll('.' + CLASS.eventRect).remove(); // open as public variable\n\n    $$.eventRect = eventRects.selectAll('.' + CLASS.eventRect);\n\n    if (isMultipleX) {\n      eventRectUpdate = $$.eventRect.data([0]); // enter : only one rect will be added\n\n      $$.generateEventRectsForMultipleXs(eventRectUpdate.enter()); // update\n\n      $$.updateEventRect(eventRectUpdate); // exit : not needed because always only one rect exists\n    } else {\n      // Set data and update $$.eventRect\n      maxDataCountTarget = $$.getMaxDataCountTarget($$.data.targets);\n      eventRects.datum(maxDataCountTarget ? maxDataCountTarget.values : []);\n      $$.eventRect = eventRects.selectAll('.' + CLASS.eventRect);\n      eventRectUpdate = $$.eventRect.data(function (d) {\n        return d;\n      }); // enter\n\n      $$.generateEventRectsForSingleX(eventRectUpdate.enter()); // update\n\n      $$.updateEventRect(eventRectUpdate); // exit\n\n      eventRectUpdate.exit().remove();\n    }\n  };\n\n  c3_chart_internal_fn.updateEventRect = function (eventRectUpdate) {\n    var $$ = this,\n        config = $$.config,\n        x,\n        y,\n        w,\n        h,\n        rectW,\n        rectX; // set update selection if null\n\n    eventRectUpdate = eventRectUpdate || $$.eventRect.data(function (d) {\n      return d;\n    });\n\n    if ($$.isMultipleX()) {\n      // TODO: rotated not supported yet\n      x = 0;\n      y = 0;\n      w = $$.width;\n      h = $$.height;\n    } else {\n      if (($$.isCustomX() || $$.isTimeSeries()) && !$$.isCategorized()) {\n        // update index for x that is used by prevX and nextX\n        $$.updateXs();\n\n        rectW = function rectW(d) {\n          var prevX = $$.getPrevX(d.index),\n              nextX = $$.getNextX(d.index); // if there this is a single data point make the eventRect full width (or height)\n\n          if (prevX === null && nextX === null) {\n            return config.axis_rotated ? $$.height : $$.width;\n          }\n\n          if (prevX === null) {\n            prevX = $$.x.domain()[0];\n          }\n\n          if (nextX === null) {\n            nextX = $$.x.domain()[1];\n          }\n\n          return Math.max(0, ($$.x(nextX) - $$.x(prevX)) / 2);\n        };\n\n        rectX = function rectX(d) {\n          var prevX = $$.getPrevX(d.index),\n              nextX = $$.getNextX(d.index),\n              thisX = $$.data.xs[d.id][d.index]; // if there this is a single data point position the eventRect at 0\n\n          if (prevX === null && nextX === null) {\n            return 0;\n          }\n\n          if (prevX === null) {\n            prevX = $$.x.domain()[0];\n          }\n\n          return ($$.x(thisX) + $$.x(prevX)) / 2;\n        };\n      } else {\n        rectW = $$.getEventRectWidth();\n\n        rectX = function rectX(d) {\n          return $$.x(d.x) - rectW / 2;\n        };\n      }\n\n      x = config.axis_rotated ? 0 : rectX;\n      y = config.axis_rotated ? rectX : 0;\n      w = config.axis_rotated ? $$.width : rectW;\n      h = config.axis_rotated ? rectW : $$.height;\n    }\n\n    eventRectUpdate.attr('class', $$.classEvent.bind($$)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", w).attr(\"height\", h);\n  };\n\n  c3_chart_internal_fn.generateEventRectsForSingleX = function (eventRectEnter) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n    eventRectEnter.append(\"rect\").attr(\"class\", $$.classEvent.bind($$)).style(\"cursor\", config.data_selection_enabled && config.data_selection_grouped ? \"pointer\" : null).on('mouseover', function (d) {\n      var index = d.index;\n\n      if ($$.dragging || $$.flowing) {\n        return;\n      } // do nothing while dragging/flowing\n\n\n      if ($$.hasArcType()) {\n        return;\n      } // Expand shapes for selection\n\n\n      if (config.point_focus_expand_enabled) {\n        $$.expandCircles(index, null, true);\n      }\n\n      $$.expandBars(index, null, true); // Call event handler\n\n      $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n        config.data_onmouseover.call($$.api, d);\n      });\n    }).on('mouseout', function (d) {\n      var index = d.index;\n\n      if (!$$.config) {\n        return;\n      } // chart is destroyed\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      $$.hideXGridFocus();\n      $$.hideTooltip(); // Undo expanded shapes\n\n      $$.unexpandCircles();\n      $$.unexpandBars(); // Call event handler\n\n      $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n        config.data_onmouseout.call($$.api, d);\n      });\n    }).on('mousemove', function (d) {\n      var selectedData,\n          index = d.index,\n          eventRect = $$.svg.select('.' + CLASS.eventRect + '-' + index);\n\n      if ($$.dragging || $$.flowing) {\n        return;\n      } // do nothing while dragging/flowing\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      if ($$.isStepType(d) && $$.config.line_step_type === 'step-after' && d3.mouse(this)[0] < $$.x($$.getXValue(d.id, index))) {\n        index -= 1;\n      } // Show tooltip\n\n\n      selectedData = $$.filterTargetsToShow($$.data.targets).map(function (t) {\n        return $$.addName($$.getValueOnIndex(t.values, index));\n      });\n\n      if (config.tooltip_grouped) {\n        $$.showTooltip(selectedData, this);\n        $$.showXGridFocus(selectedData);\n      }\n\n      if (config.tooltip_grouped && (!config.data_selection_enabled || config.data_selection_grouped)) {\n        return;\n      }\n\n      $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function () {\n        d3.select(this).classed(CLASS.EXPANDED, true);\n\n        if (config.data_selection_enabled) {\n          eventRect.style('cursor', config.data_selection_grouped ? 'pointer' : null);\n        }\n\n        if (!config.tooltip_grouped) {\n          $$.hideXGridFocus();\n          $$.hideTooltip();\n\n          if (!config.data_selection_grouped) {\n            $$.unexpandCircles(index);\n            $$.unexpandBars(index);\n          }\n        }\n      }).filter(function (d) {\n        return $$.isWithinShape(this, d);\n      }).each(function (d) {\n        if (config.data_selection_enabled && (config.data_selection_grouped || config.data_selection_isselectable(d))) {\n          eventRect.style('cursor', 'pointer');\n        }\n\n        if (!config.tooltip_grouped) {\n          $$.showTooltip([d], this);\n          $$.showXGridFocus([d]);\n\n          if (config.point_focus_expand_enabled) {\n            $$.expandCircles(index, d.id, true);\n          }\n\n          $$.expandBars(index, d.id, true);\n        }\n      });\n    }).on('click', function (d) {\n      var index = d.index;\n\n      if ($$.hasArcType() || !$$.toggleShape) {\n        return;\n      }\n\n      if ($$.cancelClick) {\n        $$.cancelClick = false;\n        return;\n      }\n\n      if ($$.isStepType(d) && config.line_step_type === 'step-after' && d3.mouse(this)[0] < $$.x($$.getXValue(d.id, index))) {\n        index -= 1;\n      }\n\n      $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n        if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n          $$.toggleShape(this, d, index);\n          $$.config.data_onclick.call($$.api, d, this);\n        }\n      });\n    }).call(config.data_selection_draggable && $$.drag ? d3.behavior.drag().origin(Object).on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('dragstart', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('dragend', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n\n  c3_chart_internal_fn.generateEventRectsForMultipleXs = function (eventRectEnter) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n\n    function mouseout() {\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n      $$.hideXGridFocus();\n      $$.hideTooltip();\n      $$.unexpandCircles();\n      $$.unexpandBars();\n    }\n\n    eventRectEnter.append('rect').attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).attr('class', CLASS.eventRect).on('mouseout', function () {\n      if (!$$.config) {\n        return;\n      } // chart is destroyed\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      mouseout();\n    }).on('mousemove', function () {\n      var targetsToShow = $$.filterTargetsToShow($$.data.targets);\n      var mouse, closest, sameXData, selectedData;\n\n      if ($$.dragging) {\n        return;\n      } // do nothing when dragging\n\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      mouse = d3.mouse(this);\n      closest = $$.findClosestFromTargets(targetsToShow, mouse);\n\n      if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id)) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      if (!closest) {\n        mouseout();\n        return;\n      }\n\n      if ($$.isScatterType(closest) || !config.tooltip_grouped) {\n        sameXData = [closest];\n      } else {\n        sameXData = $$.filterByX(targetsToShow, closest.x);\n      } // show tooltip when cursor is close to some point\n\n\n      selectedData = sameXData.map(function (d) {\n        return $$.addName(d);\n      });\n      $$.showTooltip(selectedData, this); // expand points\n\n      if (config.point_focus_expand_enabled) {\n        $$.expandCircles(closest.index, closest.id, true);\n      }\n\n      $$.expandBars(closest.index, closest.id, true); // Show xgrid focus line\n\n      $$.showXGridFocus(selectedData); // Show cursor as pointer if point is close to mouse position\n\n      if ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity) {\n        $$.svg.select('.' + CLASS.eventRect).style('cursor', 'pointer');\n\n        if (!$$.mouseover) {\n          config.data_onmouseover.call($$.api, closest);\n          $$.mouseover = closest;\n        }\n      }\n    }).on('click', function () {\n      var targetsToShow = $$.filterTargetsToShow($$.data.targets);\n      var mouse, closest;\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      mouse = d3.mouse(this);\n      closest = $$.findClosestFromTargets(targetsToShow, mouse);\n\n      if (!closest) {\n        return;\n      } // select if selection enabled\n\n\n      if ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity) {\n        $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).selectAll('.' + CLASS.shape + '-' + closest.index).each(function () {\n          if (config.data_selection_grouped || $$.isWithinShape(this, closest)) {\n            $$.toggleShape(this, closest, closest.index);\n            $$.config.data_onclick.call($$.api, closest, this);\n          }\n        });\n      }\n    }).call(config.data_selection_draggable && $$.drag ? d3.behavior.drag().origin(Object).on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('dragstart', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('dragend', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n\n  c3_chart_internal_fn.dispatchEvent = function (type, index, mouse) {\n    var $$ = this,\n        selector = '.' + CLASS.eventRect + (!$$.isMultipleX() ? '-' + index : ''),\n        eventRect = $$.main.select(selector).node(),\n        box = eventRect.getBoundingClientRect(),\n        x = box.left + (mouse ? mouse[0] : 0),\n        y = box.top + (mouse ? mouse[1] : 0),\n        event = document.createEvent(\"MouseEvents\");\n    event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n    eventRect.dispatchEvent(event);\n  };\n\n  c3_chart_internal_fn.initLegend = function () {\n    var $$ = this;\n    $$.legendItemTextBox = {};\n    $$.legendHasRendered = false;\n    $$.legend = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('legend'));\n\n    if (!$$.config.legend_show) {\n      $$.legend.style('visibility', 'hidden');\n      $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n      return;\n    } // MEMO: call here to update legend box and tranlate for all\n    // MEMO: translate will be upated by this, so transform not needed in updateLegend()\n\n\n    $$.updateLegendWithDefaults();\n  };\n\n  c3_chart_internal_fn.updateLegendWithDefaults = function () {\n    var $$ = this;\n    $$.updateLegend($$.mapToIds($$.data.targets), {\n      withTransform: false,\n      withTransitionForTransform: false,\n      withTransition: false\n    });\n  };\n\n  c3_chart_internal_fn.updateSizeForLegend = function (legendHeight, legendWidth) {\n    var $$ = this,\n        config = $$.config,\n        insetLegendPosition = {\n      top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n      left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n    };\n    $$.margin3 = {\n      top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n      right: NaN,\n      bottom: 0,\n      left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n    };\n  };\n\n  c3_chart_internal_fn.transformLegend = function (withTransition) {\n    var $$ = this;\n    (withTransition ? $$.legend.transition() : $$.legend).attr(\"transform\", $$.getTranslate('legend'));\n  };\n\n  c3_chart_internal_fn.updateLegendStep = function (step) {\n    this.legendStep = step;\n  };\n\n  c3_chart_internal_fn.updateLegendItemWidth = function (w) {\n    this.legendItemWidth = w;\n  };\n\n  c3_chart_internal_fn.updateLegendItemHeight = function (h) {\n    this.legendItemHeight = h;\n  };\n\n  c3_chart_internal_fn.getLegendWidth = function () {\n    var $$ = this;\n    return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n  };\n\n  c3_chart_internal_fn.getLegendHeight = function () {\n    var $$ = this,\n        h = 0;\n\n    if ($$.config.legend_show) {\n      if ($$.isLegendRight) {\n        h = $$.currentHeight;\n      } else {\n        h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n      }\n    }\n\n    return h;\n  };\n\n  c3_chart_internal_fn.opacityForLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n  };\n\n  c3_chart_internal_fn.opacityForUnfocusedLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n  };\n\n  c3_chart_internal_fn.toggleFocusLegend = function (targetIds, focus) {\n    var $$ = this;\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n      return targetIds.indexOf(id) >= 0;\n    }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n      var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n      return opacity.call($$, $$.d3.select(this));\n    });\n  };\n\n  c3_chart_internal_fn.revertLegend = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n      return $$.opacityForLegend(d3.select(this));\n    });\n  };\n\n  c3_chart_internal_fn.showLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (!config.legend_show) {\n      config.legend_show = true;\n      $$.legend.style('visibility', 'visible');\n\n      if (!$$.legendHasRendered) {\n        $$.updateLegendWithDefaults();\n      }\n    }\n\n    $$.removeHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n      return $$.opacityForLegend($$.d3.select(this));\n    });\n  };\n\n  c3_chart_internal_fn.hideLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.legend_show && isEmpty(targetIds)) {\n      config.legend_show = false;\n      $$.legend.style('visibility', 'hidden');\n    }\n\n    $$.addHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n  };\n\n  c3_chart_internal_fn.clearLegendItemTextBoxCache = function () {\n    this.legendItemTextBox = {};\n  };\n\n  c3_chart_internal_fn.updateLegend = function (targetIds, options, transitions) {\n    var $$ = this,\n        config = $$.config;\n    var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n    var paddingTop = 4,\n        paddingRight = 10,\n        maxWidth = 0,\n        maxHeight = 0,\n        posMin = 10,\n        tileWidth = config.legend_item_tile_width + 5;\n    var l,\n        totalLength = 0,\n        offsets = {},\n        widths = {},\n        heights = {},\n        margins = [0],\n        steps = {},\n        step = 0;\n    var withTransition, withTransitionForTransform;\n    var texts, rects, tiles, background; // Skip elements when their name is set to null\n\n    targetIds = targetIds.filter(function (id) {\n      return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n    });\n    options = options || {};\n    withTransition = getOption(options, \"withTransition\", true);\n    withTransitionForTransform = getOption(options, \"withTransitionForTransform\", true);\n\n    function getTextBox(textElement, id) {\n      if (!$$.legendItemTextBox[id]) {\n        $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n      }\n\n      return $$.legendItemTextBox[id];\n    }\n\n    function updatePositions(textElement, id, index) {\n      var reset = index === 0,\n          isLast = index === targetIds.length - 1,\n          box = getTextBox(textElement, id),\n          itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n          itemHeight = box.height + paddingTop,\n          itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n          areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n          margin,\n          maxLength; // MEMO: care about condifion of step, totalLength\n\n      function updateValues(id, withoutStep) {\n        if (!withoutStep) {\n          margin = (areaLength - totalLength - itemLength) / 2;\n\n          if (margin < posMin) {\n            margin = (areaLength - itemLength) / 2;\n            totalLength = 0;\n            step++;\n          }\n        }\n\n        steps[id] = step;\n        margins[step] = $$.isLegendInset ? 10 : margin;\n        offsets[id] = totalLength;\n        totalLength += itemLength;\n      }\n\n      if (reset) {\n        totalLength = 0;\n        step = 0;\n        maxWidth = 0;\n        maxHeight = 0;\n      }\n\n      if (config.legend_show && !$$.isLegendToShow(id)) {\n        widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n        return;\n      }\n\n      widths[id] = itemWidth;\n      heights[id] = itemHeight;\n\n      if (!maxWidth || itemWidth >= maxWidth) {\n        maxWidth = itemWidth;\n      }\n\n      if (!maxHeight || itemHeight >= maxHeight) {\n        maxHeight = itemHeight;\n      }\n\n      maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n\n      if (config.legend_equally) {\n        Object.keys(widths).forEach(function (id) {\n          widths[id] = maxWidth;\n        });\n        Object.keys(heights).forEach(function (id) {\n          heights[id] = maxHeight;\n        });\n        margin = (areaLength - maxLength * targetIds.length) / 2;\n\n        if (margin < posMin) {\n          totalLength = 0;\n          step = 0;\n          targetIds.forEach(function (id) {\n            updateValues(id);\n          });\n        } else {\n          updateValues(id, true);\n        }\n      } else {\n        updateValues(id);\n      }\n    }\n\n    if ($$.isLegendInset) {\n      step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n      $$.updateLegendStep(step);\n    }\n\n    if ($$.isLegendRight) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else if ($$.isLegendInset) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id] + 10;\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else {\n      xForLegend = function xForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return maxHeight * steps[id];\n      };\n    }\n\n    xForLegendText = function xForLegendText(id, i) {\n      return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n    };\n\n    yForLegendText = function yForLegendText(id, i) {\n      return yForLegend(id, i) + 9;\n    };\n\n    xForLegendRect = function xForLegendRect(id, i) {\n      return xForLegend(id, i);\n    };\n\n    yForLegendRect = function yForLegendRect(id, i) {\n      return yForLegend(id, i) - 5;\n    };\n\n    x1ForLegendTile = function x1ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2;\n    };\n\n    x2ForLegendTile = function x2ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n    };\n\n    yForLegendTile = function yForLegendTile(id, i) {\n      return yForLegend(id, i) + 4;\n    }; // Define g for legend area\n\n\n    l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n      return $$.generateClass(CLASS.legendItem, id);\n    }).style('visibility', function (id) {\n      return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n    }).style('cursor', 'pointer').on('click', function (id) {\n      if (config.legend_item_onclick) {\n        config.legend_item_onclick.call($$, id);\n      } else {\n        if ($$.d3.event.altKey) {\n          $$.api.hide();\n          $$.api.show(id);\n        } else {\n          $$.api.toggle(id);\n          $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n        }\n      }\n    }).on('mouseover', function (id) {\n      if (config.legend_item_onmouseover) {\n        config.legend_item_onmouseover.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n\n        if (!$$.transiting && $$.isTargetToShow(id)) {\n          $$.api.focus(id);\n        }\n      }\n    }).on('mouseout', function (id) {\n      if (config.legend_item_onmouseout) {\n        config.legend_item_onmouseout.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n        $$.api.revert();\n      }\n    });\n    l.append('text').text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }).each(function (id, i) {\n      updatePositions(this, id, i);\n    }).style(\"pointer-events\", \"none\").attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n    l.append('rect').attr(\"class\", CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n    l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style(\"pointer-events\", \"none\").attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height); // Set background for inset legend\n\n    background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n\n    if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n      background = $$.legend.insert('g', '.' + CLASS.legendItem).attr(\"class\", CLASS.legendBackground).append('rect');\n    }\n\n    texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }) // MEMO: needed for update\n    .each(function (id, i) {\n      updatePositions(this, id, i);\n    });\n    (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n    rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n    (withTransition ? rects.transition() : rects).attr('width', function (id) {\n      return widths[id];\n    }).attr('height', function (id) {\n      return heights[id];\n    }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n    tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n    (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n      return $$.levelColor($$.cache[id].values[0].value);\n    } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n\n    if (background) {\n      (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n    } // toggle legend state\n\n\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n      return !$$.isTargetToShow(id);\n    }); // Update all to reflect change of legend\n\n    $$.updateLegendItemWidth(maxWidth);\n    $$.updateLegendItemHeight(maxHeight);\n    $$.updateLegendStep(step); // Update size and scale\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize(); // Update g positions\n\n    $$.transformAll(withTransitionForTransform, transitions);\n    $$.legendHasRendered = true;\n  };\n\n  c3_chart_internal_fn.initRegion = function () {\n    var $$ = this;\n    $$.region = $$.main.append('g').attr(\"clip-path\", $$.clipPath).attr(\"class\", CLASS.regions);\n  };\n\n  c3_chart_internal_fn.updateRegion = function (duration) {\n    var $$ = this,\n        config = $$.config; // hide if arc type\n\n    $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    $$.mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n    $$.mainRegion.enter().append('g').append('rect').style(\"fill-opacity\", 0);\n    $$.mainRegion.attr('class', $$.classRegion.bind($$));\n    $$.mainRegion.exit().transition().duration(duration).style(\"opacity\", 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawRegion = function (withTransition) {\n    var $$ = this,\n        regions = $$.mainRegion.selectAll('rect').each(function () {\n      // data is binded to g and it's not transferred to rect (child node) automatically,\n      // then data of each rect has to be updated manually.\n      // TODO: there should be more efficient way to solve this?\n      var parentData = $$.d3.select(this.parentNode).datum();\n      $$.d3.select(this).datum(parentData);\n    }),\n        x = $$.regionX.bind($$),\n        y = $$.regionY.bind($$),\n        w = $$.regionWidth.bind($$),\n        h = $$.regionHeight.bind($$);\n    return [(withTransition ? regions.transition() : regions).attr(\"x\", x).attr(\"y\", y).attr(\"width\", w).attr(\"height\", h).style(\"fill-opacity\", function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    })];\n  };\n\n  c3_chart_internal_fn.regionX = function (d) {\n    var $$ = this,\n        config = $$.config,\n        xPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n    } else {\n      xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n    }\n\n    return xPos;\n  };\n\n  c3_chart_internal_fn.regionY = function (d) {\n    var $$ = this,\n        config = $$.config,\n        yPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n    } else {\n      yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n    }\n\n    return yPos;\n  };\n\n  c3_chart_internal_fn.regionWidth = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = $$.regionX(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n    } else {\n      end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  c3_chart_internal_fn.regionHeight = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = this.regionY(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n    } else {\n      end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  c3_chart_internal_fn.isRegionOnX = function (d) {\n    return !d.axis || d.axis === 'x';\n  };\n\n  c3_chart_internal_fn.getScale = function (min, max, forTimeseries) {\n    return (forTimeseries ? this.d3.time.scale() : this.d3.scale.linear()).range([min, max]);\n  };\n\n  c3_chart_internal_fn.getX = function (min, max, domain, offset) {\n    var $$ = this,\n        scale = $$.getScale(min, max, $$.isTimeSeries()),\n        _scale = domain ? scale.domain(domain) : scale,\n        key; // Define customized scale if categorized axis\n\n\n    if ($$.isCategorized()) {\n      offset = offset || function () {\n        return 0;\n      };\n\n      scale = function scale(d, raw) {\n        var v = _scale(d) + offset(d);\n        return raw ? v : Math.ceil(v);\n      };\n    } else {\n      scale = function scale(d, raw) {\n        var v = _scale(d);\n\n        return raw ? v : Math.ceil(v);\n      };\n    } // define functions\n\n\n    for (key in _scale) {\n      scale[key] = _scale[key];\n    }\n\n    scale.orgDomain = function () {\n      return _scale.domain();\n    }; // define custom domain() for categorized axis\n\n\n    if ($$.isCategorized()) {\n      scale.domain = function (domain) {\n        if (!arguments.length) {\n          domain = this.orgDomain();\n          return [domain[0], domain[1] + 1];\n        }\n\n        _scale.domain(domain);\n\n        return scale;\n      };\n    }\n\n    return scale;\n  };\n\n  c3_chart_internal_fn.getY = function (min, max, domain) {\n    var scale = this.getScale(min, max, this.isTimeSeriesY());\n\n    if (domain) {\n      scale.domain(domain);\n    }\n\n    return scale;\n  };\n\n  c3_chart_internal_fn.getYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n  };\n\n  c3_chart_internal_fn.getSubYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n  };\n\n  c3_chart_internal_fn.updateScales = function () {\n    var $$ = this,\n        config = $$.config,\n        forInit = !$$.x; // update edges\n\n    $$.xMin = config.axis_rotated ? 1 : 0;\n    $$.xMax = config.axis_rotated ? $$.height : $$.width;\n    $$.yMin = config.axis_rotated ? 0 : $$.height;\n    $$.yMax = config.axis_rotated ? $$.width : 1;\n    $$.subXMin = $$.xMin;\n    $$.subXMax = $$.xMax;\n    $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n    $$.subYMax = config.axis_rotated ? $$.width2 : 1; // update scales\n\n    $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n      return $$.xAxis.tickOffset();\n    });\n    $$.y = $$.getY($$.yMin, $$.yMax, forInit ? config.axis_y_default : $$.y.domain());\n    $$.y2 = $$.getY($$.yMin, $$.yMax, forInit ? config.axis_y2_default : $$.y2.domain());\n    $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n      return d % 1 ? 0 : $$.subXAxis.tickOffset();\n    });\n    $$.subY = $$.getY($$.subYMin, $$.subYMax, forInit ? config.axis_y_default : $$.subY.domain());\n    $$.subY2 = $$.getY($$.subYMin, $$.subYMax, forInit ? config.axis_y2_default : $$.subY2.domain()); // update axes\n\n    $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n    $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n    $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n    $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n    $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.yAxis = $$.axis.getYAxis($$.y, $$.yOrient, config.axis_y_tick_format, $$.yAxisTickValues, config.axis_y_tick_outer);\n    $$.y2Axis = $$.axis.getYAxis($$.y2, $$.y2Orient, config.axis_y2_tick_format, $$.y2AxisTickValues, config.axis_y2_tick_outer); // Set initialized scales to brush and zoom\n\n    if (!forInit) {\n      if ($$.brush) {\n        $$.brush.scale($$.subX);\n      }\n\n      if (config.zoom_enabled) {\n        $$.zoom.scale($$.x);\n      }\n    } // update for arc\n\n\n    if ($$.updateArc) {\n      $$.updateArc();\n    }\n  };\n\n  c3_chart_internal_fn.selectPoint = function (target, d, i) {\n    var $$ = this,\n        config = $$.config,\n        cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n        cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n        r = $$.pointSelectR.bind($$);\n    config.data_onselected.call($$.api, d, target.node()); // add selected-circle on low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr(\"class\", function () {\n      return $$.generateClass(CLASS.selectedCircle, i);\n    }).attr(\"cx\", cx).attr(\"cy\", cy).attr(\"stroke\", function () {\n      return $$.color(d);\n    }).attr(\"r\", function (d) {\n      return $$.pointSelectR(d) * 1.4;\n    }).transition().duration(100).attr(\"r\", r);\n  };\n\n  c3_chart_internal_fn.unselectPoint = function (target, d, i) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$.api, d, target.node()); // remove selected-circle from low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n  };\n\n  c3_chart_internal_fn.togglePoint = function (selected, target, d, i) {\n    selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n  };\n\n  c3_chart_internal_fn.selectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style(\"fill\", function () {\n        return $$.d3.rgb($$.color(d)).brighter(0.75);\n      });\n    }\n  };\n\n  c3_chart_internal_fn.unselectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style(\"fill\", function () {\n        return $$.color(d);\n      });\n    }\n  };\n\n  c3_chart_internal_fn.togglePath = function (selected, target, d, i) {\n    selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n  };\n\n  c3_chart_internal_fn.getToggle = function (that, d) {\n    var $$ = this,\n        toggle;\n\n    if (that.nodeName === 'circle') {\n      if ($$.isStepType(d)) {\n        // circle is hidden in step chart, so treat as within the click area\n        toggle = function toggle() {}; // TODO: how to select step chart?\n\n      } else {\n        toggle = $$.togglePoint;\n      }\n    } else if (that.nodeName === 'path') {\n      toggle = $$.togglePath;\n    }\n\n    return toggle;\n  };\n\n  c3_chart_internal_fn.toggleShape = function (that, d, i) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        shape = d3.select(that),\n        isSelected = shape.classed(CLASS.SELECTED),\n        toggle = $$.getToggle(that, d).bind($$);\n\n    if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n      if (!config.data_selection_multiple) {\n        $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : \"\")).selectAll('.' + CLASS.shape).each(function (d, i) {\n          var shape = d3.select(this);\n\n          if (shape.classed(CLASS.SELECTED)) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        });\n      }\n\n      shape.classed(CLASS.SELECTED, !isSelected);\n      toggle(!isSelected, shape, d, i);\n    }\n  };\n\n  c3_chart_internal_fn.initBar = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartBars);\n  };\n\n  c3_chart_internal_fn.updateTargetsForBar = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainBarUpdate,\n        mainBarEnter,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainBarUpdate = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n      return classChartBar(d) + classFocus(d);\n    });\n    mainBarEnter = mainBarUpdate.enter().append('g').attr('class', classChartBar).style(\"pointer-events\", \"none\"); // Bars for each data\n\n    mainBarEnter.append('g').attr(\"class\", classBars).style(\"cursor\", function (d) {\n      return config.data_selection_isselectable(d) ? \"pointer\" : null;\n    });\n  };\n\n  c3_chart_internal_fn.updateBar = function (durationForExit) {\n    var $$ = this,\n        barData = $$.barData.bind($$),\n        classBar = $$.classBar.bind($$),\n        initialOpacity = $$.initialOpacity.bind($$),\n        color = function color(d) {\n      return $$.color(d.id);\n    };\n\n    $$.mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n    $$.mainBar.enter().append('path').attr(\"class\", classBar).style(\"stroke\", color).style(\"fill\", color);\n    $$.mainBar.style(\"opacity\", initialOpacity);\n    $$.mainBar.exit().transition().duration(durationForExit).remove();\n  };\n\n  c3_chart_internal_fn.redrawBar = function (drawBar, withTransition) {\n    return [(withTransition ? this.mainBar.transition(Math.random().toString()) : this.mainBar).attr('d', drawBar).style(\"stroke\", this.color).style(\"fill\", this.color).style(\"opacity\", 1)];\n  };\n\n  c3_chart_internal_fn.getBarW = function (axis, barTargetsNum) {\n    var $$ = this,\n        config = $$.config,\n        w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n    return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n  };\n\n  c3_chart_internal_fn.getBars = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n  };\n\n  c3_chart_internal_fn.expandBars = function (i, id, reset) {\n    var $$ = this;\n\n    if (reset) {\n      $$.unexpandBars();\n    }\n\n    $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n  };\n\n  c3_chart_internal_fn.unexpandBars = function (i) {\n    var $$ = this;\n    $$.getBars(i).classed(CLASS.EXPANDED, false);\n  };\n\n  c3_chart_internal_fn.generateDrawBar = function (barIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        getPoints = $$.generateGetBarPoints(barIndices, isSub);\n    return function (d, i) {\n      // 4 points that make a bar\n      var points = getPoints(d, i); // switch points if axis is rotated, not applicable for sub chart\n\n      var indexX = config.axis_rotated ? 1 : 0;\n      var indexY = config.axis_rotated ? 0 : 1;\n      var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n      return path;\n    };\n  };\n\n  c3_chart_internal_fn.generateGetBarPoints = function (barIndices, isSub) {\n    var $$ = this,\n        axis = isSub ? $$.subXAxis : $$.xAxis,\n        barTargetsNum = barIndices.__max__ + 1,\n        barW = $$.getBarW(axis, barTargetsNum),\n        barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n        barY = $$.getShapeY(!!isSub),\n        barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n        barSpaceOffset = barW * ($$.config.bar_space / 2),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = barOffset(d, i) || y0,\n          // offset is for stacked bar chart\n      posX = barX(d),\n          posY = barY(d); // fix posY not to overflow opposite quadrant\n\n      if ($$.config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 4 points that make a bar\n\n\n      return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY - (y0 - offset)], [posX + barW - barSpaceOffset, posY - (y0 - offset)], [posX + barW - barSpaceOffset, offset]];\n    };\n  };\n\n  c3_chart_internal_fn.isWithinBar = function (that) {\n    var mouse = this.d3.mouse(that),\n        box = that.getBoundingClientRect(),\n        seg0 = that.pathSegList.getItem(0),\n        seg1 = that.pathSegList.getItem(1),\n        x = Math.min(seg0.x, seg1.x),\n        y = Math.min(seg0.y, seg1.y),\n        w = box.width,\n        h = box.height,\n        offset = 2,\n        sx = x - offset,\n        ex = x + w + offset,\n        sy = y + h + offset,\n        ey = y - offset;\n    return sx < mouse[0] && mouse[0] < ex && ey < mouse[1] && mouse[1] < sy;\n  };\n\n  c3_chart_internal_fn.getShapeIndices = function (typeFilter) {\n    var $$ = this,\n        config = $$.config,\n        indices = {},\n        i = 0,\n        j,\n        k;\n    $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n      for (j = 0; j < config.data_groups.length; j++) {\n        if (config.data_groups[j].indexOf(d.id) < 0) {\n          continue;\n        }\n\n        for (k = 0; k < config.data_groups[j].length; k++) {\n          if (config.data_groups[j][k] in indices) {\n            indices[d.id] = indices[config.data_groups[j][k]];\n            break;\n          }\n        }\n      }\n\n      if (isUndefined(indices[d.id])) {\n        indices[d.id] = i++;\n      }\n    });\n    indices.__max__ = i - 1;\n    return indices;\n  };\n\n  c3_chart_internal_fn.getShapeX = function (offset, targetsNum, indices, isSub) {\n    var $$ = this,\n        scale = isSub ? $$.subX : $$.x;\n    return function (d) {\n      var index = d.id in indices ? indices[d.id] : 0;\n      return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n    };\n  };\n\n  c3_chart_internal_fn.getShapeY = function (isSub) {\n    var $$ = this;\n    return function (d) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n      return scale(d.value);\n    };\n  };\n\n  c3_chart_internal_fn.getShapeOffset = function (typeFilter, indices, isSub) {\n    var $$ = this,\n        targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n        targetIds = targets.map(function (t) {\n      return t.id;\n    });\n    return function (d, i) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n          y0 = scale(0),\n          offset = y0;\n      targets.forEach(function (t) {\n        var values = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n\n        if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n          return;\n        }\n\n        if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n          // check if the x values line up\n          if (typeof values[i] === 'undefined' || +values[i].x !== +d.x) {\n            // \"+\" for timeseries\n            // if not, try to find the value that does line up\n            i = -1;\n            values.forEach(function (v, j) {\n              if (v.x === d.x) {\n                i = j;\n              }\n            });\n          }\n\n          if (i in values && values[i].value * d.value >= 0) {\n            offset += scale(values[i].value) - y0;\n          }\n        }\n      });\n      return offset;\n    };\n  };\n\n  c3_chart_internal_fn.isWithinShape = function (that, d) {\n    var $$ = this,\n        shape = $$.d3.select(that),\n        isWithin;\n\n    if (!$$.isTargetToShow(d.id)) {\n      isWithin = false;\n    } else if (that.nodeName === 'circle') {\n      isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n    } else if (that.nodeName === 'path') {\n      isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar(that) : true;\n    }\n\n    return isWithin;\n  };\n\n  c3_chart_internal_fn.getInterpolate = function (d) {\n    var $$ = this,\n        interpolation = $$.isInterpolationType($$.config.spline_interpolation_type) ? $$.config.spline_interpolation_type : 'cardinal';\n    return $$.isSplineType(d) ? interpolation : $$.isStepType(d) ? $$.config.line_step_type : \"linear\";\n  };\n\n  c3_chart_internal_fn.initLine = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartLines);\n  };\n\n  c3_chart_internal_fn.updateTargetsForLine = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainLineUpdate,\n        mainLineEnter,\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$),\n        classCircles = $$.classCircles.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainLineUpdate = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n      return classChartLine(d) + classFocus(d);\n    });\n    mainLineEnter = mainLineUpdate.enter().append('g').attr('class', classChartLine).style('opacity', 0).style(\"pointer-events\", \"none\"); // Lines for each data\n\n    mainLineEnter.append('g').attr(\"class\", classLines); // Areas\n\n    mainLineEnter.append('g').attr('class', classAreas); // Circles for each data point on lines\n\n    mainLineEnter.append('g').attr(\"class\", function (d) {\n      return $$.generateClass(CLASS.selectedCircles, d.id);\n    });\n    mainLineEnter.append('g').attr(\"class\", classCircles).style(\"cursor\", function (d) {\n      return config.data_selection_isselectable(d) ? \"pointer\" : null;\n    }); // Update date for selected circles\n\n    targets.forEach(function (t) {\n      $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n        d.value = t.values[d.index].value;\n      });\n    }); // MEMO: can not keep same color...\n    //mainLineUpdate.exit().remove();\n  };\n\n  c3_chart_internal_fn.updateLine = function (durationForExit) {\n    var $$ = this;\n    $$.mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    $$.mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style(\"stroke\", $$.color);\n    $$.mainLine.style(\"opacity\", $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n      return $$.isStepType(d) ? 'crispEdges' : '';\n    }).attr('transform', null);\n    $$.mainLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawLine = function (drawLine, withTransition) {\n    return [(withTransition ? this.mainLine.transition(Math.random().toString()) : this.mainLine).attr(\"d\", drawLine).style(\"stroke\", this.color).style(\"opacity\", 1)];\n  };\n\n  c3_chart_internal_fn.generateDrawLine = function (lineIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        line = $$.d3.svg.line(),\n        getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        yValue = function yValue(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n\n    if (!config.line_connectNull) {\n      line = line.defined(function (d) {\n        return d.value != null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x = isSub ? $$.subX : $$.x,\n          y = yScaleGetter.call($$, d.id),\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isLineType(d)) {\n        if (config.data_regions[d.id]) {\n          path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n        } else {\n          if ($$.isStepType(d)) {\n            values = $$.convertValuesToStep(values);\n          }\n\n          path = line.interpolate($$.getInterpolate(d))(values);\n        }\n      } else {\n        if (values[0]) {\n          x0 = x(values[0].x);\n          y0 = y(values[0].value);\n        }\n\n        path = config.axis_rotated ? \"M \" + y0 + \" \" + x0 : \"M \" + x0 + \" \" + y0;\n      }\n\n      return path ? path : \"M 0 0\";\n    };\n  };\n\n  c3_chart_internal_fn.generateGetLinePoints = function (lineIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        lineTargetsNum = lineIndices.__max__ + 1,\n        x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = lineOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the line position\n\n\n      return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)] // needed for compatibility\n      ];\n    };\n  };\n\n  c3_chart_internal_fn.lineWithRegions = function (d, x, y, _regions) {\n    var $$ = this,\n        config = $$.config,\n        prev = -1,\n        i,\n        j,\n        s = \"M\",\n        sWithRegion,\n        xp,\n        yp,\n        dx,\n        dy,\n        dd,\n        diff,\n        diffx2,\n        xOffset = $$.isCategorized() ? 0.5 : 0,\n        xValue,\n        yValue,\n        regions = [];\n\n    function isWithinRegions(x, regions) {\n      var i;\n\n      for (i = 0; i < regions.length; i++) {\n        if (regions[i].start < x && x <= regions[i].end) {\n          return true;\n        }\n      }\n\n      return false;\n    } // Check start/end of regions\n\n\n    if (isDefined(_regions)) {\n      for (i = 0; i < _regions.length; i++) {\n        regions[i] = {};\n\n        if (isUndefined(_regions[i].start)) {\n          regions[i].start = d[0].x;\n        } else {\n          regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n        }\n\n        if (isUndefined(_regions[i].end)) {\n          regions[i].end = d[d.length - 1].x;\n        } else {\n          regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n        }\n      }\n    } // Set scales\n\n\n    xValue = config.axis_rotated ? function (d) {\n      return y(d.value);\n    } : function (d) {\n      return x(d.x);\n    };\n    yValue = config.axis_rotated ? function (d) {\n      return x(d.x);\n    } : function (d) {\n      return y(d.value);\n    }; // Define svg generator function for region\n\n    function generateM(points) {\n      return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n    }\n\n    if ($$.isTimeSeries()) {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var x0 = d0.x.getTime(),\n            x_diff = d1.x - d0.x,\n            xv0 = new Date(x0 + x_diff * j),\n            xv1 = new Date(x0 + x_diff * (j + diff)),\n            points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n        } else {\n          points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } else {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n        } else {\n          points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } // Generate\n\n\n    for (i = 0; i < d.length; i++) {\n      // Draw as normal\n      if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n        s += \" \" + xValue(d[i]) + \" \" + yValue(d[i]);\n      } // Draw with region // TODO: Fix for horizotal charts\n      else {\n          xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n          yp = $$.getScale(d[i - 1].value, d[i].value);\n          dx = x(d[i].x) - x(d[i - 1].x);\n          dy = y(d[i].value) - y(d[i - 1].value);\n          dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n          diff = 2 / dd;\n          diffx2 = diff * 2;\n\n          for (j = diff; j <= 1; j += diffx2) {\n            s += sWithRegion(d[i - 1], d[i], j, diff);\n          }\n        }\n\n      prev = d[i].x;\n    }\n\n    return s;\n  };\n\n  c3_chart_internal_fn.updateArea = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    $$.mainArea.enter().append('path').attr(\"class\", $$.classArea.bind($$)).style(\"fill\", $$.color).style(\"opacity\", function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.mainArea.style(\"opacity\", $$.orgAreaOpacity);\n    $$.mainArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawArea = function (drawArea, withTransition) {\n    return [(withTransition ? this.mainArea.transition(Math.random().toString()) : this.mainArea).attr(\"d\", drawArea).style(\"fill\", this.color).style(\"opacity\", this.orgAreaOpacity)];\n  };\n\n  c3_chart_internal_fn.generateDrawArea = function (areaIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        area = $$.d3.svg.area(),\n        getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        value0 = function value0(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n    },\n        value1 = function value1(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n\n    if (!config.line_connectNull) {\n      area = area.defined(function (d) {\n        return d.value !== null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isAreaType(d)) {\n        if ($$.isStepType(d)) {\n          values = $$.convertValuesToStep(values);\n        }\n\n        path = area.interpolate($$.getInterpolate(d))(values);\n      } else {\n        if (values[0]) {\n          x0 = $$.x(values[0].x);\n          y0 = $$.getYScale(d.id)(values[0].value);\n        }\n\n        path = config.axis_rotated ? \"M \" + y0 + \" \" + x0 : \"M \" + x0 + \" \" + y0;\n      }\n\n      return path ? path : \"M 0 0\";\n    };\n  };\n\n  c3_chart_internal_fn.getAreaBaseValue = function () {\n    return 0;\n  };\n\n  c3_chart_internal_fn.generateGetAreaPoints = function (areaIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        areaTargetsNum = areaIndices.__max__ + 1,\n        x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = areaOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the area position\n\n\n      return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, offset] // needed for compatibility\n      ];\n    };\n  };\n\n  c3_chart_internal_fn.updateCircle = function () {\n    var $$ = this;\n    $$.mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterData.bind($$));\n    $$.mainCircle.enter().append(\"circle\").attr(\"class\", $$.classCircle.bind($$)).attr(\"r\", $$.pointR.bind($$)).style(\"fill\", $$.color);\n    $$.mainCircle.style(\"opacity\", $$.initialOpacityForCircle.bind($$));\n    $$.mainCircle.exit().remove();\n  };\n\n  c3_chart_internal_fn.redrawCircle = function (cx, cy, withTransition) {\n    var selectedCircles = this.main.selectAll('.' + CLASS.selectedCircle);\n    return [(withTransition ? this.mainCircle.transition(Math.random().toString()) : this.mainCircle).style('opacity', this.opacityForCircle.bind(this)).style(\"fill\", this.color).attr(\"cx\", cx).attr(\"cy\", cy), (withTransition ? selectedCircles.transition(Math.random().toString()) : selectedCircles).attr(\"cx\", cx).attr(\"cy\", cy)];\n  };\n\n  c3_chart_internal_fn.circleX = function (d) {\n    return d.x || d.x === 0 ? this.x(d.x) : null;\n  };\n\n  c3_chart_internal_fn.updateCircleY = function () {\n    var $$ = this,\n        lineIndices,\n        getPoints;\n\n    if ($$.config.data_groups.length > 0) {\n      lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n\n      $$.circleY = function (d, i) {\n        return getPoints(d, i)[0][1];\n      };\n    } else {\n      $$.circleY = function (d) {\n        return $$.getYScale(d.id)(d.value);\n      };\n    }\n  };\n\n  c3_chart_internal_fn.getCircles = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n  };\n\n  c3_chart_internal_fn.expandCircles = function (i, id, reset) {\n    var $$ = this,\n        r = $$.pointExpandedR.bind($$);\n\n    if (reset) {\n      $$.unexpandCircles();\n    }\n\n    $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n  };\n\n  c3_chart_internal_fn.unexpandCircles = function (i) {\n    var $$ = this,\n        r = $$.pointR.bind($$);\n    $$.getCircles(i).filter(function () {\n      return $$.d3.select(this).classed(CLASS.EXPANDED);\n    }).classed(CLASS.EXPANDED, false).attr('r', r);\n  };\n\n  c3_chart_internal_fn.pointR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n  };\n\n  c3_chart_internal_fn.pointExpandedR = function (d) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.point_focus_expand_enabled) {\n      return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n    } else {\n      return $$.pointR(d);\n    }\n  };\n\n  c3_chart_internal_fn.pointSelectR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n  };\n\n  c3_chart_internal_fn.isWithinCircle = function (that, r) {\n    var d3 = this.d3,\n        mouse = d3.mouse(that),\n        d3_this = d3.select(that),\n        cx = +d3_this.attr(\"cx\"),\n        cy = +d3_this.attr(\"cy\");\n    return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n  };\n\n  c3_chart_internal_fn.isWithinStep = function (that, y) {\n    return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n  };\n\n  c3_chart_internal_fn.getCurrentWidth = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.size_width ? config.size_width : $$.getParentWidth();\n  };\n\n  c3_chart_internal_fn.getCurrentHeight = function () {\n    var $$ = this,\n        config = $$.config,\n        h = config.size_height ? config.size_height : $$.getParentHeight();\n    return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n  };\n\n  c3_chart_internal_fn.getCurrentPaddingTop = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = isValue(config.padding_top) ? config.padding_top : 0;\n\n    if ($$.title && $$.title.node()) {\n      padding += $$.getTitlePadding();\n    }\n\n    return padding;\n  };\n\n  c3_chart_internal_fn.getCurrentPaddingBottom = function () {\n    var config = this.config;\n    return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n  };\n\n  c3_chart_internal_fn.getCurrentPaddingLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config;\n\n    if (isValue(config.padding_left)) {\n      return config.padding_left;\n    } else if (config.axis_rotated) {\n      return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n    } else if (!config.axis_y_show || config.axis_y_inner) {\n      // && !config.axis_rotated\n      return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n    }\n  };\n\n  c3_chart_internal_fn.getCurrentPaddingRight = function () {\n    var $$ = this,\n        config = $$.config,\n        defaultPadding = 10,\n        legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n\n    if (isValue(config.padding_right)) {\n      return config.padding_right + 1; // 1 is needed not to hide tick line\n    } else if (config.axis_rotated) {\n      return defaultPadding + legendWidthOnRight;\n    } else if (!config.axis_y2_show || config.axis_y2_inner) {\n      // && !config.axis_rotated\n      return 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n    }\n  };\n\n  c3_chart_internal_fn.getParentRectValue = function (key) {\n    var parent = this.selectChart.node(),\n        v;\n\n    while (parent && parent.tagName !== 'BODY') {\n      try {\n        v = parent.getBoundingClientRect()[key];\n      } catch (e) {\n        if (key === 'width') {\n          // In IE in certain cases getBoundingClientRect\n          // will cause an \"unspecified error\"\n          v = parent.offsetWidth;\n        }\n      }\n\n      if (v) {\n        break;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return v;\n  };\n\n  c3_chart_internal_fn.getParentWidth = function () {\n    return this.getParentRectValue('width');\n  };\n\n  c3_chart_internal_fn.getParentHeight = function () {\n    var h = this.selectChart.style('height');\n    return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n  };\n\n  c3_chart_internal_fn.getSvgLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config,\n        hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n        leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n        leftAxis = $$.main.select('.' + leftAxisClass).node(),\n        svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : {\n      right: 0\n    },\n        chartRect = $$.selectChart.node().getBoundingClientRect(),\n        hasArc = $$.hasArcType(),\n        svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n    return svgLeft > 0 ? svgLeft : 0;\n  };\n\n  c3_chart_internal_fn.getAxisWidthByAxisId = function (id, withoutRecompute) {\n    var $$ = this,\n        position = $$.axis.getLabelPositionById(id);\n    return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n  };\n\n  c3_chart_internal_fn.getHorizontalAxisHeight = function (axisId) {\n    var $$ = this,\n        config = $$.config,\n        h = 30;\n\n    if (axisId === 'x' && !config.axis_x_show) {\n      return 8;\n    }\n\n    if (axisId === 'x' && config.axis_x_height) {\n      return config.axis_x_height;\n    }\n\n    if (axisId === 'y' && !config.axis_y_show) {\n      return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n    }\n\n    if (axisId === 'y2' && !config.axis_y2_show) {\n      return $$.rotated_padding_top;\n    } // Calculate x axis height when tick rotated\n\n\n    if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - config.axis_x_tick_rotate) / 180);\n    } // Calculate y axis height when tick rotated\n\n\n    if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - config.axis_y_tick_rotate) / 180);\n    }\n\n    return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n  };\n\n  c3_chart_internal_fn.getEventRectWidth = function () {\n    return Math.max(0, this.xAxis.tickInterval());\n  };\n\n  c3_chart_internal_fn.initBrush = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.brush = d3.svg.brush().on(\"brush\", function () {\n      $$.redrawForBrush();\n    });\n\n    $$.brush.update = function () {\n      if ($$.context) {\n        $$.context.select('.' + CLASS.brush).call(this);\n      }\n\n      return this;\n    };\n\n    $$.brush.scale = function (scale) {\n      return $$.config.axis_rotated ? this.y(scale) : this.x(scale);\n    };\n  };\n\n  c3_chart_internal_fn.initSubchart = function () {\n    var $$ = this,\n        config = $$.config,\n        context = $$.context = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('context')),\n        visibility = config.subchart_show ? 'visible' : 'hidden';\n    context.style('visibility', visibility); // Define g for chart area\n\n    context.append('g').attr(\"clip-path\", $$.clipPathForSubchart).attr('class', CLASS.chart); // Define g for bar chart area\n\n    context.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartBars); // Define g for line chart area\n\n    context.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartLines); // Add extent rect for Brush\n\n    context.append(\"g\").attr(\"clip-path\", $$.clipPath).attr(\"class\", CLASS.brush).call($$.brush); // ATTENTION: This must be called AFTER chart added\n    // Add Axis\n\n    $$.axes.subx = context.append(\"g\").attr(\"class\", CLASS.axisX).attr(\"transform\", $$.getTranslate('subx')).attr(\"clip-path\", config.axis_rotated ? \"\" : $$.clipPathForXAxis).style(\"visibility\", config.subchart_axis_x_show ? visibility : 'hidden');\n  };\n\n  c3_chart_internal_fn.updateTargetsForSubchart = function (targets) {\n    var $$ = this,\n        context = $$.context,\n        config = $$.config,\n        contextLineEnter,\n        contextLineUpdate,\n        contextBarEnter,\n        contextBarUpdate,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$);\n\n    if (config.subchart_show) {\n      //-- Bar --//\n      contextBarUpdate = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', classChartBar);\n      contextBarEnter = contextBarUpdate.enter().append('g').style('opacity', 0).attr('class', classChartBar); // Bars for each data\n\n      contextBarEnter.append('g').attr(\"class\", classBars); //-- Line --//\n\n      contextLineUpdate = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', classChartLine);\n      contextLineEnter = contextLineUpdate.enter().append('g').style('opacity', 0).attr('class', classChartLine); // Lines for each data\n\n      contextLineEnter.append(\"g\").attr(\"class\", classLines); // Area\n\n      contextLineEnter.append(\"g\").attr(\"class\", classAreas); //-- Brush --//\n\n      context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? \"width\" : \"height\", config.axis_rotated ? $$.width2 : $$.height2);\n    }\n  };\n\n  c3_chart_internal_fn.updateBarForSubchart = function (durationForExit) {\n    var $$ = this;\n    $$.contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n    $$.contextBar.enter().append('path').attr(\"class\", $$.classBar.bind($$)).style(\"stroke\", 'none').style(\"fill\", $$.color);\n    $$.contextBar.style(\"opacity\", $$.initialOpacity.bind($$));\n    $$.contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n    (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n  };\n\n  c3_chart_internal_fn.updateLineForSubchart = function (durationForExit) {\n    var $$ = this;\n    $$.contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    $$.contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    $$.contextLine.style(\"opacity\", $$.initialOpacity.bind($$));\n    $$.contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n    (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr(\"d\", drawLineOnSub).style('opacity', 1);\n  };\n\n  c3_chart_internal_fn.updateAreaForSubchart = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    $$.contextArea.enter().append('path').attr(\"class\", $$.classArea.bind($$)).style(\"fill\", $$.color).style(\"opacity\", function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.contextArea.style(\"opacity\", 0);\n    $$.contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n    (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr(\"d\", drawAreaOnSub).style(\"fill\", this.color).style(\"opacity\", this.orgAreaOpacity);\n  };\n\n  c3_chart_internal_fn.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        drawAreaOnSub,\n        drawBarOnSub,\n        drawLineOnSub;\n    $$.context.style('visibility', config.subchart_show ? 'visible' : 'hidden'); // subchart\n\n    if (config.subchart_show) {\n      // reflect main chart to extent on subchart if zoomed\n      if (d3.event && d3.event.type === 'zoom') {\n        $$.brush.extent($$.x.orgDomain()).update();\n      } // update subchart elements if needed\n\n\n      if (withSubchart) {\n        // extent rect\n        if (!$$.brush.empty()) {\n          $$.brush.extent($$.x.orgDomain()).update();\n        } // setup drawer - MEMO: this must be called after axis updated\n\n\n        drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n        drawBarOnSub = $$.generateDrawBar(barIndices, true);\n        drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n        $$.updateBarForSubchart(duration);\n        $$.updateLineForSubchart(duration);\n        $$.updateAreaForSubchart(duration);\n        $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n        $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n        $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n      }\n    }\n  };\n\n  c3_chart_internal_fn.redrawForBrush = function () {\n    var $$ = this,\n        x = $$.x;\n    $$.redraw({\n      withTransition: false,\n      withY: $$.config.zoom_rescale,\n      withSubchart: false,\n      withUpdateXDomain: true,\n      withDimension: false\n    });\n    $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n  };\n\n  c3_chart_internal_fn.transformContext = function (withTransition, transitions) {\n    var $$ = this,\n        subXAxis;\n\n    if (transitions && transitions.axisSubX) {\n      subXAxis = transitions.axisSubX;\n    } else {\n      subXAxis = $$.context.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        subXAxis = subXAxis.transition();\n      }\n    }\n\n    $$.context.attr(\"transform\", $$.getTranslate('context'));\n    subXAxis.attr(\"transform\", $$.getTranslate('subx'));\n  };\n\n  c3_chart_internal_fn.getDefaultExtent = function () {\n    var $$ = this,\n        config = $$.config,\n        extent = isFunction(config.axis_x_extent) ? config.axis_x_extent($$.getXDomain($$.data.targets)) : config.axis_x_extent;\n\n    if ($$.isTimeSeries()) {\n      extent = [$$.parseDate(extent[0]), $$.parseDate(extent[1])];\n    }\n\n    return extent;\n  };\n\n  c3_chart_internal_fn.initText = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartTexts);\n    $$.mainText = $$.d3.selectAll([]);\n  };\n\n  c3_chart_internal_fn.updateTargetsForText = function (targets) {\n    var $$ = this,\n        mainTextUpdate,\n        mainTextEnter,\n        classChartText = $$.classChartText.bind($$),\n        classTexts = $$.classTexts.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainTextUpdate = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets).attr('class', function (d) {\n      return classChartText(d) + classFocus(d);\n    });\n    mainTextEnter = mainTextUpdate.enter().append('g').attr('class', classChartText).style('opacity', 0).style(\"pointer-events\", \"none\");\n    mainTextEnter.append('g').attr('class', classTexts);\n  };\n\n  c3_chart_internal_fn.updateText = function (durationForExit) {\n    var $$ = this,\n        config = $$.config,\n        barOrLineData = $$.barOrLineData.bind($$),\n        classText = $$.classText.bind($$);\n    $$.mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n    $$.mainText.enter().append('text').attr(\"class\", classText).attr('text-anchor', function (d) {\n      return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n    }).style(\"stroke\", 'none').style(\"fill\", function (d) {\n      return $$.color(d);\n    }).style(\"fill-opacity\", 0);\n    $$.mainText.text(function (d, i, j) {\n      return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n    });\n    $$.mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n  };\n\n  c3_chart_internal_fn.redrawText = function (xForText, yForText, forFlow, withTransition) {\n    return [(withTransition ? this.mainText.transition() : this.mainText).attr('x', xForText).attr('y', yForText).style(\"fill\", this.color).style(\"fill-opacity\", forFlow ? 0 : this.opacityForText.bind(this))];\n  };\n\n  c3_chart_internal_fn.getTextRect = function (text, cls, element) {\n    var dummy = this.d3.select('body').append('div').classed('c3', true),\n        svg = dummy.append(\"svg\").style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n        font = this.d3.select(element).style('font'),\n        rect;\n    svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : \"\", true).style('font', font).text(text).each(function () {\n      rect = this.getBoundingClientRect();\n    });\n    dummy.remove();\n    return rect;\n  };\n\n  c3_chart_internal_fn.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n    var $$ = this,\n        getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n        getBarPoints = $$.generateGetBarPoints(barIndices, false),\n        getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n        getter = forX ? $$.getXForText : $$.getYForText;\n    return function (d, i) {\n      var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n      return getter.call($$, getPoints(d, i), d, this);\n    };\n  };\n\n  c3_chart_internal_fn.getXForText = function (points, d, textElement) {\n    var $$ = this,\n        box = textElement.getBoundingClientRect(),\n        xPos,\n        padding;\n\n    if ($$.config.axis_rotated) {\n      padding = $$.isBarType(d) ? 4 : 6;\n      xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n    } else {\n      xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null) {\n      if (xPos > $$.width) {\n        xPos = $$.width - box.width;\n      } else if (xPos < 0) {\n        xPos = 4;\n      }\n    }\n\n    return xPos;\n  };\n\n  c3_chart_internal_fn.getYForText = function (points, d, textElement) {\n    var $$ = this,\n        box = textElement.getBoundingClientRect(),\n        yPos;\n\n    if ($$.config.axis_rotated) {\n      yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n    } else {\n      yPos = points[2][1];\n\n      if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n        yPos += box.height;\n\n        if ($$.isBarType(d) && $$.isSafari()) {\n          yPos -= 3;\n        } else if (!$$.isBarType(d) && $$.isChrome()) {\n          yPos += 3;\n        }\n      } else {\n        yPos += $$.isBarType(d) ? -3 : -6;\n      }\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null && !$$.config.axis_rotated) {\n      if (yPos < box.height) {\n        yPos = box.height;\n      } else if (yPos > this.height) {\n        yPos = this.height - 4;\n      }\n    }\n\n    return yPos;\n  };\n\n  c3_chart_internal_fn.initTitle = function () {\n    var $$ = this;\n    $$.title = $$.svg.append(\"text\").text($$.config.title_text).attr(\"class\", $$.CLASS.title);\n  };\n\n  c3_chart_internal_fn.redrawTitle = function () {\n    var $$ = this;\n    $$.title.attr(\"x\", $$.xForTitle.bind($$)).attr(\"y\", $$.yForTitle.bind($$));\n  };\n\n  c3_chart_internal_fn.xForTitle = function () {\n    var $$ = this,\n        config = $$.config,\n        position = config.title_position || 'left',\n        x;\n\n    if (position.indexOf('right') >= 0) {\n      x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n    } else if (position.indexOf('center') >= 0) {\n      x = ($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2;\n    } else {\n      // left\n      x = config.title_padding.left;\n    }\n\n    return x;\n  };\n\n  c3_chart_internal_fn.yForTitle = function () {\n    var $$ = this;\n    return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n  };\n\n  c3_chart_internal_fn.getTitlePadding = function () {\n    var $$ = this;\n    return $$.yForTitle() + $$.config.title_padding.bottom;\n  };\n\n  c3_chart_internal_fn.initTooltip = function () {\n    var $$ = this,\n        config = $$.config,\n        i;\n    $$.tooltip = $$.selectChart.style(\"position\", \"relative\").append(\"div\").attr('class', CLASS.tooltipContainer).style(\"position\", \"absolute\").style(\"pointer-events\", \"none\").style(\"display\", \"none\"); // Show tooltip if needed\n\n    if (config.tooltip_init_show) {\n      if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n        config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n\n        for (i = 0; i < $$.data.targets[0].values.length; i++) {\n          if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n            break;\n          }\n        }\n\n        config.tooltip_init_x = i;\n      }\n\n      $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n        return $$.addName(d.values[config.tooltip_init_x]);\n      }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n      $$.tooltip.style(\"top\", config.tooltip_init_position.top).style(\"left\", config.tooltip_init_position.left).style(\"display\", \"block\");\n    }\n  };\n\n  c3_chart_internal_fn.getTooltipSortFunction = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n      // if data are not grouped or if an order is specified\n      // for the tooltip values we sort them by their values\n      var order = config.tooltip_order;\n\n      if (order === undefined) {\n        order = config.data_order;\n      }\n\n      var valueOf = function valueOf(obj) {\n        return obj ? obj.value : null;\n      }; // if data are not grouped, we sort them by their value\n\n\n      if (isString(order) && order.toLowerCase() === 'asc') {\n        return function (a, b) {\n          return valueOf(a) - valueOf(b);\n        };\n      } else if (isString(order) && order.toLowerCase() === 'desc') {\n        return function (a, b) {\n          return valueOf(b) - valueOf(a);\n        };\n      } else if (isFunction(order)) {\n        // if the function is from data_order we need\n        // to wrap the returned function in order to format\n        // the sorted value to the expected format\n        var sortFunction = order;\n\n        if (config.tooltip_order === undefined) {\n          sortFunction = function sortFunction(a, b) {\n            return order(a ? {\n              id: a.id,\n              values: [a]\n            } : null, b ? {\n              id: b.id,\n              values: [b]\n            } : null);\n          };\n        }\n\n        return sortFunction;\n      } else if (isArray(order)) {\n        return function (a, b) {\n          return order.indexOf(a.id) - order.indexOf(b.id);\n        };\n      }\n    } else {\n      // if data are grouped, we follow the order of grouped targets\n      var ids = $$.orderTargets($$.data.targets).map(function (i) {\n        return i.id;\n      }); // if it was either asc or desc we need to invert the order\n      // returned by orderTargets\n\n      if ($$.isOrderAsc() || $$.isOrderDesc()) {\n        ids = ids.reverse();\n      }\n\n      return function (a, b) {\n        return ids.indexOf(a.id) - ids.indexOf(b.id);\n      };\n    }\n  };\n\n  c3_chart_internal_fn.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n    var $$ = this,\n        config = $$.config,\n        titleFormat = config.tooltip_format_title || defaultTitleFormat,\n        nameFormat = config.tooltip_format_name || function (name) {\n      return name;\n    },\n        valueFormat = config.tooltip_format_value || defaultValueFormat,\n        text,\n        i,\n        title,\n        value,\n        name,\n        bgcolor;\n\n    var tooltipSortFunction = this.getTooltipSortFunction();\n\n    if (tooltipSortFunction) {\n      d.sort(tooltipSortFunction);\n    }\n\n    for (i = 0; i < d.length; i++) {\n      if (!(d[i] && (d[i].value || d[i].value === 0))) {\n        continue;\n      }\n\n      if (!text) {\n        title = sanitise(titleFormat ? titleFormat(d[i].x) : d[i].x);\n        text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + \"</th></tr>\" : \"\");\n      }\n\n      value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n\n      if (value !== undefined) {\n        // Skip elements when their name is set to null\n        if (d[i].name === null) {\n          continue;\n        }\n\n        name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n        bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n        text += \"<tr class='\" + $$.CLASS.tooltipName + \"-\" + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n        text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + \"</td>\";\n        text += \"<td class='value'>\" + value + \"</td>\";\n        text += \"</tr>\";\n      }\n    }\n\n    return text + \"</table>\";\n  };\n\n  c3_chart_internal_fn.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n    var forArc = $$.hasArcType(),\n        mouse = d3.mouse(element); // Determin tooltip position\n\n    if (forArc) {\n      tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n      tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n    } else {\n      svgLeft = $$.getSvgLeft(true);\n\n      if (config.axis_rotated) {\n        tooltipLeft = svgLeft + mouse[0] + 100;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = $$.x(dataToShow[0].x) + 20;\n      } else {\n        tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = mouse[1] + 15;\n      }\n\n      if (tooltipRight > chartRight) {\n        // 20 is needed for Firefox to keep tooltip width\n        tooltipLeft -= tooltipRight - chartRight + 20;\n      }\n\n      if (tooltipTop + tHeight > $$.currentHeight) {\n        tooltipTop -= tHeight + 30;\n      }\n    }\n\n    if (tooltipTop < 0) {\n      tooltipTop = 0;\n    }\n\n    return {\n      top: tooltipTop,\n      left: tooltipLeft\n    };\n  };\n\n  c3_chart_internal_fn.showTooltip = function (selectedData, element) {\n    var $$ = this,\n        config = $$.config;\n    var tWidth, tHeight, position;\n    var forArc = $$.hasArcType(),\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        positionFunction = config.tooltip_position || c3_chart_internal_fn.tooltipPosition;\n\n    if (dataToShow.length === 0 || !config.tooltip_show) {\n      return;\n    }\n\n    $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style(\"display\", \"block\"); // Get tooltip dimensions\n\n    tWidth = $$.tooltip.property('offsetWidth');\n    tHeight = $$.tooltip.property('offsetHeight');\n    position = positionFunction.call(this, dataToShow, tWidth, tHeight, element); // Set tooltip\n\n    $$.tooltip.style(\"top\", position.top + \"px\").style(\"left\", position.left + 'px');\n  };\n\n  c3_chart_internal_fn.hideTooltip = function () {\n    this.tooltip.style(\"display\", \"none\");\n  };\n\n  c3_chart_internal_fn.setTargetType = function (targetIds, type) {\n    var $$ = this,\n        config = $$.config;\n    $$.mapToTargetIds(targetIds).forEach(function (id) {\n      $$.withoutFadeIn[id] = type === config.data_types[id];\n      config.data_types[id] = type;\n    });\n\n    if (!targetIds) {\n      config.data_type = type;\n    }\n  };\n\n  c3_chart_internal_fn.hasType = function (type, targets) {\n    var $$ = this,\n        types = $$.config.data_types,\n        has = false;\n    targets = targets || $$.data.targets;\n\n    if (targets && targets.length) {\n      targets.forEach(function (target) {\n        var t = types[target.id];\n\n        if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n          has = true;\n        }\n      });\n    } else if (Object.keys(types).length) {\n      Object.keys(types).forEach(function (id) {\n        if (types[id] === type) {\n          has = true;\n        }\n      });\n    } else {\n      has = $$.config.data_type === type;\n    }\n\n    return has;\n  };\n\n  c3_chart_internal_fn.hasArcType = function (targets) {\n    return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n  };\n\n  c3_chart_internal_fn.isLineType = function (d) {\n    var config = this.config,\n        id = isString(d) ? d : d.id;\n    return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n  };\n\n  c3_chart_internal_fn.isStepType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  c3_chart_internal_fn.isSplineType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  c3_chart_internal_fn.isAreaType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  c3_chart_internal_fn.isBarType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'bar';\n  };\n\n  c3_chart_internal_fn.isScatterType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'scatter';\n  };\n\n  c3_chart_internal_fn.isPieType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'pie';\n  };\n\n  c3_chart_internal_fn.isGaugeType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'gauge';\n  };\n\n  c3_chart_internal_fn.isDonutType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'donut';\n  };\n\n  c3_chart_internal_fn.isArcType = function (d) {\n    return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n  };\n\n  c3_chart_internal_fn.lineData = function (d) {\n    return this.isLineType(d) ? [d] : [];\n  };\n\n  c3_chart_internal_fn.arcData = function (d) {\n    return this.isArcType(d.data) ? [d] : [];\n  };\n  /* not used\n   function scatterData(d) {\n   return isScatterType(d) ? d.values : [];\n   }\n   */\n\n\n  c3_chart_internal_fn.barData = function (d) {\n    return this.isBarType(d) ? d.values : [];\n  };\n\n  c3_chart_internal_fn.lineOrScatterData = function (d) {\n    return this.isLineType(d) || this.isScatterType(d) ? d.values : [];\n  };\n\n  c3_chart_internal_fn.barOrLineData = function (d) {\n    return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n  };\n\n  c3_chart_internal_fn.isInterpolationType = function (type) {\n    return ['linear', 'linear-closed', 'basis', 'basis-open', 'basis-closed', 'bundle', 'cardinal', 'cardinal-open', 'cardinal-closed', 'monotone'].indexOf(type) >= 0;\n  };\n\n  c3_chart_internal_fn.isSafari = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n  };\n\n  c3_chart_internal_fn.isChrome = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Chrome') >= 0;\n  };\n\n  c3_chart_internal_fn.initZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        startEvent;\n    $$.zoom = d3.behavior.zoom().on(\"zoomstart\", function () {\n      startEvent = d3.event.sourceEvent;\n      $$.zoom.altDomain = d3.event.sourceEvent.altKey ? $$.x.orgDomain() : null;\n      config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n    }).on(\"zoom\", function () {\n      $$.redrawForZoom.call($$);\n    }).on('zoomend', function () {\n      var event = d3.event.sourceEvent; // if click, do nothing. otherwise, click interaction will be canceled.\n\n      if (event && startEvent.clientX === event.clientX && startEvent.clientY === event.clientY) {\n        return;\n      }\n\n      $$.redrawEventRect();\n      $$.updateZoom();\n      config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n    });\n\n    $$.zoom.scale = function (scale) {\n      return config.axis_rotated ? this.y(scale) : this.x(scale);\n    };\n\n    $$.zoom.orgScaleExtent = function () {\n      var extent = config.zoom_extent ? config.zoom_extent : [1, 10];\n      return [extent[0], Math.max($$.getMaxDataCount() / extent[1], extent[1])];\n    };\n\n    $$.zoom.updateScaleExtent = function () {\n      var ratio = diffDomain($$.x.orgDomain()) / diffDomain($$.getZoomDomain()),\n          extent = this.orgScaleExtent();\n      this.scaleExtent([extent[0] * ratio, extent[1] * ratio]);\n      return this;\n    };\n  };\n\n  c3_chart_internal_fn.getZoomDomain = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n        max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n    return [min, max];\n  };\n\n  c3_chart_internal_fn.updateZoom = function () {\n    var $$ = this,\n        z = $$.config.zoom_enabled ? $$.zoom : function () {};\n    $$.main.select('.' + CLASS.zoomRect).call(z).on(\"dblclick.zoom\", null);\n    $$.main.selectAll('.' + CLASS.eventRect).call(z).on(\"dblclick.zoom\", null);\n  };\n\n  c3_chart_internal_fn.redrawForZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        zoom = $$.zoom,\n        x = $$.x;\n\n    if (!config.zoom_enabled) {\n      return;\n    }\n\n    if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n      return;\n    }\n\n    if (d3.event.sourceEvent.type === 'mousemove' && zoom.altDomain) {\n      x.domain(zoom.altDomain);\n      zoom.scale(x).updateScaleExtent();\n      return;\n    }\n\n    if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n      x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n    }\n\n    $$.redraw({\n      withTransition: false,\n      withY: config.zoom_rescale,\n      withSubchart: false,\n      withEventRect: false,\n      withDimension: false\n    });\n\n    if (d3.event.sourceEvent.type === 'mousemove') {\n      $$.cancelClick = true;\n    }\n\n    config.zoom_onzoom.call($$.api, x.orgDomain());\n  };\n\n  return c3;\n});","map":{"version":3,"sources":["C:/Users/007ac/Desktop/prace/backend/demo/frontend/node_modules/c3/c3.js"],"names":["global","factory","exports","module","define","amd","c3","CLASS","target","chart","chartLine","chartLines","chartBar","chartBars","chartText","chartTexts","chartArc","chartArcs","chartArcsTitle","chartArcsBackground","chartArcsGaugeUnit","chartArcsGaugeMax","chartArcsGaugeMin","selectedCircle","selectedCircles","eventRect","eventRects","eventRectsSingle","eventRectsMultiple","zoomRect","brush","focused","defocused","region","regions","title","tooltipContainer","tooltip","tooltipName","shape","shapes","line","lines","bar","bars","circle","circles","arc","arcLabelLine","arcs","area","areas","empty","text","texts","gaugeValue","grid","gridLines","xgrid","xgrids","xgridLine","xgridLines","xgridFocus","ygrid","ygrids","ygridLine","ygridLines","axis","axisX","axisXLabel","axisY","axisYLabel","axisY2","axisY2Label","legendBackground","legendItem","legendItemEvent","legendItemTile","legendItemHidden","legendItemFocused","dragarea","EXPANDED","SELECTED","INCLUDED","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","instance","Constructor","TypeError","inherits","subClass","superClass","Object","create","value","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","self","call","ReferenceError","isValue","v","isFunction","o","isArray","Array","isString","isUndefined","isDefined","ceil10","Math","ceil","asHalfPixel","n","diffDomain","d","isEmpty","length","keys","notEmpty","c3_chart_internal_fn","getOption","options","key","defaultValue","hasValue","dict","found","forEach","sanitise","str","replace","getPathBox","path","box","getBoundingClientRect","items","pathSegList","getItem","minX","x","minY","min","y","width","height","c3_axis_fn","c3_axis_internal_fn","AxisInternal","component","params","internal","d3","scale","linear","range","orient","innerTickSize","outerTickSize","withOuterTick","tickPadding","tickValues","tickFormat","tickArguments","tickOffset","tickCulling","tickCentered","tickTextCharSize","tickTextRotate","tickLength","generateAxis","selection","attr","scaleExtent","domain","start","stop","generateTicks","i","ticks","apply","push","unshift","copyScale","newScale","copy","isCategory","textFormatted","formatted","updateRange","rangeExtent","updateTickTextCharSize","tick","size","h","w","select","each","undefined","transitionise","withoutTransition","transition","isVertical","tspanData","splitted","tickMultiline","splitTickText","concat","tickMultilineMax","ellipsify","map","s","index","tickText","maxWidth","tickWidth","subtext","spaceIndex","textWidth","toString","split","charAt","substr","slice","max","ellipsified","remaining","available","padEnd","updateTickLength","lineY2","tickPosition","textY","rotate","textTransform","textTextAnchor","tspanDx","sin","PI","tspanDy","dy","g","scale0","__chart__","scale1","selectAll","data","tickEnter","enter","insert","style","tickExit","exit","remove","tickUpdate","tickTransform","tickX","tickY","append","lineUpdate","textUpdate","tspanUpdate","pathUpdate","rangeBand","dx","arguments","top","right","bottom","left","format","isCentered","tickInterval","interval","node","getTotalLength","Infinity","culling","Axis","_Component","owner","fn","_this","getPrototypeOf","Component","init","$$","config","main","axes","axis_x_inner","clipPathForXAxis","getTranslate","axis_x_show","axis_rotated","textAnchorForXAxisLabel","bind","axis_y_inner","clipPathForYAxis","axis_y_show","textAnchorForYAxisLabel","y2","axis_y2_show","textAnchorForY2AxisLabel","getXAxis","withoutRotateTickText","axisParams","isCategorized","axis_x_tick_multiline","Number","axis_x_tick_multilineMax","axis_x_tick_width","axis_x_tick_rotate","isTimeSeries","parseDate","axis_x_tick_centered","axis_x_tick_culling","updateXAxisTickValues","targets","axis_x_tick_fit","axis_x_tick_count","generateTickValues","mapTargetsToUniqueXs","xAxis","subXAxis","getYAxis","axis_y_tick_rotate","isTimeSeriesY","time","axis_y_tick_time_value","axis_y_tick_time_interval","getId","id","data_axes","getXAxisTickFormat","defaultAxisTimeFormat","categoryName","toFixed","axis_x_tick_format","date","axisTimeFormat","getTickValues","getXAxisTickValues","axis_x_tick_values","getYAxisTickValues","axis_y_tick_values","yAxis","getY2AxisTickValues","axis_y2_tick_values","y2Axis","getLabelOptionByAxisId","axisId","option","axis_y_label","axis_y2_label","axis_x_label","getLabelText","setLabelText","getLabelPosition","defaultPosition","position","isInner","indexOf","isOuter","isLeft","isCenter","isRight","isTop","isMiddle","isBottom","getXAxisLabelPosition","getYAxisLabelPosition","getY2AxisLabelPosition","getLabelPositionById","textForXAxisLabel","textForYAxisLabel","textForY2AxisLabel","xForAxisLabel","forHorizontal","dxForAxisLabel","textAnchorForAxisLabel","xForXAxisLabel","xForYAxisLabel","xForY2AxisLabel","dxForXAxisLabel","dxForYAxisLabel","dxForY2AxisLabel","dyForXAxisLabel","getMaxTickWidth","axis_x_height","dyForYAxisLabel","dyForY2AxisLabel","axis_y2_inner","withoutRecompute","targetsToShow","dummy","svg","currentMaxTickWidths","filterTargetsToShow","getYDomain","yOrient","axis_y_tick_format","yAxisTickValues","y2Orient","axis_y2_tick_format","y2AxisTickValues","getXDomain","xOrient","xAxisTickFormat","xAxisTickValues","classed","updateLabels","withTransition","getPadding","padding","domainLength","p","unit","convertPixelsToAxisPadding","pixels","values","tickCount","forTimeSeries","targetCount","end","count","tickValue","Date","sort","a","b","generateTransitions","duration","axisSubX","subx","redraw","transitions","isHidden","version","c3_chart_fn","componentKey","Chart","ChartInternal","loadConfig","beforeInit","afterInit","bindThis","argThis","api","window","require","getDefaultConfig","cache","generate","initParams","data_url","convertUrlToData","data_mimeType","data_headers","data_keys","initWithData","data_json","convertJsonToData","data_rows","convertRowsToData","data_columns","convertColumnsToData","Error","clipId","clipIdForXAxis","clipIdForYAxis","clipIdForGrid","clipIdForSubchart","clipPath","getClipPath","clipPathForGrid","clipPathForSubchart","dragStart","dragging","flowing","cancelClick","mouseover","transiting","color","generateColor","levelColor","generateLevelColor","dataTimeFormat","data_xLocaltime","utc","axis_x_localtime","multi","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","hiddenTargetIds","hiddenLegendIds","focusedTargetIds","defocusedTargetIds","subXOrient","isLegendRight","legend_position","isLegendInset","isLegendTop","legend_inset_anchor","isLegendLeft","legendStep","legendItemWidth","legendItemHeight","rotated_padding_left","rotated_padding_right","rotated_padding_top","withoutFadeIn","intervalForObserveInserted","initChartElements","initBar","initLine","initArc","initGauge","initText","defs","binding","initPie","initBrush","initZoom","bindto","selectChart","document","createElement","observeInserted","html","xs","convertDataToTargets","data_filter","filter","data_hide","addHiddenTargetIds","mapToIds","legend_hide","addHiddenLegendIds","updateSizes","updateScales","extent","subX","subY","subY2","orgXDomain","zoom_enabled","zoom","on","onmouseover","onmouseout","svg_classname","clipChart","appendClip","clipXAxis","clipYAxis","clipGrid","clipSubchart","updateSvgSize","initSubchart","initTooltip","initLegend","initTitle","initRegion","initGrid","grid_lines_front","initGridLines","initEventRect","zoom_privileged","axis_x_extent","getDefaultExtent","updateTargets","updateDimension","oninit","withTransform","withUpdateXDomain","withUpdateOrgXDomain","withTransitionForAxis","bindResize","element","smoothLines","el","type","x1","x2","y1","legendHeight","legend","getLegendHeight","legendWidth","getLegendWidth","legendHeightForBottom","hasArc","hasArcType","xAxisHeight","getHorizontalAxisHeight","subchartHeight","subchart_show","subchart_size_height","currentWidth","getCurrentWidth","currentHeight","getCurrentHeight","margin","getCurrentPaddingTop","getCurrentPaddingRight","getCurrentPaddingBottom","getCurrentPaddingLeft","margin2","NaN","margin3","updateSizeForLegend","width2","height2","arcWidth","arcHeight","hasType","gauge_fullCircle","getGaugeLabelHeight","updateRadius","radiusExpanded","updateTargetsForText","updateTargetsForBar","updateTargetsForLine","updateTargetsForArc","updateTargetsForSubchart","showTargets","isTargetToShow","transition_duration","areaIndices","getShapeIndices","isAreaType","barIndices","isBarType","lineIndices","isLineType","withY","withSubchart","withTransitionForExit","withTrimXDomain","withLegend","withEventRect","withDimension","withUpdateXAxis","hideAxis","drawArea","drawBar","drawLine","xForText","yForText","durationForExit","durationForAxis","waitForDraw","flow","intervalForCulling","xDomainForZoom","xv","cx","cy","legend_show","updateLegend","updateXDomain","zoom_rescale","orgDomain","axis_y_tick_count","axis_y2_tick_count","axis_x_tick_culling_max","e","generateDrawArea","generateDrawBar","generateDrawLine","generateXYForText","updateXgridFocus","data_empty_label_text","updateGrid","updateRegion","updateBar","updateLine","updateArea","updateCircle","hasDataLabel","updateText","redrawTitle","redrawArc","redrawSubchart","interaction_enabled","redrawEventRect","updateZoom","updateCircleY","circleY","circleX","generateFlow","isTabVisible","transitionsToWait","redrawBar","redrawLine","redrawArea","redrawCircle","redrawText","redrawRegion","redrawGrid","generateWait","t","add","onrendered","updateAndRedraw","withTransitionForTransform","transformAll","redrawWithoutRescale","axis_x_type","isCustomX","data_x","data_xs","axis_y_type","initialOpacity","initialOpacityForCircle","opacityForCircle","isPointShouldBeShown","point_show","opacity","isScatterType","opacityForText","xx","axis_x_categories","yv","yScale","subxx","transformMain","transformContext","transformLegend","getXAxisClipX","getXAxisClipY","getXAxisClipWidth","getXAxisClipHeight","getYAxisClipX","getYAxisClipY","getYAxisClipWidth","getYAxisClipHeight","withoutAxis","observer","MutationObserver","console","error","mutations","mutation","previousSibling","disconnect","setInterval","parentNode","clearInterval","update","observe","attributes","childList","characterData","resizeFunction","generateResize","onresize","resize_auto","resizeTimeout","clearTimeout","setTimeout","flush","onresized","resizeIfElementDisplayed","offsetParent","attachEvent","addEventListener","wrapper","resizeFunctions","callResizeFunctions","f","splice","endall","callback","timer","done","parsedDate","data_xFormat","parse","isNaN","hidden","mozHidden","msHidden","webkitHidden","Function","oThis","aArgs","fToBind","fNOP","fBound","SVGPathSeg","typeAsLetter","owningPathSegList","pathSegType","pathSegTypeAsLetter","_owningPathSegList","classname","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_REL","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","_segmentChanged","segmentChanged","SVGPathSegClosePath","_asPathString","clone","SVGPathSegMovetoAbs","_x","_y","defineProperty","get","set","SVGPathSegMovetoRel","SVGPathSegLinetoAbs","SVGPathSegLinetoRel","SVGPathSegCurvetoCubicAbs","_x1","_y1","_x2","_y2","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegArcAbs","r1","r2","angle","largeArcFlag","sweepFlag","_r1","_r2","_angle","_largeArcFlag","_sweepFlag","SVGPathSegArcRel","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathElement","createSVGPathSegClosePath","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoRel","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","getPathSegAtLength","distance","isFinite","measurementElement","createElementNS","setAttribute","getAttribute","lastPathSegment","numberOfItems","removeItem","SVGPathSegList","pathElement","_pathElement","_list","_parsePath","_mutationObserverConfig","_pathElementMutationObserver","_updateListFromPathMutations","_checkPathSynchronizedToList","_pathSegList","takeRecords","mutationRecords","hasPathMutations","record","attributeName","_writeListToPath","_pathSegArrayAsString","pathSeg","clear","initialize","newItem","_checkValidIndex","insertItemBefore","replaceItem","item","appendItem","pathSegArray","string","first","Builder","appendSegment","Source","_string","_currentIndex","_endIndex","_previousCommand","_skipOptionalSpaces","_isCurrentSpace","character","_skipOptionalSpacesOrDelimiter","hasMoreData","peekSegmentType","lookahead","_pathSegTypeFromChar","_nextCommandHelper","previousCommand","initialCommandIsMoveTo","command","_parseNumber","exponent","integer","frac","decimal","sign","expsign","startIndex","startIntPartIndex","scanIntPartIndex","multiplier","number","pow","_parseArcFlag","flag","flagChar","parseSegment","points","arcAngle","arcLarge","arcSweep","builder","source","String","targetLength","padString","repeat","labels","axis_x_max","axis_y_max","axis_y2_max","axis_x_min","axis_y_min","axis_y2_min","category","categories","resize","size_width","size_height","destroy","detachEvent","removeEventListener","targetIds","shown","targetId","names","clearLegendItemTextBoxCache","updateDataAttributes","colors","args","notfoundIds","orgDataCount","getMaxDataCount","dataCount","baseTarget","baseValue","tail","diff","to","json","rows","columns","j","getOtherTargetX","missing","translateX","scaleX","transform","flowIndex","flowLength","flowStart","getValueOnIndex","flowEnd","durationForFlow","wait","mainRegion","mainText","mainBar","mainLine","mainArea","mainCircle","updateXGrid","hideXGridFocus","ease","isRegionOnX","xgridAttr","regionX","regionWidth","focus","candidates","mapToTargetIds","selectorTargets","revert","defocus","expandArc","toggleFocusLegend","unexpandArc","showLegend","isLegendToShow","selectorLegends","grids","grid_x_lines","removeGridLines","grid_y_lines","groups","data_groups","show","hide","hideLegend","load","addXs","classes","data_classes","data_colors","hasCaches","cacheIds","getCaches","unload","loadFromArgs","ids","c","selected","merge","getTargetSelectorSuffix","__data__","indices","resetOther","data_selection_enabled","toggle","getToggle","isTargetId","data_selection_grouped","isTargetIndex","isSelected","data_selection_isselectable","unselect","removeHiddenTargetIds","that","mouse","isMultipleX","getYScale","getIndexByX","dispatchEvent","tooltip_onshow","tooltip_onhide","transformTo","optionsForRedraw","setTargetType","updateTargetX","updateTargetXs","zoom_onzoom","enable","enabled","unzoom","zoom_x_max","zoom_x_min","pie","layout","reduce","getOrderFunction","gauge_width","donut_width","gaugeArcWidth","gauge_arcs_minWidth","radius","innerRadiusRatio","innerRadius","updateArc","svgArc","getSvgArc","svgArcExpanded","getSvgArcExpanded","svgArcExpandedSub","updateAngle","gMin","gMax","gTic","gValue","startAngle","endAngle","isGaugeType","gauge_min","gauge_max","gauge_startingAngle","hasGaugeType","singleArcWidth","outerRadius","newArc","withoutUpdate","updated","centroid","rate","expandWidth","getArc","force","isArcType","transformForArcLabel","ratio","translate","hasGauge","sqrt","donut_label_ratio","pie_label_ratio","cos","abs","getArcRatio","whole","convertToArcData","addName","textForArcLabel","shouldShowArcLabel","meetsArcLabelThreshold","getArcLabelFormat","defaultArcValueFormat","textForGaugeMinMax","isMax","getGaugeLabelExtents","shouldExpand","expandDuration","isDonutType","donut_expand_duration","gauge_expand_duration","isPieType","pie_expand_duration","donut_expand","gauge_expand","pie_expand","shouldShow","donut_label_show","pie_label_show","threshold","donut_label_threshold","pie_label_threshold","pie_label_format","gauge_label_format","donut_label_format","gauge_label_extents","getArcTitle","donut_title","mainPieUpdate","mainPieEnter","classChartArc","classArcs","classFocus","mainArc","backgroundArc","mainArcLabelLine","arcData","classArc","_current","color_pattern","gauge_labelLine_show","lineLength","lineThickness","innerLineLength","lineAngle","arcInnerRadius","linePositioningAngle","data_onmouseover","selectedData","showTooltip","revertLegend","hideTooltip","data_onmouseout","toggleShape","data_onclick","attrTween","interpolate","interpolated","round","d1","gauge_label_show","gauge_units","addCache","cloneTarget","generateClass","prefix","classText","classTexts","classShape","classShapes","classLine","classLines","classCircle","classCircles","classBar","classBars","classArea","classAreas","classRegion","classEvent","classTarget","additionalClassSuffix","additionalClass","classFocused","classDefocused","classChartText","classChartLine","classChartBar","selectorTarget","selectorLegend","isIE9","navigator","appVersion","toLowerCase","URL","parent","getAxisClipX","getAxisClipY","getAxisClipWidth","getAxisClipHeight","pattern","category10","data_color","color_threshold","asValue","padding_left","padding_right","padding_top","padding_bottom","zoom_extent","zoom_onzoomstart","zoom_onzoomend","interaction_brighten","data_xSort","data_idConverter","data_names","data_type","data_types","data_labels","data_order","data_regions","data_selection_multiple","data_selection_draggable","data_onselected","data_onunselected","subchart_axis_x_show","subchart_onbrush","legend_inset_x","legend_inset_y","legend_inset_step","legend_item_onclick","legend_item_onmouseover","legend_item_onmouseout","legend_equally","legend_padding","legend_item_tile_width","legend_item_tile_height","axis_x_tick_outer","axis_x_padding","axis_y_inverted","axis_y_center","axis_y_tick_outer","axis_y_padding","axis_y_default","axis_y2_inverted","axis_y2_center","axis_y2_tick_outer","axis_y2_padding","axis_y2_default","grid_x_show","grid_x_type","grid_y_show","grid_y_ticks","grid_focus_show","point_r","point_sensitivity","point_focus_expand_enabled","point_focus_expand_r","point_select_r","line_connectNull","line_step_type","bar_width","bar_width_ratio","bar_width_max","bar_zerobased","bar_space","area_zerobased","area_above","spline_interpolation_type","tooltip_show","tooltip_grouped","tooltip_order","tooltip_format_title","tooltip_format_name","tooltip_format_value","tooltip_position","tooltip_contents","defaultTitleFormat","defaultValueFormat","getTooltipContent","tooltip_init_show","tooltip_init_x","tooltip_init_position","title_text","title_padding","title_position","additionalConfig","this_config","read","find","shift","url","mimeType","headers","req","xhr","header","dataResponse","response","responseText","responseURL","status","statusText","JSON","convertTsvToData","convertCsvToData","convertXsvToData","xsv","parser","parseRows","csv","tsv","new_rows","targetKeys","new_row","findValueInJson","object","pathArray","k","newRows","newRow","appendXs","isNotX","isX","xKey","getXKey","rawX","generateTargetX","getOtherTargetXs","getXValuesOfXKey","convertedId","id_org","v1","v2","hasNegativeValue","hasNegativeValueInTargets","hasPositiveValue","hasPositiveValueInTargets","xValues","filterByX","getXValue","idsForX","hasMultipleX","name","valueOnIndex","updateXs","getPrevX","getNextX","getMaxDataCountTarget","maxTarget","getEdgeX","hasTarget","removeHiddenLegendIds","getValuesAsIdKeyed","ys","checkValueInTargets","checker","isOrderDesc","isOrderAsc","orderAsc","orderDesc","t1","t2","reducer","t1Sum","t2Sum","order","orderTargets","fct","reverse","filterRemoveNull","filterByXDomain","xDomain","getDataLabelLength","lengths","paddingCoef","dataLabelFormat","isNoneArc","isArc","findSameXOfValues","targetX","sames","findClosestFromTargets","pos","findClosest","minDist","closest","isWithinBar","dist","xIndex","yIndex","convertValuesToStep","converted","attrs","current","types","getYDomainMin","baseId","idsInGroup","getYDomainMax","targetsByAxisId","yTargets","yMin","yMax","yDomainMin","yDomainMax","center","yDomainAbs","isAllPositive","isAllNegative","isZeroBased","isInverted","showHorizontalDataLabel","showVerticalDataLabel","getXDomainMin","getXDomainMax","getXDomainPadding","maxDataCount","paddingLeft","paddingRight","firstX","lastX","getTime","withTrim","updateScaleExtent","trimXDomain","zoomDomain","getZoomDomain","drag","sx","sy","mx","my","maxX","maxY","altDomain","isIncluded","_w","_h","isWithin","togglePoint","togglePath","dragstart","dragend","getYFormat","forArc","formatForY","yFormat","formatForY2","y2Format","defaultFormat","xgridData","generateGridData","updateYGrid","gridValues","gridTextAnchor","gridTextDx","xGridTextX","yGridTextX","showXGridFocus","dataToShow","focusEl","gridData","firstYear","lastYear","tickNum","getFullYear","getGridFilterToRemove","param","forX","toRemove","toShow","eventRectUpdate","maxDataCountTarget","generateEventRectsForMultipleXs","updateEventRect","datum","generateEventRectsForSingleX","rectW","rectX","prevX","nextX","thisX","getEventRectWidth","eventRectEnter","expandCircles","expandBars","unexpandCircles","unexpandBars","isStepType","isWithinShape","behavior","origin","mouseout","sameXData","selector","event","createEvent","initMouseEvent","legendItemTextBox","legendHasRendered","updateLegendWithDefaults","insetLegendPosition","updateLegendStep","step","updateLegendItemWidth","updateLegendItemHeight","opacityForLegend","opacityForUnfocusedLegend","xForLegend","xForLegendText","xForLegendRect","yForLegend","yForLegendText","yForLegendRect","x1ForLegendTile","x2ForLegendTile","yForLegendTile","paddingTop","maxHeight","posMin","tileWidth","l","totalLength","offsets","widths","heights","margins","steps","rects","tiles","background","getTextBox","textElement","getTextRect","textContent","updatePositions","reset","isLast","itemWidth","itemHeight","itemLength","areaLength","maxLength","updateValues","withoutStep","altKey","parentData","regionY","regionHeight","xPos","yPos","getScale","forTimeseries","getX","offset","_scale","raw","getY","getSubYScale","forInit","xMin","xMax","subXMin","subXMax","subYMin","subYMax","selectPoint","r","pointSelectR","unselectPoint","selectPath","rgb","brighter","unselectPath","nodeName","mainBarUpdate","mainBarEnter","barData","random","getBarW","barTargetsNum","getBars","isSub","getPoints","generateGetBarPoints","indexX","indexY","__max__","barW","barX","getShapeX","barY","getShapeY","barOffset","getShapeOffset","barSpaceOffset","y0","posX","posY","seg0","seg1","ex","ey","typeFilter","targetsNum","isWithinStep","isWithinCircle","getInterpolate","interpolation","isInterpolationType","isSplineType","mainLineUpdate","mainLineEnter","lineData","generateGetLinePoints","yScaleGetter","xValue","yValue","defined","x0","lineWithRegions","lineTargetsNum","lineOffset","_regions","prev","sWithRegion","xp","yp","dd","diffx2","xOffset","isWithinRegions","generateM","d0","x_diff","xv0","xv1","orgAreaOpacity","generateGetAreaPoints","value0","getAreaBaseValue","value1","areaTargetsNum","areaOffset","lineOrScatterData","pointR","getCircles","pointExpandedR","d3_this","getParentWidth","getParentHeight","getTitlePadding","getAxisWidthByAxisId","defaultPadding","legendWidthOnRight","getParentRectValue","tagName","offsetWidth","getSvgLeft","hasLeftAxisRect","leftAxisClass","leftAxis","svgRect","chartRect","svgLeft","redrawForBrush","context","visibility","contextLineEnter","contextLineUpdate","contextBarEnter","contextBarUpdate","updateBarForSubchart","contextBar","redrawBarForSubchart","drawBarOnSub","updateLineForSubchart","contextLine","redrawLineForSubchart","drawLineOnSub","updateAreaForSubchart","contextArea","redrawAreaForSubchart","drawAreaOnSub","mainTextUpdate","mainTextEnter","barOrLineData","forFlow","cls","font","rect","getAreaPoints","getBarPoints","getLinePoints","getter","getXForText","getYForText","isSafari","isChrome","xForTitle","yForTitle","getTooltipSortFunction","valueOf","sortFunction","titleFormat","nameFormat","valueFormat","bgcolor","tooltipSortFunction","tooltipPosition","tWidth","tHeight","tooltipLeft","tooltipRight","tooltipTop","chartRight","positionFunction","property","has","ua","userAgent","startEvent","sourceEvent","redrawForZoom","clientX","clientY","orgScaleExtent","z"],"mappings":"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","sourcesContent":["/* @license C3.js v0.4.24 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.c3 = factory());\n}(this, (function () { 'use strict';\n\n    var CLASS = {\n        target: 'c3-target',\n        chart: 'c3-chart',\n        chartLine: 'c3-chart-line',\n        chartLines: 'c3-chart-lines',\n        chartBar: 'c3-chart-bar',\n        chartBars: 'c3-chart-bars',\n        chartText: 'c3-chart-text',\n        chartTexts: 'c3-chart-texts',\n        chartArc: 'c3-chart-arc',\n        chartArcs: 'c3-chart-arcs',\n        chartArcsTitle: 'c3-chart-arcs-title',\n        chartArcsBackground: 'c3-chart-arcs-background',\n        chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n        chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n        chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n        selectedCircle: 'c3-selected-circle',\n        selectedCircles: 'c3-selected-circles',\n        eventRect: 'c3-event-rect',\n        eventRects: 'c3-event-rects',\n        eventRectsSingle: 'c3-event-rects-single',\n        eventRectsMultiple: 'c3-event-rects-multiple',\n        zoomRect: 'c3-zoom-rect',\n        brush: 'c3-brush',\n        focused: 'c3-focused',\n        defocused: 'c3-defocused',\n        region: 'c3-region',\n        regions: 'c3-regions',\n        title: 'c3-title',\n        tooltipContainer: 'c3-tooltip-container',\n        tooltip: 'c3-tooltip',\n        tooltipName: 'c3-tooltip-name',\n        shape: 'c3-shape',\n        shapes: 'c3-shapes',\n        line: 'c3-line',\n        lines: 'c3-lines',\n        bar: 'c3-bar',\n        bars: 'c3-bars',\n        circle: 'c3-circle',\n        circles: 'c3-circles',\n        arc: 'c3-arc',\n        arcLabelLine: 'c3-arc-label-line',\n        arcs: 'c3-arcs',\n        area: 'c3-area',\n        areas: 'c3-areas',\n        empty: 'c3-empty',\n        text: 'c3-text',\n        texts: 'c3-texts',\n        gaugeValue: 'c3-gauge-value',\n        grid: 'c3-grid',\n        gridLines: 'c3-grid-lines',\n        xgrid: 'c3-xgrid',\n        xgrids: 'c3-xgrids',\n        xgridLine: 'c3-xgrid-line',\n        xgridLines: 'c3-xgrid-lines',\n        xgridFocus: 'c3-xgrid-focus',\n        ygrid: 'c3-ygrid',\n        ygrids: 'c3-ygrids',\n        ygridLine: 'c3-ygrid-line',\n        ygridLines: 'c3-ygrid-lines',\n        axis: 'c3-axis',\n        axisX: 'c3-axis-x',\n        axisXLabel: 'c3-axis-x-label',\n        axisY: 'c3-axis-y',\n        axisYLabel: 'c3-axis-y-label',\n        axisY2: 'c3-axis-y2',\n        axisY2Label: 'c3-axis-y2-label',\n        legendBackground: 'c3-legend-background',\n        legendItem: 'c3-legend-item',\n        legendItemEvent: 'c3-legend-item-event',\n        legendItemTile: 'c3-legend-item-tile',\n        legendItemHidden: 'c3-legend-item-hidden',\n        legendItemFocused: 'c3-legend-item-focused',\n        dragarea: 'c3-dragarea',\n        EXPANDED: '_expanded_',\n        SELECTED: '_selected_',\n        INCLUDED: '_included_'\n    };\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    var classCallCheck = function (instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    };\n\n    var inherits = function (subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n      }\n\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    };\n\n    var possibleConstructorReturn = function (self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n\n      return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    };\n\n    var isValue = function isValue(v) {\n        return v || v === 0;\n    };\n    var isFunction = function isFunction(o) {\n        return typeof o === 'function';\n    };\n    var isArray = function isArray(o) {\n        return Array.isArray(o);\n    };\n    var isString = function isString(o) {\n        return typeof o === 'string';\n    };\n    var isUndefined = function isUndefined(v) {\n        return typeof v === 'undefined';\n    };\n    var isDefined = function isDefined(v) {\n        return typeof v !== 'undefined';\n    };\n    var ceil10 = function ceil10(v) {\n        return Math.ceil(v / 10) * 10;\n    };\n    var asHalfPixel = function asHalfPixel(n) {\n        return Math.ceil(n) + 0.5;\n    };\n    var diffDomain = function diffDomain(d) {\n        return d[1] - d[0];\n    };\n    var isEmpty = function isEmpty(o) {\n        return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && Object.keys(o).length === 0;\n    };\n    var notEmpty = function notEmpty(o) {\n        return !c3_chart_internal_fn.isEmpty(o);\n    };\n    var getOption = function getOption(options, key, defaultValue) {\n        return isDefined(options[key]) ? options[key] : defaultValue;\n    };\n    var hasValue = function hasValue(dict, value) {\n        var found = false;\n        Object.keys(dict).forEach(function (key) {\n            if (dict[key] === value) {\n                found = true;\n            }\n        });\n        return found;\n    };\n    var sanitise = function sanitise(str) {\n        return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n    };\n    var getPathBox = function getPathBox(path) {\n        var box = path.getBoundingClientRect(),\n            items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n            minX = items[0].x,\n            minY = Math.min(items[0].y, items[1].y);\n        return { x: minX, y: minY, width: box.width, height: box.height };\n    };\n\n    var c3_axis_fn;\n    var c3_axis_internal_fn;\n\n    function AxisInternal(component, params) {\n        var internal = this;\n        internal.component = component;\n        internal.params = params || {};\n\n        internal.d3 = component.d3;\n        internal.scale = internal.d3.scale.linear();\n        internal.range;\n        internal.orient = \"bottom\";\n        internal.innerTickSize = 6;\n        internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n        internal.tickPadding = 3;\n        internal.tickValues = null;\n        internal.tickFormat;\n        internal.tickArguments;\n\n        internal.tickOffset = 0;\n        internal.tickCulling = true;\n        internal.tickCentered;\n        internal.tickTextCharSize;\n        internal.tickTextRotate = internal.params.tickTextRotate;\n        internal.tickLength;\n\n        internal.axis = internal.generateAxis();\n    }\n    c3_axis_internal_fn = AxisInternal.prototype;\n\n    c3_axis_internal_fn.axisX = function (selection, x, tickOffset) {\n        selection.attr(\"transform\", function (d) {\n            return \"translate(\" + Math.ceil(x(d) + tickOffset) + \", 0)\";\n        });\n    };\n    c3_axis_internal_fn.axisY = function (selection, y) {\n        selection.attr(\"transform\", function (d) {\n            return \"translate(0,\" + Math.ceil(y(d)) + \")\";\n        });\n    };\n    c3_axis_internal_fn.scaleExtent = function (domain) {\n        var start = domain[0],\n            stop = domain[domain.length - 1];\n        return start < stop ? [start, stop] : [stop, start];\n    };\n    c3_axis_internal_fn.generateTicks = function (scale) {\n        var internal = this;\n        var i,\n            domain,\n            ticks = [];\n        if (scale.ticks) {\n            return scale.ticks.apply(scale, internal.tickArguments);\n        }\n        domain = scale.domain();\n        for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n            ticks.push(i);\n        }\n        if (ticks.length > 0 && ticks[0] > 0) {\n            ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n        }\n        return ticks;\n    };\n    c3_axis_internal_fn.copyScale = function () {\n        var internal = this;\n        var newScale = internal.scale.copy(),\n            domain;\n        if (internal.params.isCategory) {\n            domain = internal.scale.domain();\n            newScale.domain([domain[0], domain[1] - 1]);\n        }\n        return newScale;\n    };\n    c3_axis_internal_fn.textFormatted = function (v) {\n        var internal = this,\n            formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n        return typeof formatted !== 'undefined' ? formatted : '';\n    };\n    c3_axis_internal_fn.updateRange = function () {\n        var internal = this;\n        internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n        return internal.range;\n    };\n    c3_axis_internal_fn.updateTickTextCharSize = function (tick) {\n        var internal = this;\n        if (internal.tickTextCharSize) {\n            return internal.tickTextCharSize;\n        }\n        var size = {\n            h: 11.5,\n            w: 5.5\n        };\n        tick.select('text').text(function (d) {\n            return internal.textFormatted(d);\n        }).each(function (d) {\n            var box = this.getBoundingClientRect(),\n                text = internal.textFormatted(d),\n                h = box.height,\n                w = text ? box.width / text.length : undefined;\n            if (h && w) {\n                size.h = h;\n                size.w = w;\n            }\n        }).text('');\n        internal.tickTextCharSize = size;\n        return size;\n    };\n    c3_axis_internal_fn.transitionise = function (selection) {\n        return this.params.withoutTransition ? selection : this.d3.transition(selection);\n    };\n    c3_axis_internal_fn.isVertical = function () {\n        return this.orient === 'left' || this.orient === 'right';\n    };\n    c3_axis_internal_fn.tspanData = function (d, i, ticks, scale) {\n        var internal = this;\n        var splitted = internal.params.tickMultiline ? internal.splitTickText(d, ticks, scale) : [].concat(internal.textFormatted(d));\n\n        if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n            splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n        }\n\n        return splitted.map(function (s) {\n            return { index: i, splitted: s, length: splitted.length };\n        });\n    };\n    c3_axis_internal_fn.splitTickText = function (d, ticks, scale) {\n        var internal = this,\n            tickText = internal.textFormatted(d),\n            maxWidth = internal.params.tickWidth,\n            subtext,\n            spaceIndex,\n            textWidth,\n            splitted = [];\n\n        if (Object.prototype.toString.call(tickText) === \"[object Array]\") {\n            return tickText;\n        }\n\n        if (!maxWidth || maxWidth <= 0) {\n            maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(ticks[1]) - scale(ticks[0])) - 12 : 110;\n        }\n\n        function split(splitted, text) {\n            spaceIndex = undefined;\n            for (var i = 1; i < text.length; i++) {\n                if (text.charAt(i) === ' ') {\n                    spaceIndex = i;\n                }\n                subtext = text.substr(0, i + 1);\n                textWidth = internal.tickTextCharSize.w * subtext.length;\n                // if text width gets over tick width, split by space index or crrent index\n                if (maxWidth < textWidth) {\n                    return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n                }\n            }\n            return splitted.concat(text);\n        }\n\n        return split(splitted, tickText + \"\");\n    };\n    c3_axis_internal_fn.ellipsify = function (splitted, max) {\n        if (splitted.length <= max) {\n            return splitted;\n        }\n\n        var ellipsified = splitted.slice(0, max);\n        var remaining = 3;\n        for (var i = max - 1; i >= 0; i--) {\n            var available = ellipsified[i].length;\n\n            ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n\n            remaining -= available;\n\n            if (remaining <= 0) {\n                break;\n            }\n        }\n\n        return ellipsified;\n    };\n    c3_axis_internal_fn.updateTickLength = function () {\n        var internal = this;\n        internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n    };\n    c3_axis_internal_fn.lineY2 = function (d) {\n        var internal = this,\n            tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n        return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n    };\n    c3_axis_internal_fn.textY = function () {\n        var internal = this,\n            rotate = internal.tickTextRotate;\n        return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n    };\n    c3_axis_internal_fn.textTransform = function () {\n        var internal = this,\n            rotate = internal.tickTextRotate;\n        return rotate ? \"rotate(\" + rotate + \")\" : \"\";\n    };\n    c3_axis_internal_fn.textTextAnchor = function () {\n        var internal = this,\n            rotate = internal.tickTextRotate;\n        return rotate ? rotate > 0 ? \"start\" : \"end\" : \"middle\";\n    };\n    c3_axis_internal_fn.tspanDx = function () {\n        var internal = this,\n            rotate = internal.tickTextRotate;\n        return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n    };\n    c3_axis_internal_fn.tspanDy = function (d, i) {\n        var internal = this,\n            dy = internal.tickTextCharSize.h;\n        if (i === 0) {\n            if (internal.isVertical()) {\n                dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n            } else {\n                dy = \".71em\";\n            }\n        }\n        return dy;\n    };\n\n    c3_axis_internal_fn.generateAxis = function () {\n        var internal = this,\n            d3 = internal.d3,\n            params = internal.params;\n        function axis(g) {\n            g.each(function () {\n                var g = axis.g = d3.select(this);\n\n                var scale0 = this.__chart__ || internal.scale,\n                    scale1 = this.__chart__ = internal.copyScale();\n\n                var ticks = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n                    tick = g.selectAll(\".tick\").data(ticks, scale1),\n                    tickEnter = tick.enter().insert(\"g\", \".domain\").attr(\"class\", \"tick\").style(\"opacity\", 1e-6),\n\n                // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n                tickExit = tick.exit().remove(),\n                    tickUpdate = internal.transitionise(tick).style(\"opacity\", 1),\n                    tickTransform,\n                    tickX,\n                    tickY;\n\n                if (params.isCategory) {\n                    internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n                    tickX = internal.tickCentered ? 0 : internal.tickOffset;\n                    tickY = internal.tickCentered ? internal.tickOffset : 0;\n                } else {\n                    internal.tickOffset = tickX = 0;\n                }\n\n                tickEnter.append(\"line\");\n                tickEnter.append(\"text\");\n\n                internal.updateRange();\n                internal.updateTickLength();\n                internal.updateTickTextCharSize(g.select('.tick'));\n\n                var lineUpdate = tickUpdate.select(\"line\"),\n                    textUpdate = tickUpdate.select(\"text\"),\n                    tspanUpdate = tick.select(\"text\").selectAll('tspan').data(function (d, i) {\n                    return internal.tspanData(d, i, ticks, scale1);\n                });\n\n                tspanUpdate.enter().append('tspan');\n                tspanUpdate.exit().remove();\n                tspanUpdate.text(function (d) {\n                    return d.splitted;\n                });\n\n                var path = g.selectAll(\".domain\").data([0]),\n                    pathUpdate = (path.enter().append(\"path\").attr(\"class\", \"domain\"), internal.transitionise(path));\n\n                // TODO: each attr should be one function and change its behavior by internal.orient, probably\n                switch (internal.orient) {\n                    case \"bottom\":\n                        {\n                            tickTransform = internal.axisX;\n                            lineUpdate.attr(\"x1\", tickX).attr(\"x2\", tickX).attr(\"y2\", function (d, i) {\n                                return internal.lineY2(d, i);\n                            });\n                            textUpdate.attr(\"x\", 0).attr(\"y\", function (d, i) {\n                                return internal.textY(d, i);\n                            }).attr(\"transform\", function (d, i) {\n                                return internal.textTransform(d, i);\n                            }).style(\"text-anchor\", function (d, i) {\n                                return internal.textTextAnchor(d, i);\n                            });\n                            tspanUpdate.attr('x', 0).attr(\"dy\", function (d, i) {\n                                return internal.tspanDy(d, i);\n                            }).attr('dx', function (d, i) {\n                                return internal.tspanDx(d, i);\n                            });\n                            pathUpdate.attr(\"d\", \"M\" + internal.range[0] + \",\" + internal.outerTickSize + \"V0H\" + internal.range[1] + \"V\" + internal.outerTickSize);\n                            break;\n                        }\n                    case \"top\":\n                        {\n                            // TODO: rotated tick text\n                            tickTransform = internal.axisX;\n                            lineUpdate.attr(\"x1\", tickX).attr(\"x2\", tickX).attr(\"y2\", function (d, i) {\n                                return -1 * internal.lineY2(d, i);\n                            });\n                            textUpdate.attr(\"x\", 0).attr(\"y\", function (d, i) {\n                                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n                            }).attr(\"transform\", function (d, i) {\n                                return internal.textTransform(d, i);\n                            }).style(\"text-anchor\", function (d, i) {\n                                return internal.textTextAnchor(d, i);\n                            });\n                            tspanUpdate.attr('x', 0).attr(\"dy\", function (d, i) {\n                                return internal.tspanDy(d, i);\n                            }).attr('dx', function (d, i) {\n                                return internal.tspanDx(d, i);\n                            });\n                            pathUpdate.attr(\"d\", \"M\" + internal.range[0] + \",\" + -internal.outerTickSize + \"V0H\" + internal.range[1] + \"V\" + -internal.outerTickSize);\n                            break;\n                        }\n                    case \"left\":\n                        {\n                            tickTransform = internal.axisY;\n                            lineUpdate.attr(\"x2\", -internal.innerTickSize).attr(\"y1\", tickY).attr(\"y2\", tickY);\n                            textUpdate.attr(\"x\", -internal.tickLength).attr(\"y\", internal.tickOffset).style(\"text-anchor\", \"end\");\n                            tspanUpdate.attr('x', -internal.tickLength).attr(\"dy\", function (d, i) {\n                                return internal.tspanDy(d, i);\n                            });\n                            pathUpdate.attr(\"d\", \"M\" + -internal.outerTickSize + \",\" + internal.range[0] + \"H0V\" + internal.range[1] + \"H\" + -internal.outerTickSize);\n                            break;\n                        }\n                    case \"right\":\n                        {\n                            tickTransform = internal.axisY;\n                            lineUpdate.attr(\"x2\", internal.innerTickSize).attr(\"y1\", tickY).attr(\"y2\", tickY);\n                            textUpdate.attr(\"x\", internal.tickLength).attr(\"y\", internal.tickOffset).style(\"text-anchor\", \"start\");\n                            tspanUpdate.attr('x', internal.tickLength).attr(\"dy\", function (d, i) {\n                                return internal.tspanDy(d, i);\n                            });\n                            pathUpdate.attr(\"d\", \"M\" + internal.outerTickSize + \",\" + internal.range[0] + \"H0V\" + internal.range[1] + \"H\" + internal.outerTickSize);\n                            break;\n                        }\n                }\n                if (scale1.rangeBand) {\n                    var x = scale1,\n                        dx = x.rangeBand() / 2;\n                    scale0 = scale1 = function scale1(d) {\n                        return x(d) + dx;\n                    };\n                } else if (scale0.rangeBand) {\n                    scale0 = scale1;\n                } else {\n                    tickExit.call(tickTransform, scale1, internal.tickOffset);\n                }\n                tickEnter.call(tickTransform, scale0, internal.tickOffset);\n                tickUpdate.call(tickTransform, scale1, internal.tickOffset);\n            });\n        }\n        axis.scale = function (x) {\n            if (!arguments.length) {\n                return internal.scale;\n            }\n            internal.scale = x;\n            return axis;\n        };\n        axis.orient = function (x) {\n            if (!arguments.length) {\n                return internal.orient;\n            }\n            internal.orient = x in { top: 1, right: 1, bottom: 1, left: 1 } ? x + \"\" : \"bottom\";\n            return axis;\n        };\n        axis.tickFormat = function (format) {\n            if (!arguments.length) {\n                return internal.tickFormat;\n            }\n            internal.tickFormat = format;\n            return axis;\n        };\n        axis.tickCentered = function (isCentered) {\n            if (!arguments.length) {\n                return internal.tickCentered;\n            }\n            internal.tickCentered = isCentered;\n            return axis;\n        };\n        axis.tickOffset = function () {\n            return internal.tickOffset;\n        };\n        axis.tickInterval = function () {\n            var interval, length;\n            if (params.isCategory) {\n                interval = internal.tickOffset * 2;\n            } else {\n                length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n                interval = length / axis.g.selectAll('line').size();\n            }\n            return interval === Infinity ? 0 : interval;\n        };\n        axis.ticks = function () {\n            if (!arguments.length) {\n                return internal.tickArguments;\n            }\n            internal.tickArguments = arguments;\n            return axis;\n        };\n        axis.tickCulling = function (culling) {\n            if (!arguments.length) {\n                return internal.tickCulling;\n            }\n            internal.tickCulling = culling;\n            return axis;\n        };\n        axis.tickValues = function (x) {\n            if (typeof x === 'function') {\n                internal.tickValues = function () {\n                    return x(internal.scale.domain());\n                };\n            } else {\n                if (!arguments.length) {\n                    return internal.tickValues;\n                }\n                internal.tickValues = x;\n            }\n            return axis;\n        };\n        return axis;\n    };\n\n    var Axis = function (_Component) {\n        inherits(Axis, _Component);\n\n        function Axis(owner) {\n            classCallCheck(this, Axis);\n\n            var fn = {\n                fn: c3_axis_fn,\n                internal: {\n                    fn: c3_axis_internal_fn\n                }\n            };\n\n            var _this = possibleConstructorReturn(this, (Axis.__proto__ || Object.getPrototypeOf(Axis)).call(this, owner, 'axis', fn));\n\n            _this.d3 = owner.d3;\n            _this.internal = AxisInternal;\n            return _this;\n        }\n\n        return Axis;\n    }(Component);\n\n    c3_axis_fn = Axis.prototype;\n\n    c3_axis_fn.init = function init() {\n        var $$ = this.owner,\n            config = $$.config,\n            main = $$.main;\n        $$.axes.x = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisX).attr(\"clip-path\", config.axis_x_inner ? \"\" : $$.clipPathForXAxis).attr(\"transform\", $$.getTranslate('x')).style(\"visibility\", config.axis_x_show ? 'visible' : 'hidden');\n        $$.axes.x.append(\"text\").attr(\"class\", CLASS.axisXLabel).attr(\"transform\", config.axis_rotated ? \"rotate(-90)\" : \"\").style(\"text-anchor\", this.textAnchorForXAxisLabel.bind(this));\n        $$.axes.y = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisY).attr(\"clip-path\", config.axis_y_inner ? \"\" : $$.clipPathForYAxis).attr(\"transform\", $$.getTranslate('y')).style(\"visibility\", config.axis_y_show ? 'visible' : 'hidden');\n        $$.axes.y.append(\"text\").attr(\"class\", CLASS.axisYLabel).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").style(\"text-anchor\", this.textAnchorForYAxisLabel.bind(this));\n\n        $$.axes.y2 = main.append(\"g\").attr(\"class\", CLASS.axis + ' ' + CLASS.axisY2)\n        // clip-path?\n        .attr(\"transform\", $$.getTranslate('y2')).style(\"visibility\", config.axis_y2_show ? 'visible' : 'hidden');\n        $$.axes.y2.append(\"text\").attr(\"class\", CLASS.axisY2Label).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").style(\"text-anchor\", this.textAnchorForY2AxisLabel.bind(this));\n    };\n    c3_axis_fn.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n        var $$ = this.owner,\n            config = $$.config,\n            axisParams = {\n            isCategory: $$.isCategorized(),\n            withOuterTick: withOuterTick,\n            tickMultiline: config.axis_x_tick_multiline,\n            tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n            tickWidth: config.axis_x_tick_width,\n            tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n            withoutTransition: withoutTransition\n        },\n            axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n\n        if ($$.isTimeSeries() && tickValues && typeof tickValues !== \"function\") {\n            tickValues = tickValues.map(function (v) {\n                return $$.parseDate(v);\n            });\n        }\n\n        // Set tick\n        axis.tickFormat(tickFormat).tickValues(tickValues);\n        if ($$.isCategorized()) {\n            axis.tickCentered(config.axis_x_tick_centered);\n            if (isEmpty(config.axis_x_tick_culling)) {\n                config.axis_x_tick_culling = false;\n            }\n        }\n\n        return axis;\n    };\n    c3_axis_fn.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n        var $$ = this.owner,\n            config = $$.config,\n            tickValues;\n        if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n            tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n        }\n        if (axis) {\n            axis.tickValues(tickValues);\n        } else {\n            $$.xAxis.tickValues(tickValues);\n            $$.subXAxis.tickValues(tickValues);\n        }\n        return tickValues;\n    };\n    c3_axis_fn.getYAxis = function getYAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n        var $$ = this.owner,\n            config = $$.config,\n            axisParams = {\n            withOuterTick: withOuterTick,\n            withoutTransition: withoutTransition,\n            tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n        },\n            axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient).tickFormat(tickFormat);\n        if ($$.isTimeSeriesY()) {\n            axis.ticks($$.d3.time[config.axis_y_tick_time_value], config.axis_y_tick_time_interval);\n        } else {\n            axis.tickValues(tickValues);\n        }\n        return axis;\n    };\n    c3_axis_fn.getId = function getId(id) {\n        var config = this.owner.config;\n        return id in config.data_axes ? config.data_axes[id] : 'y';\n    };\n    c3_axis_fn.getXAxisTickFormat = function getXAxisTickFormat() {\n        var $$ = this.owner,\n            config = $$.config,\n            format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n            return v < 0 ? v.toFixed(0) : v;\n        };\n        if (config.axis_x_tick_format) {\n            if (isFunction(config.axis_x_tick_format)) {\n                format = config.axis_x_tick_format;\n            } else if ($$.isTimeSeries()) {\n                format = function format(date) {\n                    return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : \"\";\n                };\n            }\n        }\n        return isFunction(format) ? function (v) {\n            return format.call($$, v);\n        } : format;\n    };\n    c3_axis_fn.getTickValues = function getTickValues(tickValues, axis) {\n        return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n    };\n    c3_axis_fn.getXAxisTickValues = function getXAxisTickValues() {\n        return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n    };\n    c3_axis_fn.getYAxisTickValues = function getYAxisTickValues() {\n        return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n    };\n    c3_axis_fn.getY2AxisTickValues = function getY2AxisTickValues() {\n        return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n    };\n    c3_axis_fn.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n        var $$ = this.owner,\n            config = $$.config,\n            option;\n        if (axisId === 'y') {\n            option = config.axis_y_label;\n        } else if (axisId === 'y2') {\n            option = config.axis_y2_label;\n        } else if (axisId === 'x') {\n            option = config.axis_x_label;\n        }\n        return option;\n    };\n    c3_axis_fn.getLabelText = function getLabelText(axisId) {\n        var option = this.getLabelOptionByAxisId(axisId);\n        return isString(option) ? option : option ? option.text : null;\n    };\n    c3_axis_fn.setLabelText = function setLabelText(axisId, text) {\n        var $$ = this.owner,\n            config = $$.config,\n            option = this.getLabelOptionByAxisId(axisId);\n        if (isString(option)) {\n            if (axisId === 'y') {\n                config.axis_y_label = text;\n            } else if (axisId === 'y2') {\n                config.axis_y2_label = text;\n            } else if (axisId === 'x') {\n                config.axis_x_label = text;\n            }\n        } else if (option) {\n            option.text = text;\n        }\n    };\n    c3_axis_fn.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n        var option = this.getLabelOptionByAxisId(axisId),\n            position = option && (typeof option === 'undefined' ? 'undefined' : _typeof(option)) === 'object' && option.position ? option.position : defaultPosition;\n        return {\n            isInner: position.indexOf('inner') >= 0,\n            isOuter: position.indexOf('outer') >= 0,\n            isLeft: position.indexOf('left') >= 0,\n            isCenter: position.indexOf('center') >= 0,\n            isRight: position.indexOf('right') >= 0,\n            isTop: position.indexOf('top') >= 0,\n            isMiddle: position.indexOf('middle') >= 0,\n            isBottom: position.indexOf('bottom') >= 0\n        };\n    };\n    c3_axis_fn.getXAxisLabelPosition = function getXAxisLabelPosition() {\n        return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n    };\n    c3_axis_fn.getYAxisLabelPosition = function getYAxisLabelPosition() {\n        return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n    };\n    c3_axis_fn.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n        return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n    };\n    c3_axis_fn.getLabelPositionById = function getLabelPositionById(id) {\n        return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n    };\n    c3_axis_fn.textForXAxisLabel = function textForXAxisLabel() {\n        return this.getLabelText('x');\n    };\n    c3_axis_fn.textForYAxisLabel = function textForYAxisLabel() {\n        return this.getLabelText('y');\n    };\n    c3_axis_fn.textForY2AxisLabel = function textForY2AxisLabel() {\n        return this.getLabelText('y2');\n    };\n    c3_axis_fn.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n        var $$ = this.owner;\n        if (forHorizontal) {\n            return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n        } else {\n            return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n        }\n    };\n    c3_axis_fn.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n        if (forHorizontal) {\n            return position.isLeft ? \"0.5em\" : position.isRight ? \"-0.5em\" : \"0\";\n        } else {\n            return position.isTop ? \"-0.5em\" : position.isBottom ? \"0.5em\" : \"0\";\n        }\n    };\n    c3_axis_fn.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n        if (forHorizontal) {\n            return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n        } else {\n            return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n        }\n    };\n    c3_axis_fn.xForXAxisLabel = function xForXAxisLabel() {\n        return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n    };\n    c3_axis_fn.xForYAxisLabel = function xForYAxisLabel() {\n        return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n    };\n    c3_axis_fn.xForY2AxisLabel = function xForY2AxisLabel() {\n        return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n    };\n    c3_axis_fn.dxForXAxisLabel = function dxForXAxisLabel() {\n        return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n    };\n    c3_axis_fn.dxForYAxisLabel = function dxForYAxisLabel() {\n        return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n    };\n    c3_axis_fn.dxForY2AxisLabel = function dxForY2AxisLabel() {\n        return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n    };\n    c3_axis_fn.dyForXAxisLabel = function dyForXAxisLabel() {\n        var $$ = this.owner,\n            config = $$.config,\n            position = this.getXAxisLabelPosition();\n        if (config.axis_rotated) {\n            return position.isInner ? \"1.2em\" : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n        } else {\n            return position.isInner ? \"-0.5em\" : config.axis_x_height ? config.axis_x_height - 10 : \"3em\";\n        }\n    };\n    c3_axis_fn.dyForYAxisLabel = function dyForYAxisLabel() {\n        var $$ = this.owner,\n            position = this.getYAxisLabelPosition();\n        if ($$.config.axis_rotated) {\n            return position.isInner ? \"-0.5em\" : \"3em\";\n        } else {\n            return position.isInner ? \"1.2em\" : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n        }\n    };\n    c3_axis_fn.dyForY2AxisLabel = function dyForY2AxisLabel() {\n        var $$ = this.owner,\n            position = this.getY2AxisLabelPosition();\n        if ($$.config.axis_rotated) {\n            return position.isInner ? \"1.2em\" : \"-2.2em\";\n        } else {\n            return position.isInner ? \"-0.5em\" : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n        }\n    };\n    c3_axis_fn.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n        var $$ = this.owner;\n        return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n    };\n    c3_axis_fn.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n        var $$ = this.owner;\n        return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n    };\n    c3_axis_fn.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n        var $$ = this.owner;\n        return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n    };\n    c3_axis_fn.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n        var $$ = this.owner,\n            config = $$.config,\n            maxWidth = 0,\n            targetsToShow,\n            scale,\n            axis,\n            dummy,\n            svg;\n        if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n            return $$.currentMaxTickWidths[id];\n        }\n        if ($$.svg) {\n            targetsToShow = $$.filterTargetsToShow($$.data.targets);\n            if (id === 'y') {\n                scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n                axis = this.getYAxis(scale, $$.yOrient, config.axis_y_tick_format, $$.yAxisTickValues, false, true, true);\n            } else if (id === 'y2') {\n                scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n                axis = this.getYAxis(scale, $$.y2Orient, config.axis_y2_tick_format, $$.y2AxisTickValues, false, true, true);\n            } else {\n                scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n                axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n                this.updateXAxisTickValues(targetsToShow, axis);\n            }\n            dummy = $$.d3.select('body').append('div').classed('c3', true);\n            svg = dummy.append(\"svg\").style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n                $$.d3.select(this).selectAll('text').each(function () {\n                    var box = this.getBoundingClientRect();\n                    if (maxWidth < box.width) {\n                        maxWidth = box.width;\n                    }\n                });\n                dummy.remove();\n            });\n        }\n        $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n        return $$.currentMaxTickWidths[id];\n    };\n\n    c3_axis_fn.updateLabels = function updateLabels(withTransition) {\n        var $$ = this.owner;\n        var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n            axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n            axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n        (withTransition ? axisXLabel.transition() : axisXLabel).attr(\"x\", this.xForXAxisLabel.bind(this)).attr(\"dx\", this.dxForXAxisLabel.bind(this)).attr(\"dy\", this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n        (withTransition ? axisYLabel.transition() : axisYLabel).attr(\"x\", this.xForYAxisLabel.bind(this)).attr(\"dx\", this.dxForYAxisLabel.bind(this)).attr(\"dy\", this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n        (withTransition ? axisY2Label.transition() : axisY2Label).attr(\"x\", this.xForY2AxisLabel.bind(this)).attr(\"dx\", this.dxForY2AxisLabel.bind(this)).attr(\"dy\", this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n    };\n    c3_axis_fn.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n        var p = typeof padding === 'number' ? padding : padding[key];\n        if (!isValue(p)) {\n            return defaultValue;\n        }\n        if (padding.unit === 'ratio') {\n            return padding[key] * domainLength;\n        }\n        // assume padding is pixels if unit is not specified\n        return this.convertPixelsToAxisPadding(p, domainLength);\n    };\n    c3_axis_fn.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n        var $$ = this.owner,\n            length = $$.config.axis_rotated ? $$.width : $$.height;\n        return domainLength * (pixels / length);\n    };\n    c3_axis_fn.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n        var tickValues = values,\n            targetCount,\n            start,\n            end,\n            count,\n            interval,\n            i,\n            tickValue;\n        if (tickCount) {\n            targetCount = isFunction(tickCount) ? tickCount() : tickCount;\n            // compute ticks according to tickCount\n            if (targetCount === 1) {\n                tickValues = [values[0]];\n            } else if (targetCount === 2) {\n                tickValues = [values[0], values[values.length - 1]];\n            } else if (targetCount > 2) {\n                count = targetCount - 2;\n                start = values[0];\n                end = values[values.length - 1];\n                interval = (end - start) / (count + 1);\n                // re-construct unique values\n                tickValues = [start];\n                for (i = 0; i < count; i++) {\n                    tickValue = +start + interval * (i + 1);\n                    tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n                }\n                tickValues.push(end);\n            }\n        }\n        if (!forTimeSeries) {\n            tickValues = tickValues.sort(function (a, b) {\n                return a - b;\n            });\n        }\n        return tickValues;\n    };\n    c3_axis_fn.generateTransitions = function generateTransitions(duration) {\n        var $$ = this.owner,\n            axes = $$.axes;\n        return {\n            axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n            axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n            axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n            axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n        };\n    };\n    c3_axis_fn.redraw = function redraw(transitions, isHidden) {\n        var $$ = this.owner;\n        $$.axes.x.style(\"opacity\", isHidden ? 0 : 1);\n        $$.axes.y.style(\"opacity\", isHidden ? 0 : 1);\n        $$.axes.y2.style(\"opacity\", isHidden ? 0 : 1);\n        $$.axes.subx.style(\"opacity\", isHidden ? 0 : 1);\n        transitions.axisX.call($$.xAxis);\n        transitions.axisY.call($$.yAxis);\n        transitions.axisY2.call($$.y2Axis);\n        transitions.axisSubX.call($$.subXAxis);\n    };\n\n    var c3 = { version: \"0.4.24\" };\n\n    var c3_chart_fn;\n    var c3_chart_internal_fn;\n\n    function Component(owner, componentKey, fn) {\n        this.owner = owner;\n        c3.chart.internal[componentKey] = fn;\n    }\n\n    function Chart(config) {\n        var $$ = this.internal = new ChartInternal(this);\n        $$.loadConfig(config);\n\n        $$.beforeInit(config);\n        $$.init();\n        $$.afterInit(config);\n\n        // bind \"this\" to nested API\n        (function bindThis(fn, target, argThis) {\n            Object.keys(fn).forEach(function (key) {\n                target[key] = fn[key].bind(argThis);\n                if (Object.keys(fn[key]).length > 0) {\n                    bindThis(fn[key], target[key], argThis);\n                }\n            });\n        })(c3_chart_fn, this, this);\n    }\n\n    function ChartInternal(api) {\n        var $$ = this;\n        $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require(\"d3\") : undefined;\n        $$.api = api;\n        $$.config = $$.getDefaultConfig();\n        $$.data = {};\n        $$.cache = {};\n        $$.axes = {};\n    }\n\n    c3.generate = function (config) {\n        return new Chart(config);\n    };\n\n    c3.chart = {\n        fn: Chart.prototype,\n        internal: {\n            fn: ChartInternal.prototype\n        }\n    };\n    c3_chart_fn = c3.chart.fn;\n    c3_chart_internal_fn = c3.chart.internal.fn;\n\n    c3_chart_internal_fn.beforeInit = function () {\n        // can do something\n    };\n    c3_chart_internal_fn.afterInit = function () {\n        // can do something\n    };\n    c3_chart_internal_fn.init = function () {\n        var $$ = this,\n            config = $$.config;\n\n        $$.initParams();\n\n        if (config.data_url) {\n            $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n        } else if (config.data_json) {\n            $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n        } else if (config.data_rows) {\n            $$.initWithData($$.convertRowsToData(config.data_rows));\n        } else if (config.data_columns) {\n            $$.initWithData($$.convertColumnsToData(config.data_columns));\n        } else {\n            throw Error('url or json or rows or columns is required.');\n        }\n    };\n\n    c3_chart_internal_fn.initParams = function () {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config;\n\n        // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n        $$.clipId = \"c3-\" + +new Date() + '-clip', $$.clipIdForXAxis = $$.clipId + '-xaxis', $$.clipIdForYAxis = $$.clipId + '-yaxis', $$.clipIdForGrid = $$.clipId + '-grid', $$.clipIdForSubchart = $$.clipId + '-subchart', $$.clipPath = $$.getClipPath($$.clipId), $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis), $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n        $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid), $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart), $$.dragStart = null;\n        $$.dragging = false;\n        $$.flowing = false;\n        $$.cancelClick = false;\n        $$.mouseover = false;\n        $$.transiting = false;\n\n        $$.color = $$.generateColor();\n        $$.levelColor = $$.generateLevelColor();\n\n        $$.dataTimeFormat = config.data_xLocaltime ? d3.time.format : d3.time.format.utc;\n        $$.axisTimeFormat = config.axis_x_localtime ? d3.time.format : d3.time.format.utc;\n        $$.defaultAxisTimeFormat = $$.axisTimeFormat.multi([[\".%L\", function (d) {\n            return d.getMilliseconds();\n        }], [\":%S\", function (d) {\n            return d.getSeconds();\n        }], [\"%I:%M\", function (d) {\n            return d.getMinutes();\n        }], [\"%I %p\", function (d) {\n            return d.getHours();\n        }], [\"%-m/%-d\", function (d) {\n            return d.getDay() && d.getDate() !== 1;\n        }], [\"%-m/%-d\", function (d) {\n            return d.getDate() !== 1;\n        }], [\"%-m/%-d\", function (d) {\n            return d.getMonth();\n        }], [\"%Y/%-m/%-d\", function () {\n            return true;\n        }]]);\n\n        $$.hiddenTargetIds = [];\n        $$.hiddenLegendIds = [];\n        $$.focusedTargetIds = [];\n        $$.defocusedTargetIds = [];\n\n        $$.xOrient = config.axis_rotated ? config.axis_x_inner ? \"right\" : \"left\" : config.axis_x_inner ? \"top\" : \"bottom\";\n        $$.yOrient = config.axis_rotated ? config.axis_y_inner ? \"top\" : \"bottom\" : config.axis_y_inner ? \"right\" : \"left\";\n        $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? \"bottom\" : \"top\" : config.axis_y2_inner ? \"left\" : \"right\";\n        $$.subXOrient = config.axis_rotated ? \"left\" : \"bottom\";\n\n        $$.isLegendRight = config.legend_position === 'right';\n        $$.isLegendInset = config.legend_position === 'inset';\n        $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n        $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n        $$.legendStep = 0;\n        $$.legendItemWidth = 0;\n        $$.legendItemHeight = 0;\n\n        $$.currentMaxTickWidths = {\n            x: 0,\n            y: 0,\n            y2: 0\n        };\n\n        $$.rotated_padding_left = 30;\n        $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n        $$.rotated_padding_top = 5;\n\n        $$.withoutFadeIn = {};\n\n        $$.intervalForObserveInserted = undefined;\n\n        $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n    };\n\n    c3_chart_internal_fn.initChartElements = function () {\n        if (this.initBar) {\n            this.initBar();\n        }\n        if (this.initLine) {\n            this.initLine();\n        }\n        if (this.initArc) {\n            this.initArc();\n        }\n        if (this.initGauge) {\n            this.initGauge();\n        }\n        if (this.initText) {\n            this.initText();\n        }\n    };\n\n    c3_chart_internal_fn.initWithData = function (data) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config;\n        var defs,\n            main,\n            binding = true;\n\n        $$.axis = new Axis($$);\n\n        if ($$.initPie) {\n            $$.initPie();\n        }\n        if ($$.initBrush) {\n            $$.initBrush();\n        }\n        if ($$.initZoom) {\n            $$.initZoom();\n        }\n\n        if (!config.bindto) {\n            $$.selectChart = d3.selectAll([]);\n        } else if (typeof config.bindto.node === 'function') {\n            $$.selectChart = config.bindto;\n        } else {\n            $$.selectChart = d3.select(config.bindto);\n        }\n        if ($$.selectChart.empty()) {\n            $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n            $$.observeInserted($$.selectChart);\n            binding = false;\n        }\n        $$.selectChart.html(\"\").classed(\"c3\", true);\n\n        // Init data as targets\n        $$.data.xs = {};\n        $$.data.targets = $$.convertDataToTargets(data);\n\n        if (config.data_filter) {\n            $$.data.targets = $$.data.targets.filter(config.data_filter);\n        }\n\n        // Set targets to hide if needed\n        if (config.data_hide) {\n            $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n        }\n        if (config.legend_hide) {\n            $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n        }\n\n        // Init sizes and scales\n        $$.updateSizes();\n        $$.updateScales();\n\n        // Set domains for each scale\n        $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n        $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n        $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n        $$.subX.domain($$.x.domain());\n        $$.subY.domain($$.y.domain());\n        $$.subY2.domain($$.y2.domain());\n\n        // Save original x domain for zoom update\n        $$.orgXDomain = $$.x.domain();\n\n        // Set initialized scales to brush and zoom\n        if ($$.brush) {\n            $$.brush.scale($$.subX);\n        }\n        if (config.zoom_enabled) {\n            $$.zoom.scale($$.x);\n        }\n\n        /*-- Basic Elements --*/\n\n        // Define svgs\n        $$.svg = $$.selectChart.append(\"svg\").style(\"overflow\", \"hidden\").on('mouseenter', function () {\n            return config.onmouseover.call($$);\n        }).on('mouseleave', function () {\n            return config.onmouseout.call($$);\n        });\n\n        if ($$.config.svg_classname) {\n            $$.svg.attr('class', $$.config.svg_classname);\n        }\n\n        // Define defs\n        defs = $$.svg.append(\"defs\");\n        $$.clipChart = $$.appendClip(defs, $$.clipId);\n        $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n        $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n        $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n        $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n        $$.updateSvgSize();\n\n        // Define regions\n        main = $$.main = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('main'));\n\n        if ($$.initSubchart) {\n            $$.initSubchart();\n        }\n        if ($$.initTooltip) {\n            $$.initTooltip();\n        }\n        if ($$.initLegend) {\n            $$.initLegend();\n        }\n        if ($$.initTitle) {\n            $$.initTitle();\n        }\n\n        /*-- Main Region --*/\n\n        // text when empty\n        main.append(\"text\").attr(\"class\", CLASS.text + ' ' + CLASS.empty).attr(\"text-anchor\", \"middle\") // horizontal centering of text at x position in all browsers.\n        .attr(\"dominant-baseline\", \"middle\"); // vertical centering of text at y position in all browsers, except IE.\n\n        // Regions\n        $$.initRegion();\n\n        // Grids\n        $$.initGrid();\n\n        // Define g for chart area\n        main.append('g').attr(\"clip-path\", $$.clipPath).attr('class', CLASS.chart);\n\n        // Grid lines\n        if (config.grid_lines_front) {\n            $$.initGridLines();\n        }\n\n        // Cover whole with rects for events\n        $$.initEventRect();\n\n        // Define g for chart\n        $$.initChartElements();\n\n        // if zoom privileged, insert rect to forefront\n        // TODO: is this needed?\n        main.insert('rect', config.zoom_privileged ? null : 'g.' + CLASS.regions).attr('class', CLASS.zoomRect).attr('width', $$.width).attr('height', $$.height).style('opacity', 0).on(\"dblclick.zoom\", null);\n\n        // Set default extent if defined\n        if (config.axis_x_extent) {\n            $$.brush.extent($$.getDefaultExtent());\n        }\n\n        // Add Axis\n        $$.axis.init();\n\n        // Set targets\n        $$.updateTargets($$.data.targets);\n\n        // Draw with targets\n        if (binding) {\n            $$.updateDimension();\n            $$.config.oninit.call($$);\n            $$.redraw({\n                withTransition: false,\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransitionForAxis: false\n            });\n        }\n\n        // Bind resize event\n        $$.bindResize();\n\n        // export element of the chart\n        $$.api.element = $$.selectChart.node();\n    };\n\n    c3_chart_internal_fn.smoothLines = function (el, type) {\n        var $$ = this;\n        if (type === 'grid') {\n            el.each(function () {\n                var g = $$.d3.select(this),\n                    x1 = g.attr('x1'),\n                    x2 = g.attr('x2'),\n                    y1 = g.attr('y1'),\n                    y2 = g.attr('y2');\n                g.attr({\n                    'x1': Math.ceil(x1),\n                    'x2': Math.ceil(x2),\n                    'y1': Math.ceil(y1),\n                    'y2': Math.ceil(y2)\n                });\n            });\n        }\n    };\n\n    c3_chart_internal_fn.updateSizes = function () {\n        var $$ = this,\n            config = $$.config;\n        var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n            legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n            legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n            hasArc = $$.hasArcType(),\n            xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n            subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + xAxisHeight : 0;\n\n        $$.currentWidth = $$.getCurrentWidth();\n        $$.currentHeight = $$.getCurrentHeight();\n\n        // for main\n        $$.margin = config.axis_rotated ? {\n            top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n            right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n            bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n            left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n        } : {\n            top: 4 + $$.getCurrentPaddingTop(), // for top tick text\n            right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n            bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n            left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n        };\n\n        // for subchart\n        $$.margin2 = config.axis_rotated ? {\n            top: $$.margin.top,\n            right: NaN,\n            bottom: 20 + legendHeightForBottom,\n            left: $$.rotated_padding_left\n        } : {\n            top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n            right: NaN,\n            bottom: xAxisHeight + legendHeightForBottom,\n            left: $$.margin.left\n        };\n\n        // for legend\n        $$.margin3 = {\n            top: 0,\n            right: NaN,\n            bottom: 0,\n            left: 0\n        };\n        if ($$.updateSizeForLegend) {\n            $$.updateSizeForLegend(legendHeight, legendWidth);\n        }\n\n        $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n        $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n        if ($$.width < 0) {\n            $$.width = 0;\n        }\n        if ($$.height < 0) {\n            $$.height = 0;\n        }\n\n        $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n        $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n        if ($$.width2 < 0) {\n            $$.width2 = 0;\n        }\n        if ($$.height2 < 0) {\n            $$.height2 = 0;\n        }\n\n        // for arc\n        $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n        $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n        if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n            $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n        }\n        if ($$.updateRadius) {\n            $$.updateRadius();\n        }\n\n        if ($$.isLegendRight && hasArc) {\n            $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n        }\n    };\n\n    c3_chart_internal_fn.updateTargets = function (targets) {\n        var $$ = this;\n\n        /*-- Main --*/\n\n        //-- Text --//\n        $$.updateTargetsForText(targets);\n\n        //-- Bar --//\n        $$.updateTargetsForBar(targets);\n\n        //-- Line --//\n        $$.updateTargetsForLine(targets);\n\n        //-- Arc --//\n        if ($$.hasArcType() && $$.updateTargetsForArc) {\n            $$.updateTargetsForArc(targets);\n        }\n\n        /*-- Sub --*/\n\n        if ($$.updateTargetsForSubchart) {\n            $$.updateTargetsForSubchart(targets);\n        }\n\n        // Fade-in each chart\n        $$.showTargets();\n    };\n    c3_chart_internal_fn.showTargets = function () {\n        var $$ = this;\n        $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n            return $$.isTargetToShow(d.id);\n        }).transition().duration($$.config.transition_duration).style(\"opacity\", 1);\n    };\n\n    c3_chart_internal_fn.redraw = function (options, transitions) {\n        var $$ = this,\n            main = $$.main,\n            d3 = $$.d3,\n            config = $$.config;\n        var areaIndices = $$.getShapeIndices($$.isAreaType),\n            barIndices = $$.getShapeIndices($$.isBarType),\n            lineIndices = $$.getShapeIndices($$.isLineType);\n        var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n        var hideAxis = $$.hasArcType();\n        var drawArea, drawBar, drawLine, xForText, yForText;\n        var duration, durationForExit, durationForAxis;\n        var waitForDraw, flow;\n        var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n            tickValues,\n            i,\n            intervalForCulling,\n            xDomainForZoom;\n        var xv = $$.xv.bind($$),\n            cx,\n            cy;\n\n        options = options || {};\n        withY = getOption(options, \"withY\", true);\n        withSubchart = getOption(options, \"withSubchart\", true);\n        withTransition = getOption(options, \"withTransition\", true);\n        withTransform = getOption(options, \"withTransform\", false);\n        withUpdateXDomain = getOption(options, \"withUpdateXDomain\", false);\n        withUpdateOrgXDomain = getOption(options, \"withUpdateOrgXDomain\", false);\n        withTrimXDomain = getOption(options, \"withTrimXDomain\", true);\n        withUpdateXAxis = getOption(options, \"withUpdateXAxis\", withUpdateXDomain);\n        withLegend = getOption(options, \"withLegend\", false);\n        withEventRect = getOption(options, \"withEventRect\", true);\n        withDimension = getOption(options, \"withDimension\", true);\n        withTransitionForExit = getOption(options, \"withTransitionForExit\", withTransition);\n        withTransitionForAxis = getOption(options, \"withTransitionForAxis\", withTransition);\n\n        duration = withTransition ? config.transition_duration : 0;\n        durationForExit = withTransitionForExit ? duration : 0;\n        durationForAxis = withTransitionForAxis ? duration : 0;\n\n        transitions = transitions || $$.axis.generateTransitions(durationForAxis);\n\n        // update legend and transform each g\n        if (withLegend && config.legend_show) {\n            $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n        } else if (withDimension) {\n            // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n            // no need to update axis in it because they will be updated in redraw()\n            $$.updateDimension(true);\n        }\n\n        // MEMO: needed for grids calculation\n        if ($$.isCategorized() && targetsToShow.length === 0) {\n            $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n        }\n\n        if (targetsToShow.length) {\n            $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n            if (!config.axis_x_tick_values) {\n                tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n            }\n        } else {\n            $$.xAxis.tickValues([]);\n            $$.subXAxis.tickValues([]);\n        }\n\n        if (config.zoom_rescale && !options.flow) {\n            xDomainForZoom = $$.x.orgDomain();\n        }\n\n        $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n        $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n\n        if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n            $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n        }\n        if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n            $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n        }\n\n        // axes\n        $$.axis.redraw(transitions, hideAxis);\n\n        // Update axis label\n        $$.axis.updateLabels(withTransition);\n\n        // show/hide if manual culling needed\n        if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n            if (config.axis_x_tick_culling && tickValues) {\n                for (i = 1; i < tickValues.length; i++) {\n                    if (tickValues.length / i < config.axis_x_tick_culling_max) {\n                        intervalForCulling = i;\n                        break;\n                    }\n                }\n                $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n                    var index = tickValues.indexOf(e);\n                    if (index >= 0) {\n                        d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n                    }\n                });\n            } else {\n                $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n            }\n        }\n\n        // setup drawer - MEMO: these must be called after axis updated\n        drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n        drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n        drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n        xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n        yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false);\n\n        // Update sub domain\n        if (withY) {\n            $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n            $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n        }\n\n        // xgrid focus\n        $$.updateXgridFocus();\n\n        // Data empty label positioning and text.\n        main.select(\"text.\" + CLASS.text + '.' + CLASS.empty).attr(\"x\", $$.width / 2).attr(\"y\", $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1);\n\n        // grid\n        $$.updateGrid(duration);\n\n        // rect for regions\n        $$.updateRegion(duration);\n\n        // bars\n        $$.updateBar(durationForExit);\n\n        // lines, areas and cricles\n        $$.updateLine(durationForExit);\n        $$.updateArea(durationForExit);\n        $$.updateCircle();\n\n        // text\n        if ($$.hasDataLabel()) {\n            $$.updateText(durationForExit);\n        }\n\n        // title\n        if ($$.redrawTitle) {\n            $$.redrawTitle();\n        }\n\n        // arc\n        if ($$.redrawArc) {\n            $$.redrawArc(duration, durationForExit, withTransform);\n        }\n\n        // subchart\n        if ($$.redrawSubchart) {\n            $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n        }\n\n        // circles for select\n        main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove();\n\n        // event rects will redrawn when flow called\n        if (config.interaction_enabled && !options.flow && withEventRect) {\n            $$.redrawEventRect();\n            if ($$.updateZoom) {\n                $$.updateZoom();\n            }\n        }\n\n        // update circleY based on updated parameters\n        $$.updateCircleY();\n\n        // generate circle x/y functions depending on updated params\n        cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n        cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\n\n        if (options.flow) {\n            flow = $$.generateFlow({\n                targets: targetsToShow,\n                flow: options.flow,\n                duration: options.flow.duration,\n                drawBar: drawBar,\n                drawLine: drawLine,\n                drawArea: drawArea,\n                cx: cx,\n                cy: cy,\n                xv: xv,\n                xForText: xForText,\n                yForText: yForText\n            });\n        }\n\n        if ((duration || flow) && $$.isTabVisible()) {\n            // Only use transition if tab visible. See #938.\n            // transition should be derived from one transition\n            d3.transition().duration(duration).each(function () {\n                var transitionsToWait = [];\n\n                // redraw and gather transitions\n                [$$.redrawBar(drawBar, true), $$.redrawLine(drawLine, true), $$.redrawArea(drawArea, true), $$.redrawCircle(cx, cy, true), $$.redrawText(xForText, yForText, options.flow, true), $$.redrawRegion(true), $$.redrawGrid(true)].forEach(function (transitions) {\n                    transitions.forEach(function (transition) {\n                        transitionsToWait.push(transition);\n                    });\n                });\n\n                // Wait for end of transitions to call flow and onrendered callback\n                waitForDraw = $$.generateWait();\n                transitionsToWait.forEach(function (t) {\n                    waitForDraw.add(t);\n                });\n            }).call(waitForDraw, function () {\n                if (flow) {\n                    flow();\n                }\n                if (config.onrendered) {\n                    config.onrendered.call($$);\n                }\n            });\n        } else {\n            $$.redrawBar(drawBar);\n            $$.redrawLine(drawLine);\n            $$.redrawArea(drawArea);\n            $$.redrawCircle(cx, cy);\n            $$.redrawText(xForText, yForText, options.flow);\n            $$.redrawRegion();\n            $$.redrawGrid();\n            if (config.onrendered) {\n                config.onrendered.call($$);\n            }\n        }\n\n        // update fadein condition\n        $$.mapToIds($$.data.targets).forEach(function (id) {\n            $$.withoutFadeIn[id] = true;\n        });\n    };\n\n    c3_chart_internal_fn.updateAndRedraw = function (options) {\n        var $$ = this,\n            config = $$.config,\n            transitions;\n        options = options || {};\n        // same with redraw\n        options.withTransition = getOption(options, \"withTransition\", true);\n        options.withTransform = getOption(options, \"withTransform\", false);\n        options.withLegend = getOption(options, \"withLegend\", false);\n        // NOT same with redraw\n        options.withUpdateXDomain = true;\n        options.withUpdateOrgXDomain = true;\n        options.withTransitionForExit = false;\n        options.withTransitionForTransform = getOption(options, \"withTransitionForTransform\", options.withTransition);\n        // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n        $$.updateSizes();\n        // MEMO: called in updateLegend in redraw if withLegend\n        if (!(options.withLegend && config.legend_show)) {\n            transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0);\n            // Update scales\n            $$.updateScales();\n            $$.updateSvgSize();\n            // Update g positions\n            $$.transformAll(options.withTransitionForTransform, transitions);\n        }\n        // Draw with new sizes & scales\n        $$.redraw(options, transitions);\n    };\n    c3_chart_internal_fn.redrawWithoutRescale = function () {\n        this.redraw({\n            withY: false,\n            withSubchart: false,\n            withEventRect: false,\n            withTransitionForAxis: false\n        });\n    };\n\n    c3_chart_internal_fn.isTimeSeries = function () {\n        return this.config.axis_x_type === 'timeseries';\n    };\n    c3_chart_internal_fn.isCategorized = function () {\n        return this.config.axis_x_type.indexOf('categor') >= 0;\n    };\n    c3_chart_internal_fn.isCustomX = function () {\n        var $$ = this,\n            config = $$.config;\n        return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n    };\n\n    c3_chart_internal_fn.isTimeSeriesY = function () {\n        return this.config.axis_y_type === 'timeseries';\n    };\n\n    c3_chart_internal_fn.getTranslate = function (target) {\n        var $$ = this,\n            config = $$.config,\n            x,\n            y;\n        if (target === 'main') {\n            x = asHalfPixel($$.margin.left);\n            y = asHalfPixel($$.margin.top);\n        } else if (target === 'context') {\n            x = asHalfPixel($$.margin2.left);\n            y = asHalfPixel($$.margin2.top);\n        } else if (target === 'legend') {\n            x = $$.margin3.left;\n            y = $$.margin3.top;\n        } else if (target === 'x') {\n            x = 0;\n            y = config.axis_rotated ? 0 : $$.height;\n        } else if (target === 'y') {\n            x = 0;\n            y = config.axis_rotated ? $$.height : 0;\n        } else if (target === 'y2') {\n            x = config.axis_rotated ? 0 : $$.width;\n            y = config.axis_rotated ? 1 : 0;\n        } else if (target === 'subx') {\n            x = 0;\n            y = config.axis_rotated ? 0 : $$.height2;\n        } else if (target === 'arc') {\n            x = $$.arcWidth / 2;\n            y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n        }\n        return \"translate(\" + x + \",\" + y + \")\";\n    };\n    c3_chart_internal_fn.initialOpacity = function (d) {\n        return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n    };\n    c3_chart_internal_fn.initialOpacityForCircle = function (d) {\n        return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n    };\n    c3_chart_internal_fn.opacityForCircle = function (d) {\n        var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n        var opacity = isPointShouldBeShown ? 1 : 0;\n        return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n    };\n    c3_chart_internal_fn.opacityForText = function () {\n        return this.hasDataLabel() ? 1 : 0;\n    };\n    c3_chart_internal_fn.xx = function (d) {\n        return d ? this.x(d.x) : null;\n    };\n    c3_chart_internal_fn.xv = function (d) {\n        var $$ = this,\n            value = d.value;\n        if ($$.isTimeSeries()) {\n            value = $$.parseDate(d.value);\n        } else if ($$.isCategorized() && typeof d.value === 'string') {\n            value = $$.config.axis_x_categories.indexOf(d.value);\n        }\n        return Math.ceil($$.x(value));\n    };\n    c3_chart_internal_fn.yv = function (d) {\n        var $$ = this,\n            yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n        return Math.ceil(yScale(d.value));\n    };\n    c3_chart_internal_fn.subxx = function (d) {\n        return d ? this.subX(d.x) : null;\n    };\n\n    c3_chart_internal_fn.transformMain = function (withTransition, transitions) {\n        var $$ = this,\n            xAxis,\n            yAxis,\n            y2Axis;\n        if (transitions && transitions.axisX) {\n            xAxis = transitions.axisX;\n        } else {\n            xAxis = $$.main.select('.' + CLASS.axisX);\n            if (withTransition) {\n                xAxis = xAxis.transition();\n            }\n        }\n        if (transitions && transitions.axisY) {\n            yAxis = transitions.axisY;\n        } else {\n            yAxis = $$.main.select('.' + CLASS.axisY);\n            if (withTransition) {\n                yAxis = yAxis.transition();\n            }\n        }\n        if (transitions && transitions.axisY2) {\n            y2Axis = transitions.axisY2;\n        } else {\n            y2Axis = $$.main.select('.' + CLASS.axisY2);\n            if (withTransition) {\n                y2Axis = y2Axis.transition();\n            }\n        }\n        (withTransition ? $$.main.transition() : $$.main).attr(\"transform\", $$.getTranslate('main'));\n        xAxis.attr(\"transform\", $$.getTranslate('x'));\n        yAxis.attr(\"transform\", $$.getTranslate('y'));\n        y2Axis.attr(\"transform\", $$.getTranslate('y2'));\n        $$.main.select('.' + CLASS.chartArcs).attr(\"transform\", $$.getTranslate('arc'));\n    };\n    c3_chart_internal_fn.transformAll = function (withTransition, transitions) {\n        var $$ = this;\n        $$.transformMain(withTransition, transitions);\n        if ($$.config.subchart_show) {\n            $$.transformContext(withTransition, transitions);\n        }\n        if ($$.legend) {\n            $$.transformLegend(withTransition);\n        }\n    };\n\n    c3_chart_internal_fn.updateSvgSize = function () {\n        var $$ = this,\n            brush = $$.svg.select(\".c3-brush .background\");\n        $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n        $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n        $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n        $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n        $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() ? brush.attr('height') : 0);\n        $$.svg.select('.' + CLASS.zoomRect).attr('width', $$.width).attr('height', $$.height);\n        // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n        $$.selectChart.style('max-height', $$.currentHeight + \"px\");\n    };\n\n    c3_chart_internal_fn.updateDimension = function (withoutAxis) {\n        var $$ = this;\n        if (!withoutAxis) {\n            if ($$.config.axis_rotated) {\n                $$.axes.x.call($$.xAxis);\n                $$.axes.subx.call($$.subXAxis);\n            } else {\n                $$.axes.y.call($$.yAxis);\n                $$.axes.y2.call($$.y2Axis);\n            }\n        }\n        $$.updateSizes();\n        $$.updateScales();\n        $$.updateSvgSize();\n        $$.transformAll(false);\n    };\n\n    c3_chart_internal_fn.observeInserted = function (selection) {\n        var $$ = this,\n            observer;\n        if (typeof MutationObserver === 'undefined') {\n            window.console.error(\"MutationObserver not defined.\");\n            return;\n        }\n        observer = new MutationObserver(function (mutations) {\n            mutations.forEach(function (mutation) {\n                if (mutation.type === 'childList' && mutation.previousSibling) {\n                    observer.disconnect();\n                    // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n                    $$.intervalForObserveInserted = window.setInterval(function () {\n                        // parentNode will NOT be null when completed\n                        if (selection.node().parentNode) {\n                            window.clearInterval($$.intervalForObserveInserted);\n                            $$.updateDimension();\n                            if ($$.brush) {\n                                $$.brush.update();\n                            }\n                            $$.config.oninit.call($$);\n                            $$.redraw({\n                                withTransform: true,\n                                withUpdateXDomain: true,\n                                withUpdateOrgXDomain: true,\n                                withTransition: false,\n                                withTransitionForTransform: false,\n                                withLegend: true\n                            });\n                            selection.transition().style('opacity', 1);\n                        }\n                    }, 10);\n                }\n            });\n        });\n        observer.observe(selection.node(), { attributes: true, childList: true, characterData: true });\n    };\n\n    c3_chart_internal_fn.bindResize = function () {\n        var $$ = this,\n            config = $$.config;\n\n        $$.resizeFunction = $$.generateResize(); // need to call .remove\n\n        $$.resizeFunction.add(function () {\n            config.onresize.call($$);\n        });\n        if (config.resize_auto) {\n            $$.resizeFunction.add(function () {\n                if ($$.resizeTimeout !== undefined) {\n                    window.clearTimeout($$.resizeTimeout);\n                }\n                $$.resizeTimeout = window.setTimeout(function () {\n                    delete $$.resizeTimeout;\n                    $$.api.flush();\n                }, 100);\n            });\n        }\n        $$.resizeFunction.add(function () {\n            config.onresized.call($$);\n        });\n\n        $$.resizeIfElementDisplayed = function () {\n            // if element not displayed skip it\n            if ($$.api == null || !$$.api.element.offsetParent) {\n                return;\n            }\n\n            $$.resizeFunction();\n        };\n\n        if (window.attachEvent) {\n            window.attachEvent('onresize', $$.resizeIfElementDisplayed);\n        } else if (window.addEventListener) {\n            window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n        } else {\n            // fallback to this, if this is a very old browser\n            var wrapper = window.onresize;\n            if (!wrapper) {\n                // create a wrapper that will call all charts\n                wrapper = $$.generateResize();\n            } else if (!wrapper.add || !wrapper.remove) {\n                // there is already a handler registered, make sure we call it too\n                wrapper = $$.generateResize();\n                wrapper.add(window.onresize);\n            }\n            // add this graph to the wrapper, we will be removed if the user calls destroy\n            wrapper.add($$.resizeFunction);\n            window.onresize = function () {\n                // if element not displayed skip it\n                if (!$$.api.element.offsetParent) {\n                    return;\n                }\n\n                wrapper();\n            };\n        }\n    };\n\n    c3_chart_internal_fn.generateResize = function () {\n        var resizeFunctions = [];\n        function callResizeFunctions() {\n            resizeFunctions.forEach(function (f) {\n                f();\n            });\n        }\n        callResizeFunctions.add = function (f) {\n            resizeFunctions.push(f);\n        };\n        callResizeFunctions.remove = function (f) {\n            for (var i = 0; i < resizeFunctions.length; i++) {\n                if (resizeFunctions[i] === f) {\n                    resizeFunctions.splice(i, 1);\n                    break;\n                }\n            }\n        };\n        return callResizeFunctions;\n    };\n\n    c3_chart_internal_fn.endall = function (transition, callback) {\n        var n = 0;\n        transition.each(function () {\n            ++n;\n        }).each(\"end\", function () {\n            if (! --n) {\n                callback.apply(this, arguments);\n            }\n        });\n    };\n    c3_chart_internal_fn.generateWait = function () {\n        var transitionsToWait = [],\n            f = function f(transition, callback) {\n            var timer = setInterval(function () {\n                var done = 0;\n                transitionsToWait.forEach(function (t) {\n                    if (t.empty()) {\n                        done += 1;\n                        return;\n                    }\n                    try {\n                        t.transition();\n                    } catch (e) {\n                        done += 1;\n                    }\n                });\n                if (done === transitionsToWait.length) {\n                    clearInterval(timer);\n                    if (callback) {\n                        callback();\n                    }\n                }\n            }, 10);\n        };\n        f.add = function (transition) {\n            transitionsToWait.push(transition);\n        };\n        return f;\n    };\n\n    c3_chart_internal_fn.parseDate = function (date) {\n        var $$ = this,\n            parsedDate;\n        if (date instanceof Date) {\n            parsedDate = date;\n        } else if (typeof date === 'string') {\n            parsedDate = $$.dataTimeFormat($$.config.data_xFormat).parse(date);\n        } else if ((typeof date === 'undefined' ? 'undefined' : _typeof(date)) === 'object') {\n            parsedDate = new Date(+date);\n        } else if (typeof date === 'number' && !isNaN(date)) {\n            parsedDate = new Date(+date);\n        }\n        if (!parsedDate || isNaN(+parsedDate)) {\n            window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n        }\n        return parsedDate;\n    };\n\n    c3_chart_internal_fn.isTabVisible = function () {\n        var hidden;\n        if (typeof document.hidden !== \"undefined\") {\n            // Opera 12.10 and Firefox 18 and later support\n            hidden = \"hidden\";\n        } else if (typeof document.mozHidden !== \"undefined\") {\n            hidden = \"mozHidden\";\n        } else if (typeof document.msHidden !== \"undefined\") {\n            hidden = \"msHidden\";\n        } else if (typeof document.webkitHidden !== \"undefined\") {\n            hidden = \"webkitHidden\";\n        }\n\n        return document[hidden] ? false : true;\n    };\n\n    c3_chart_internal_fn.isValue = isValue;\n    c3_chart_internal_fn.isFunction = isFunction;\n    c3_chart_internal_fn.isString = isString;\n    c3_chart_internal_fn.isUndefined = isUndefined;\n    c3_chart_internal_fn.isDefined = isDefined;\n    c3_chart_internal_fn.ceil10 = ceil10;\n    c3_chart_internal_fn.asHalfPixel = asHalfPixel;\n    c3_chart_internal_fn.diffDomain = diffDomain;\n    c3_chart_internal_fn.isEmpty = isEmpty;\n    c3_chart_internal_fn.notEmpty = notEmpty;\n    c3_chart_internal_fn.notEmpty = notEmpty;\n    c3_chart_internal_fn.getOption = getOption;\n    c3_chart_internal_fn.hasValue = hasValue;\n    c3_chart_internal_fn.sanitise = sanitise;\n    c3_chart_internal_fn.getPathBox = getPathBox;\n    c3_chart_internal_fn.CLASS = CLASS;\n\n    /* jshint ignore:start */\n\n    // PhantomJS doesn't have support for Function.prototype.bind, which has caused confusion. Use\n    // this polyfill to avoid the confusion.\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill\n\n    if (!Function.prototype.bind) {\n        Function.prototype.bind = function (oThis) {\n            if (typeof this !== 'function') {\n                // closest thing possible to the ECMAScript 5\n                // internal IsCallable function\n                throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n            }\n\n            var aArgs = Array.prototype.slice.call(arguments, 1),\n                fToBind = this,\n                fNOP = function fNOP() {},\n                fBound = function fBound() {\n                return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n\n            fNOP.prototype = this.prototype;\n            fBound.prototype = new fNOP();\n\n            return fBound;\n        };\n    }\n\n    // SVGPathSeg API polyfill\n    // https://github.com/progers/pathseg\n    //\n    // This is a drop-in replacement for the SVGPathSeg and SVGPathSegList APIs that were removed from\n    // SVG2 (https://lists.w3.org/Archives/Public/www-svg/2015Jun/0044.html), including the latest spec\n    // changes which were implemented in Firefox 43 and Chrome 46.\n\n    (function () {\n\n        if (!(\"SVGPathSeg\" in window)) {\n            // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n            window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n                this.pathSegType = type;\n                this.pathSegTypeAsLetter = typeAsLetter;\n                this._owningPathSegList = owningPathSegList;\n            };\n\n            window.SVGPathSeg.prototype.classname = \"SVGPathSeg\";\n\n            window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n            window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n            window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n            window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n            window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n            window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n            window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n            window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n            window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n            window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n            window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n            window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;\n\n            // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n            window.SVGPathSeg.prototype._segmentChanged = function () {\n                if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n            };\n\n            window.SVGPathSegClosePath = function (owningPathSegList) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, \"z\", owningPathSegList);\n            };\n            window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegClosePath.prototype.toString = function () {\n                return \"[object SVGPathSegClosePath]\";\n            };\n            window.SVGPathSegClosePath.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter;\n            };\n            window.SVGPathSegClosePath.prototype.clone = function () {\n                return new window.SVGPathSegClosePath(undefined);\n            };\n\n            window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, \"M\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegMovetoAbs.prototype.toString = function () {\n                return \"[object SVGPathSegMovetoAbs]\";\n            };\n            window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegMovetoAbs.prototype.clone = function () {\n                return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, \"m\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegMovetoRel.prototype.toString = function () {\n                return \"[object SVGPathSegMovetoRel]\";\n            };\n            window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegMovetoRel.prototype.clone = function () {\n                return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegMovetoRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegMovetoRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, \"L\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoAbs.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoAbs]\";\n            };\n            window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegLinetoAbs.prototype.clone = function () {\n                return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, \"l\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoRel.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoRel]\";\n            };\n            window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegLinetoRel.prototype.clone = function () {\n                return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegLinetoRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, \"C\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x1 = x1;\n                this._y1 = y1;\n                this._x2 = x2;\n                this._y2 = y2;\n            };\n            window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoCubicAbs]\";\n            };\n            window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x1\", { get: function get() {\n                    return this._x1;\n                }, set: function set(x1) {\n                    this._x1 = x1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y1\", { get: function get() {\n                    return this._y1;\n                }, set: function set(y1) {\n                    this._y1 = y1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"x2\", { get: function get() {\n                    return this._x2;\n                }, set: function set(x2) {\n                    this._x2 = x2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, \"y2\", { get: function get() {\n                    return this._y2;\n                }, set: function set(y2) {\n                    this._y2 = y2;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, \"c\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x1 = x1;\n                this._y1 = y1;\n                this._x2 = x2;\n                this._y2 = y2;\n            };\n            window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoCubicRel]\";\n            };\n            window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x1\", { get: function get() {\n                    return this._x1;\n                }, set: function set(x1) {\n                    this._x1 = x1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y1\", { get: function get() {\n                    return this._y1;\n                }, set: function set(y1) {\n                    this._y1 = y1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"x2\", { get: function get() {\n                    return this._x2;\n                }, set: function set(x2) {\n                    this._x2 = x2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, \"y2\", { get: function get() {\n                    return this._y2;\n                }, set: function set(y2) {\n                    this._y2 = y2;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, \"Q\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x1 = x1;\n                this._y1 = y1;\n            };\n            window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoQuadraticAbs]\";\n            };\n            window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"x1\", { get: function get() {\n                    return this._x1;\n                }, set: function set(x1) {\n                    this._x1 = x1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, \"y1\", { get: function get() {\n                    return this._y1;\n                }, set: function set(y1) {\n                    this._y1 = y1;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, \"q\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x1 = x1;\n                this._y1 = y1;\n            };\n            window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoQuadraticRel]\";\n            };\n            window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x1 + \" \" + this._y1 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"x1\", { get: function get() {\n                    return this._x1;\n                }, set: function set(x1) {\n                    this._x1 = x1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, \"y1\", { get: function get() {\n                    return this._y1;\n                }, set: function set(y1) {\n                    this._y1 = y1;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, \"A\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._r1 = r1;\n                this._r2 = r2;\n                this._angle = angle;\n                this._largeArcFlag = largeArcFlag;\n                this._sweepFlag = sweepFlag;\n            };\n            window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegArcAbs.prototype.toString = function () {\n                return \"[object SVGPathSegArcAbs]\";\n            };\n            window.SVGPathSegArcAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._r1 + \" \" + this._r2 + \" \" + this._angle + \" \" + (this._largeArcFlag ? \"1\" : \"0\") + \" \" + (this._sweepFlag ? \"1\" : \"0\") + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegArcAbs.prototype.clone = function () {\n                return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n            };\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"r1\", { get: function get() {\n                    return this._r1;\n                }, set: function set(r1) {\n                    this._r1 = r1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"r2\", { get: function get() {\n                    return this._r2;\n                }, set: function set(r2) {\n                    this._r2 = r2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"angle\", { get: function get() {\n                    return this._angle;\n                }, set: function set(angle) {\n                    this._angle = angle;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"largeArcFlag\", { get: function get() {\n                    return this._largeArcFlag;\n                }, set: function set(largeArcFlag) {\n                    this._largeArcFlag = largeArcFlag;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcAbs.prototype, \"sweepFlag\", { get: function get() {\n                    return this._sweepFlag;\n                }, set: function set(sweepFlag) {\n                    this._sweepFlag = sweepFlag;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, \"a\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._r1 = r1;\n                this._r2 = r2;\n                this._angle = angle;\n                this._largeArcFlag = largeArcFlag;\n                this._sweepFlag = sweepFlag;\n            };\n            window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegArcRel.prototype.toString = function () {\n                return \"[object SVGPathSegArcRel]\";\n            };\n            window.SVGPathSegArcRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._r1 + \" \" + this._r2 + \" \" + this._angle + \" \" + (this._largeArcFlag ? \"1\" : \"0\") + \" \" + (this._sweepFlag ? \"1\" : \"0\") + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegArcRel.prototype.clone = function () {\n                return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n            };\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"r1\", { get: function get() {\n                    return this._r1;\n                }, set: function set(r1) {\n                    this._r1 = r1;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"r2\", { get: function get() {\n                    return this._r2;\n                }, set: function set(r2) {\n                    this._r2 = r2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"angle\", { get: function get() {\n                    return this._angle;\n                }, set: function set(angle) {\n                    this._angle = angle;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"largeArcFlag\", { get: function get() {\n                    return this._largeArcFlag;\n                }, set: function set(largeArcFlag) {\n                    this._largeArcFlag = largeArcFlag;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegArcRel.prototype, \"sweepFlag\", { get: function get() {\n                    return this._sweepFlag;\n                }, set: function set(sweepFlag) {\n                    this._sweepFlag = sweepFlag;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, \"H\", owningPathSegList);\n                this._x = x;\n            };\n            window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoHorizontalAbs]\";\n            };\n            window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x;\n            };\n            window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n                return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, \"h\", owningPathSegList);\n                this._x = x;\n            };\n            window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoHorizontalRel]\";\n            };\n            window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x;\n            };\n            window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n                return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, \"V\", owningPathSegList);\n                this._y = y;\n            };\n            window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoVerticalAbs]\";\n            };\n            window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._y;\n            };\n            window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n                return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, \"v\", owningPathSegList);\n                this._y = y;\n            };\n            window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n                return \"[object SVGPathSegLinetoVerticalRel]\";\n            };\n            window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._y;\n            };\n            window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n                return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, \"S\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x2 = x2;\n                this._y2 = y2;\n            };\n            window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoCubicSmoothAbs]\";\n            };\n            window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"x2\", { get: function get() {\n                    return this._x2;\n                }, set: function set(x2) {\n                    this._x2 = x2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, \"y2\", { get: function get() {\n                    return this._y2;\n                }, set: function set(y2) {\n                    this._y2 = y2;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, \"s\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n                this._x2 = x2;\n                this._y2 = y2;\n            };\n            window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoCubicSmoothRel]\";\n            };\n            window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x2 + \" \" + this._y2 + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"x2\", { get: function get() {\n                    return this._x2;\n                }, set: function set(x2) {\n                    this._x2 = x2;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, \"y2\", { get: function get() {\n                    return this._y2;\n                }, set: function set(y2) {\n                    this._y2 = y2;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, \"T\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoQuadraticSmoothAbs]\";\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, \"t\", owningPathSegList);\n                this._x = x;\n                this._y = y;\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n            window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n                return \"[object SVGPathSegCurvetoQuadraticSmoothRel]\";\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n                return this.pathSegTypeAsLetter + \" \" + this._x + \" \" + this._y;\n            };\n            window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n                return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n            };\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, \"x\", { get: function get() {\n                    return this._x;\n                }, set: function set(x) {\n                    this._x = x;this._segmentChanged();\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, \"y\", { get: function get() {\n                    return this._y;\n                }, set: function set(y) {\n                    this._y = y;this._segmentChanged();\n                }, enumerable: true });\n\n            // Add createSVGPathSeg* functions to window.SVGPathElement.\n            // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n            window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n                return new window.SVGPathSegClosePath(undefined);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n                return new window.SVGPathSegMovetoAbs(undefined, x, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n                return new window.SVGPathSegMovetoRel(undefined, x, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n                return new window.SVGPathSegLinetoAbs(undefined, x, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n                return new window.SVGPathSegLinetoRel(undefined, x, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n                return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n                return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n                return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n                return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n                return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n                return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n                return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n                return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n                return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n                return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n                return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n                return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n                return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n            };\n            window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n                return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n            };\n\n            if (!(\"getPathSegAtLength\" in window.SVGPathElement.prototype)) {\n                // Add getPathSegAtLength to SVGPathElement.\n                // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n                // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n                window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n                    if (distance === undefined || !isFinite(distance)) throw \"Invalid arguments.\";\n\n                    var measurementElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                    measurementElement.setAttribute(\"d\", this.getAttribute(\"d\"));\n                    var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;\n\n                    // If the path is empty, return 0.\n                    if (lastPathSegment <= 0) return 0;\n\n                    do {\n                        measurementElement.pathSegList.removeItem(lastPathSegment);\n                        if (distance > measurementElement.getTotalLength()) break;\n                        lastPathSegment--;\n                    } while (lastPathSegment > 0);\n                    return lastPathSegment;\n                };\n            }\n        }\n\n        if (!(\"SVGPathSegList\" in window)) {\n            // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n            window.SVGPathSegList = function (pathElement) {\n                this._pathElement = pathElement;\n                this._list = this._parsePath(this._pathElement.getAttribute(\"d\"));\n\n                // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n                this._mutationObserverConfig = { \"attributes\": true, \"attributeFilter\": [\"d\"] };\n                this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n                this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n            };\n\n            window.SVGPathSegList.prototype.classname = \"SVGPathSegList\";\n\n            Object.defineProperty(window.SVGPathSegList.prototype, \"numberOfItems\", {\n                get: function get() {\n                    this._checkPathSynchronizedToList();\n                    return this._list.length;\n                },\n                enumerable: true\n            });\n\n            // Add the pathSegList accessors to window.SVGPathElement.\n            // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n            Object.defineProperty(window.SVGPathElement.prototype, \"pathSegList\", {\n                get: function get() {\n                    if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n                    return this._pathSegList;\n                },\n                enumerable: true\n            });\n            // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n            Object.defineProperty(window.SVGPathElement.prototype, \"normalizedPathSegList\", { get: function get() {\n                    return this.pathSegList;\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathElement.prototype, \"animatedPathSegList\", { get: function get() {\n                    return this.pathSegList;\n                }, enumerable: true });\n            Object.defineProperty(window.SVGPathElement.prototype, \"animatedNormalizedPathSegList\", { get: function get() {\n                    return this.pathSegList;\n                }, enumerable: true });\n\n            // Process any pending mutations to the path element and update the list as needed.\n            // This should be the first call of all public functions and is needed because\n            // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n            window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n                this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n            };\n\n            window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n                if (!this._pathElement) return;\n                var hasPathMutations = false;\n                mutationRecords.forEach(function (record) {\n                    if (record.attributeName == \"d\") hasPathMutations = true;\n                });\n                if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute(\"d\"));\n            };\n\n            // Serialize the list and update the path's 'd' attribute.\n            window.SVGPathSegList.prototype._writeListToPath = function () {\n                this._pathElementMutationObserver.disconnect();\n                this._pathElement.setAttribute(\"d\", window.SVGPathSegList._pathSegArrayAsString(this._list));\n                this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n            };\n\n            // When a path segment changes the list needs to be synchronized back to the path element.\n            window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n                this._writeListToPath();\n            };\n\n            window.SVGPathSegList.prototype.clear = function () {\n                this._checkPathSynchronizedToList();\n\n                this._list.forEach(function (pathSeg) {\n                    pathSeg._owningPathSegList = null;\n                });\n                this._list = [];\n                this._writeListToPath();\n            };\n\n            window.SVGPathSegList.prototype.initialize = function (newItem) {\n                this._checkPathSynchronizedToList();\n\n                this._list = [newItem];\n                newItem._owningPathSegList = this;\n                this._writeListToPath();\n                return newItem;\n            };\n\n            window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n                if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw \"INDEX_SIZE_ERR\";\n            };\n\n            window.SVGPathSegList.prototype.getItem = function (index) {\n                this._checkPathSynchronizedToList();\n\n                this._checkValidIndex(index);\n                return this._list[index];\n            };\n\n            window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n                this._checkPathSynchronizedToList();\n\n                // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n                if (index > this.numberOfItems) index = this.numberOfItems;\n                if (newItem._owningPathSegList) {\n                    // SVG2 spec says to make a copy.\n                    newItem = newItem.clone();\n                }\n                this._list.splice(index, 0, newItem);\n                newItem._owningPathSegList = this;\n                this._writeListToPath();\n                return newItem;\n            };\n\n            window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n                this._checkPathSynchronizedToList();\n\n                if (newItem._owningPathSegList) {\n                    // SVG2 spec says to make a copy.\n                    newItem = newItem.clone();\n                }\n                this._checkValidIndex(index);\n                this._list[index] = newItem;\n                newItem._owningPathSegList = this;\n                this._writeListToPath();\n                return newItem;\n            };\n\n            window.SVGPathSegList.prototype.removeItem = function (index) {\n                this._checkPathSynchronizedToList();\n\n                this._checkValidIndex(index);\n                var item = this._list[index];\n                this._list.splice(index, 1);\n                this._writeListToPath();\n                return item;\n            };\n\n            window.SVGPathSegList.prototype.appendItem = function (newItem) {\n                this._checkPathSynchronizedToList();\n\n                if (newItem._owningPathSegList) {\n                    // SVG2 spec says to make a copy.\n                    newItem = newItem.clone();\n                }\n                this._list.push(newItem);\n                newItem._owningPathSegList = this;\n                // TODO: Optimize this to just append to the existing attribute.\n                this._writeListToPath();\n                return newItem;\n            };\n\n            window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n                var string = \"\";\n                var first = true;\n                pathSegArray.forEach(function (pathSeg) {\n                    if (first) {\n                        first = false;\n                        string += pathSeg._asPathString();\n                    } else {\n                        string += \" \" + pathSeg._asPathString();\n                    }\n                });\n                return string;\n            };\n\n            // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n            window.SVGPathSegList.prototype._parsePath = function (string) {\n                if (!string || string.length == 0) return [];\n\n                var owningPathSegList = this;\n\n                var Builder = function Builder() {\n                    this.pathSegList = [];\n                };\n\n                Builder.prototype.appendSegment = function (pathSeg) {\n                    this.pathSegList.push(pathSeg);\n                };\n\n                var Source = function Source(string) {\n                    this._string = string;\n                    this._currentIndex = 0;\n                    this._endIndex = this._string.length;\n                    this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n\n                    this._skipOptionalSpaces();\n                };\n\n                Source.prototype._isCurrentSpace = function () {\n                    var character = this._string[this._currentIndex];\n                    return character <= \" \" && (character == \" \" || character == \"\\n\" || character == \"\\t\" || character == \"\\r\" || character == \"\\f\");\n                };\n\n                Source.prototype._skipOptionalSpaces = function () {\n                    while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {\n                        this._currentIndex++;\n                    }return this._currentIndex < this._endIndex;\n                };\n\n                Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n                    if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != \",\") return false;\n                    if (this._skipOptionalSpaces()) {\n                        if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \",\") {\n                            this._currentIndex++;\n                            this._skipOptionalSpaces();\n                        }\n                    }\n                    return this._currentIndex < this._endIndex;\n                };\n\n                Source.prototype.hasMoreData = function () {\n                    return this._currentIndex < this._endIndex;\n                };\n\n                Source.prototype.peekSegmentType = function () {\n                    var lookahead = this._string[this._currentIndex];\n                    return this._pathSegTypeFromChar(lookahead);\n                };\n\n                Source.prototype._pathSegTypeFromChar = function (lookahead) {\n                    switch (lookahead) {\n                        case \"Z\":\n                        case \"z\":\n                            return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n                        case \"M\":\n                            return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n                        case \"m\":\n                            return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n                        case \"L\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n                        case \"l\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_REL;\n                        case \"C\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n                        case \"c\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n                        case \"Q\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n                        case \"q\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n                        case \"A\":\n                            return window.SVGPathSeg.PATHSEG_ARC_ABS;\n                        case \"a\":\n                            return window.SVGPathSeg.PATHSEG_ARC_REL;\n                        case \"H\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n                        case \"h\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n                        case \"V\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n                        case \"v\":\n                            return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n                        case \"S\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n                        case \"s\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n                        case \"T\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n                        case \"t\":\n                            return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n                        default:\n                            return window.SVGPathSeg.PATHSEG_UNKNOWN;\n                    }\n                };\n\n                Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n                    // Check for remaining coordinates in the current command.\n                    if ((lookahead == \"+\" || lookahead == \"-\" || lookahead == \".\" || lookahead >= \"0\" && lookahead <= \"9\") && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n                        if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n                        if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n                        return previousCommand;\n                    }\n                    return window.SVGPathSeg.PATHSEG_UNKNOWN;\n                };\n\n                Source.prototype.initialCommandIsMoveTo = function () {\n                    // If the path is empty it is still valid, so return true.\n                    if (!this.hasMoreData()) return true;\n                    var command = this.peekSegmentType();\n                    // Path must start with moveTo.\n                    return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n                };\n\n                // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n                // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n                Source.prototype._parseNumber = function () {\n                    var exponent = 0;\n                    var integer = 0;\n                    var frac = 1;\n                    var decimal = 0;\n                    var sign = 1;\n                    var expsign = 1;\n\n                    var startIndex = this._currentIndex;\n\n                    this._skipOptionalSpaces();\n\n                    // Read the sign.\n                    if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \"+\") this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \"-\") {\n                        this._currentIndex++;\n                        sign = -1;\n                    }\n\n                    if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") && this._string.charAt(this._currentIndex) != \".\")\n                        // The first character of a number must be one of [0-9+-.].\n                        return undefined;\n\n                    // Read the integer part, build right-to-left.\n                    var startIntPartIndex = this._currentIndex;\n                    while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n                        this._currentIndex++;\n                    } // Advance to first non-digit.\n\n                    if (this._currentIndex != startIntPartIndex) {\n                        var scanIntPartIndex = this._currentIndex - 1;\n                        var multiplier = 1;\n                        while (scanIntPartIndex >= startIntPartIndex) {\n                            integer += multiplier * (this._string.charAt(scanIntPartIndex--) - \"0\");\n                            multiplier *= 10;\n                        }\n                    }\n\n                    // Read the decimals.\n                    if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == \".\") {\n                        this._currentIndex++;\n\n                        // There must be a least one digit following the .\n                        if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") return undefined;\n                        while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n                            frac *= 10;\n                            decimal += (this._string.charAt(this._currentIndex) - \"0\") / frac;\n                            this._currentIndex += 1;\n                        }\n                    }\n\n                    // Read the exponent part.\n                    if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == \"e\" || this._string.charAt(this._currentIndex) == \"E\") && this._string.charAt(this._currentIndex + 1) != \"x\" && this._string.charAt(this._currentIndex + 1) != \"m\") {\n                        this._currentIndex++;\n\n                        // Read the sign of the exponent.\n                        if (this._string.charAt(this._currentIndex) == \"+\") {\n                            this._currentIndex++;\n                        } else if (this._string.charAt(this._currentIndex) == \"-\") {\n                            this._currentIndex++;\n                            expsign = -1;\n                        }\n\n                        // There must be an exponent.\n                        if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < \"0\" || this._string.charAt(this._currentIndex) > \"9\") return undefined;\n\n                        while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= \"0\" && this._string.charAt(this._currentIndex) <= \"9\") {\n                            exponent *= 10;\n                            exponent += this._string.charAt(this._currentIndex) - \"0\";\n                            this._currentIndex++;\n                        }\n                    }\n\n                    var number = integer + decimal;\n                    number *= sign;\n\n                    if (exponent) number *= Math.pow(10, expsign * exponent);\n\n                    if (startIndex == this._currentIndex) return undefined;\n\n                    this._skipOptionalSpacesOrDelimiter();\n\n                    return number;\n                };\n\n                Source.prototype._parseArcFlag = function () {\n                    if (this._currentIndex >= this._endIndex) return undefined;\n                    var flag = false;\n                    var flagChar = this._string.charAt(this._currentIndex++);\n                    if (flagChar == \"0\") flag = false;else if (flagChar == \"1\") flag = true;else return undefined;\n\n                    this._skipOptionalSpacesOrDelimiter();\n                    return flag;\n                };\n\n                Source.prototype.parseSegment = function () {\n                    var lookahead = this._string[this._currentIndex];\n                    var command = this._pathSegTypeFromChar(lookahead);\n                    if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n                        // Possibly an implicit command. Not allowed if this is the first command.\n                        if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n                        command = this._nextCommandHelper(lookahead, this._previousCommand);\n                        if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n                    } else {\n                        this._currentIndex++;\n                    }\n\n                    this._previousCommand = command;\n\n                    switch (command) {\n                        case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n                            return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n                            return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_REL:\n                            return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n                            return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n                            return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n                            return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n                            return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n                            return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n                            this._skipOptionalSpaces();\n                            return new window.SVGPathSegClosePath(owningPathSegList);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n                            var points = { x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n                            var points = { x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n                        case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n                            return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n                            return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n                        case window.SVGPathSeg.PATHSEG_ARC_REL:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n                        case window.SVGPathSeg.PATHSEG_ARC_ABS:\n                            var points = { x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber() };\n                            return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n                        default:\n                            throw \"Unknown path seg type.\";\n                    }\n                };\n\n                var builder = new Builder();\n                var source = new Source(string);\n\n                if (!source.initialCommandIsMoveTo()) return [];\n                while (source.hasMoreData()) {\n                    var pathSeg = source.parseSegment();\n                    if (!pathSeg) return [];\n                    builder.appendSegment(pathSeg);\n                }\n\n                return builder.pathSegList;\n            };\n        }\n    })();\n\n    // String.padEnd polyfill for IE11\n    //\n    // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n    if (!String.prototype.padEnd) {\n        String.prototype.padEnd = function padEnd(targetLength, padString) {\n            targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n            padString = String(typeof padString !== 'undefined' ? padString : ' ');\n            if (this.length > targetLength) {\n                return String(this);\n            } else {\n                targetLength = targetLength - this.length;\n                if (targetLength > padString.length) {\n                    padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n                }\n                return String(this) + padString.slice(0, targetLength);\n            }\n        };\n    }\n\n    /* jshint ignore:end */\n\n    c3_chart_fn.axis = function () {};\n    c3_chart_fn.axis.labels = function (labels) {\n        var $$ = this.internal;\n        if (arguments.length) {\n            Object.keys(labels).forEach(function (axisId) {\n                $$.axis.setLabelText(axisId, labels[axisId]);\n            });\n            $$.axis.updateLabels();\n        }\n        // TODO: return some values?\n    };\n    c3_chart_fn.axis.max = function (max) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (arguments.length) {\n            if ((typeof max === 'undefined' ? 'undefined' : _typeof(max)) === 'object') {\n                if (isValue(max.x)) {\n                    config.axis_x_max = max.x;\n                }\n                if (isValue(max.y)) {\n                    config.axis_y_max = max.y;\n                }\n                if (isValue(max.y2)) {\n                    config.axis_y2_max = max.y2;\n                }\n            } else {\n                config.axis_y_max = config.axis_y2_max = max;\n            }\n            $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\n        } else {\n            return {\n                x: config.axis_x_max,\n                y: config.axis_y_max,\n                y2: config.axis_y2_max\n            };\n        }\n    };\n    c3_chart_fn.axis.min = function (min) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (arguments.length) {\n            if ((typeof min === 'undefined' ? 'undefined' : _typeof(min)) === 'object') {\n                if (isValue(min.x)) {\n                    config.axis_x_min = min.x;\n                }\n                if (isValue(min.y)) {\n                    config.axis_y_min = min.y;\n                }\n                if (isValue(min.y2)) {\n                    config.axis_y2_min = min.y2;\n                }\n            } else {\n                config.axis_y_min = config.axis_y2_min = min;\n            }\n            $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\n        } else {\n            return {\n                x: config.axis_x_min,\n                y: config.axis_y_min,\n                y2: config.axis_y2_min\n            };\n        }\n    };\n    c3_chart_fn.axis.range = function (range) {\n        if (arguments.length) {\n            if (isDefined(range.max)) {\n                this.axis.max(range.max);\n            }\n            if (isDefined(range.min)) {\n                this.axis.min(range.min);\n            }\n        } else {\n            return {\n                max: this.axis.max(),\n                min: this.axis.min()\n            };\n        }\n    };\n\n    c3_chart_fn.category = function (i, category) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (arguments.length > 1) {\n            config.axis_x_categories[i] = category;\n            $$.redraw();\n        }\n        return config.axis_x_categories[i];\n    };\n    c3_chart_fn.categories = function (categories) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (!arguments.length) {\n            return config.axis_x_categories;\n        }\n        config.axis_x_categories = categories;\n        $$.redraw();\n        return config.axis_x_categories;\n    };\n\n    c3_chart_fn.resize = function (size) {\n        var $$ = this.internal,\n            config = $$.config;\n        config.size_width = size ? size.width : null;\n        config.size_height = size ? size.height : null;\n        this.flush();\n    };\n\n    c3_chart_fn.flush = function () {\n        var $$ = this.internal;\n        $$.updateAndRedraw({ withLegend: true, withTransition: false, withTransitionForTransform: false });\n    };\n\n    c3_chart_fn.destroy = function () {\n        var $$ = this.internal;\n\n        window.clearInterval($$.intervalForObserveInserted);\n\n        if ($$.resizeTimeout !== undefined) {\n            window.clearTimeout($$.resizeTimeout);\n        }\n\n        if (window.detachEvent) {\n            window.detachEvent('onresize', $$.resizeIfElementDisplayed);\n        } else if (window.removeEventListener) {\n            window.removeEventListener('resize', $$.resizeIfElementDisplayed);\n        } else {\n            var wrapper = window.onresize;\n            // check if no one else removed our wrapper and remove our resizeFunction from it\n            if (wrapper && wrapper.add && wrapper.remove) {\n                wrapper.remove($$.resizeFunction);\n            }\n        }\n\n        // remove the inner resize functions\n        $$.resizeFunction.remove();\n\n        $$.selectChart.classed('c3', false).html(\"\");\n\n        // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n        Object.keys($$).forEach(function (key) {\n            $$[key] = null;\n        });\n\n        return null;\n    };\n\n    // TODO: fix\n    c3_chart_fn.color = function (id) {\n        var $$ = this.internal;\n        return $$.color(id); // more patterns\n    };\n\n    c3_chart_fn.data = function (targetIds) {\n        var targets = this.internal.data.targets;\n        return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n            return [].concat(targetIds).indexOf(t.id) >= 0;\n        });\n    };\n    c3_chart_fn.data.shown = function (targetIds) {\n        return this.internal.filterTargetsToShow(this.data(targetIds));\n    };\n    c3_chart_fn.data.values = function (targetId) {\n        var targets,\n            values = null;\n        if (targetId) {\n            targets = this.data(targetId);\n            values = targets[0] ? targets[0].values.map(function (d) {\n                return d.value;\n            }) : null;\n        }\n        return values;\n    };\n    c3_chart_fn.data.names = function (names) {\n        this.internal.clearLegendItemTextBoxCache();\n        return this.internal.updateDataAttributes('names', names);\n    };\n    c3_chart_fn.data.colors = function (colors) {\n        return this.internal.updateDataAttributes('colors', colors);\n    };\n    c3_chart_fn.data.axes = function (axes) {\n        return this.internal.updateDataAttributes('axes', axes);\n    };\n\n    c3_chart_fn.flow = function (args) {\n        var $$ = this.internal,\n            targets,\n            data,\n            notfoundIds = [],\n            orgDataCount = $$.getMaxDataCount(),\n            dataCount,\n            domain,\n            baseTarget,\n            baseValue,\n            length = 0,\n            tail = 0,\n            diff,\n            to;\n\n        if (args.json) {\n            data = $$.convertJsonToData(args.json, args.keys);\n        } else if (args.rows) {\n            data = $$.convertRowsToData(args.rows);\n        } else if (args.columns) {\n            data = $$.convertColumnsToData(args.columns);\n        } else {\n            return;\n        }\n        targets = $$.convertDataToTargets(data, true);\n\n        // Update/Add data\n        $$.data.targets.forEach(function (t) {\n            var found = false,\n                i,\n                j;\n            for (i = 0; i < targets.length; i++) {\n                if (t.id === targets[i].id) {\n                    found = true;\n\n                    if (t.values[t.values.length - 1]) {\n                        tail = t.values[t.values.length - 1].index + 1;\n                    }\n                    length = targets[i].values.length;\n\n                    for (j = 0; j < length; j++) {\n                        targets[i].values[j].index = tail + j;\n                        if (!$$.isTimeSeries()) {\n                            targets[i].values[j].x = tail + j;\n                        }\n                    }\n                    t.values = t.values.concat(targets[i].values);\n\n                    targets.splice(i, 1);\n                    break;\n                }\n            }\n            if (!found) {\n                notfoundIds.push(t.id);\n            }\n        });\n\n        // Append null for not found targets\n        $$.data.targets.forEach(function (t) {\n            var i, j;\n            for (i = 0; i < notfoundIds.length; i++) {\n                if (t.id === notfoundIds[i]) {\n                    tail = t.values[t.values.length - 1].index + 1;\n                    for (j = 0; j < length; j++) {\n                        t.values.push({\n                            id: t.id,\n                            index: tail + j,\n                            x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n                            value: null\n                        });\n                    }\n                }\n            }\n        });\n\n        // Generate null values for new target\n        if ($$.data.targets.length) {\n            targets.forEach(function (t) {\n                var i,\n                    missing = [];\n                for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n                    missing.push({\n                        id: t.id,\n                        index: i,\n                        x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n                        value: null\n                    });\n                }\n                t.values.forEach(function (v) {\n                    v.index += tail;\n                    if (!$$.isTimeSeries()) {\n                        v.x += tail;\n                    }\n                });\n                t.values = missing.concat(t.values);\n            });\n        }\n        $$.data.targets = $$.data.targets.concat(targets); // add remained\n\n        // check data count because behavior needs to change when it's only one\n        dataCount = $$.getMaxDataCount();\n        baseTarget = $$.data.targets[0];\n        baseValue = baseTarget.values[0];\n\n        // Update length to flow if needed\n        if (isDefined(args.to)) {\n            length = 0;\n            to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n            baseTarget.values.forEach(function (v) {\n                if (v.x < to) {\n                    length++;\n                }\n            });\n        } else if (isDefined(args.length)) {\n            length = args.length;\n        }\n\n        // If only one data, update the domain to flow from left edge of the chart\n        if (!orgDataCount) {\n            if ($$.isTimeSeries()) {\n                if (baseTarget.values.length > 1) {\n                    diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n                } else {\n                    diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n                }\n            } else {\n                diff = 1;\n            }\n            domain = [baseValue.x - diff, baseValue.x];\n            $$.updateXDomain(null, true, true, false, domain);\n        } else if (orgDataCount === 1) {\n            if ($$.isTimeSeries()) {\n                diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n                domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n                $$.updateXDomain(null, true, true, false, domain);\n            }\n        }\n\n        // Set targets\n        $$.updateTargets($$.data.targets);\n\n        // Redraw with new targets\n        $$.redraw({\n            flow: {\n                index: baseValue.index,\n                length: length,\n                duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n                done: args.done,\n                orgDataCount: orgDataCount\n            },\n            withLegend: true,\n            withTransition: orgDataCount > 1,\n            withTrimXDomain: false,\n            withUpdateXAxis: true\n        });\n    };\n\n    c3_chart_internal_fn.generateFlow = function (args) {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3;\n\n        return function () {\n            var targets = args.targets,\n                flow = args.flow,\n                drawBar = args.drawBar,\n                drawLine = args.drawLine,\n                drawArea = args.drawArea,\n                cx = args.cx,\n                cy = args.cy,\n                xv = args.xv,\n                xForText = args.xForText,\n                yForText = args.yForText,\n                duration = args.duration;\n\n            var translateX,\n                scaleX = 1,\n                transform,\n                flowIndex = flow.index,\n                flowLength = flow.length,\n                flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n                flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n                orgDomain = $$.x.domain(),\n                domain,\n                durationForFlow = flow.duration || duration,\n                done = flow.done || function () {},\n                wait = $$.generateWait();\n\n            var xgrid = $$.xgrid || d3.selectAll([]),\n                xgridLines = $$.xgridLines || d3.selectAll([]),\n                mainRegion = $$.mainRegion || d3.selectAll([]),\n                mainText = $$.mainText || d3.selectAll([]),\n                mainBar = $$.mainBar || d3.selectAll([]),\n                mainLine = $$.mainLine || d3.selectAll([]),\n                mainArea = $$.mainArea || d3.selectAll([]),\n                mainCircle = $$.mainCircle || d3.selectAll([]);\n\n            // set flag\n            $$.flowing = true;\n\n            // remove head data after rendered\n            $$.data.targets.forEach(function (d) {\n                d.values.splice(0, flowLength);\n            });\n\n            // update x domain to generate axis elements for flow\n            domain = $$.updateXDomain(targets, true, true);\n            // update elements related to x scale\n            if ($$.updateXGrid) {\n                $$.updateXGrid(true);\n            }\n\n            // generate transform to flow\n            if (!flow.orgDataCount) {\n                // if empty\n                if ($$.data.targets[0].values.length !== 1) {\n                    translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n                } else {\n                    if ($$.isTimeSeries()) {\n                        flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n                        flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n                        translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n                    } else {\n                        translateX = diffDomain(domain) / 2;\n                    }\n                }\n            } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n                translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n            } else {\n                if ($$.isTimeSeries()) {\n                    translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n                } else {\n                    translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n                }\n            }\n            scaleX = diffDomain(orgDomain) / diffDomain(domain);\n            transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n\n            $$.hideXGridFocus();\n\n            d3.transition().ease('linear').duration(durationForFlow).each(function () {\n                wait.add($$.axes.x.transition().call($$.xAxis));\n                wait.add(mainBar.transition().attr('transform', transform));\n                wait.add(mainLine.transition().attr('transform', transform));\n                wait.add(mainArea.transition().attr('transform', transform));\n                wait.add(mainCircle.transition().attr('transform', transform));\n                wait.add(mainText.transition().attr('transform', transform));\n                wait.add(mainRegion.filter($$.isRegionOnX).transition().attr('transform', transform));\n                wait.add(xgrid.transition().attr('transform', transform));\n                wait.add(xgridLines.transition().attr('transform', transform));\n            }).call(wait, function () {\n                var i,\n                    shapes = [],\n                    texts = [],\n                    eventRects = [];\n\n                // remove flowed elements\n                if (flowLength) {\n                    for (i = 0; i < flowLength; i++) {\n                        shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n                        texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n                        eventRects.push('.' + CLASS.eventRect + '-' + (flowIndex + i));\n                    }\n                    $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n                    $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n                    $$.svg.selectAll('.' + CLASS.eventRects).selectAll(eventRects).remove();\n                    $$.svg.select('.' + CLASS.xgrid).remove();\n                }\n\n                // draw again for removing flowed elements and reverting attr\n                xgrid.attr('transform', null).attr($$.xgridAttr);\n                xgridLines.attr('transform', null);\n                xgridLines.select('line').attr(\"x1\", config.axis_rotated ? 0 : xv).attr(\"x2\", config.axis_rotated ? $$.width : xv);\n                xgridLines.select('text').attr(\"x\", config.axis_rotated ? $$.width : 0).attr(\"y\", xv);\n                mainBar.attr('transform', null).attr(\"d\", drawBar);\n                mainLine.attr('transform', null).attr(\"d\", drawLine);\n                mainArea.attr('transform', null).attr(\"d\", drawArea);\n                mainCircle.attr('transform', null).attr(\"cx\", cx).attr(\"cy\", cy);\n                mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n                mainRegion.attr('transform', null);\n                mainRegion.select('rect').filter($$.isRegionOnX).attr(\"x\", $$.regionX.bind($$)).attr(\"width\", $$.regionWidth.bind($$));\n\n                if (config.interaction_enabled) {\n                    $$.redrawEventRect();\n                }\n\n                // callback for end of flow\n                done();\n\n                $$.flowing = false;\n            });\n        };\n    };\n\n    c3_chart_fn.focus = function (targetIds) {\n        var $$ = this.internal,\n            candidates;\n\n        targetIds = $$.mapToTargetIds(targetIds);\n        candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n        this.defocus();\n        candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n        if ($$.hasArcType()) {\n            $$.expandArc(targetIds);\n        }\n        $$.toggleFocusLegend(targetIds, true);\n\n        $$.focusedTargetIds = targetIds;\n        $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n            return targetIds.indexOf(id) < 0;\n        });\n    };\n\n    c3_chart_fn.defocus = function (targetIds) {\n        var $$ = this.internal,\n            candidates;\n\n        targetIds = $$.mapToTargetIds(targetIds);\n        candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n        if ($$.hasArcType()) {\n            $$.unexpandArc(targetIds);\n        }\n        $$.toggleFocusLegend(targetIds, false);\n\n        $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n            return targetIds.indexOf(id) < 0;\n        });\n        $$.defocusedTargetIds = targetIds;\n    };\n\n    c3_chart_fn.revert = function (targetIds) {\n        var $$ = this.internal,\n            candidates;\n\n        targetIds = $$.mapToTargetIds(targetIds);\n        candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n\n        candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n        if ($$.hasArcType()) {\n            $$.unexpandArc(targetIds);\n        }\n        if ($$.config.legend_show) {\n            $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n            $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n                return $$.d3.select(this).classed(CLASS.legendItemFocused);\n            }).classed(CLASS.legendItemFocused, false);\n        }\n\n        $$.focusedTargetIds = [];\n        $$.defocusedTargetIds = [];\n    };\n\n    c3_chart_fn.xgrids = function (grids) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (!grids) {\n            return config.grid_x_lines;\n        }\n        config.grid_x_lines = grids;\n        $$.redrawWithoutRescale();\n        return config.grid_x_lines;\n    };\n    c3_chart_fn.xgrids.add = function (grids) {\n        var $$ = this.internal;\n        return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n    };\n    c3_chart_fn.xgrids.remove = function (params) {\n        // TODO: multiple\n        var $$ = this.internal;\n        $$.removeGridLines(params, true);\n    };\n\n    c3_chart_fn.ygrids = function (grids) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (!grids) {\n            return config.grid_y_lines;\n        }\n        config.grid_y_lines = grids;\n        $$.redrawWithoutRescale();\n        return config.grid_y_lines;\n    };\n    c3_chart_fn.ygrids.add = function (grids) {\n        var $$ = this.internal;\n        return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n    };\n    c3_chart_fn.ygrids.remove = function (params) {\n        // TODO: multiple\n        var $$ = this.internal;\n        $$.removeGridLines(params, false);\n    };\n\n    c3_chart_fn.groups = function (groups) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (isUndefined(groups)) {\n            return config.data_groups;\n        }\n        config.data_groups = groups;\n        $$.redraw();\n        return config.data_groups;\n    };\n\n    c3_chart_fn.legend = function () {};\n    c3_chart_fn.legend.show = function (targetIds) {\n        var $$ = this.internal;\n        $$.showLegend($$.mapToTargetIds(targetIds));\n        $$.updateAndRedraw({ withLegend: true });\n    };\n    c3_chart_fn.legend.hide = function (targetIds) {\n        var $$ = this.internal;\n        $$.hideLegend($$.mapToTargetIds(targetIds));\n        $$.updateAndRedraw({ withLegend: true });\n    };\n\n    c3_chart_fn.load = function (args) {\n        var $$ = this.internal,\n            config = $$.config;\n        // update xs if specified\n        if (args.xs) {\n            $$.addXs(args.xs);\n        }\n        // update names if exists\n        if ('names' in args) {\n            c3_chart_fn.data.names.bind(this)(args.names);\n        }\n        // update classes if exists\n        if ('classes' in args) {\n            Object.keys(args.classes).forEach(function (id) {\n                config.data_classes[id] = args.classes[id];\n            });\n        }\n        // update categories if exists\n        if ('categories' in args && $$.isCategorized()) {\n            config.axis_x_categories = args.categories;\n        }\n        // update axes if exists\n        if ('axes' in args) {\n            Object.keys(args.axes).forEach(function (id) {\n                config.data_axes[id] = args.axes[id];\n            });\n        }\n        // update colors if exists\n        if ('colors' in args) {\n            Object.keys(args.colors).forEach(function (id) {\n                config.data_colors[id] = args.colors[id];\n            });\n        }\n        // use cache if exists\n        if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n            $$.load($$.getCaches(args.cacheIds), args.done);\n            return;\n        }\n        // unload if needed\n        if ('unload' in args) {\n            // TODO: do not unload if target will load (included in url/rows/columns)\n            $$.unload($$.mapToTargetIds(typeof args.unload === 'boolean' && args.unload ? null : args.unload), function () {\n                $$.loadFromArgs(args);\n            });\n        } else {\n            $$.loadFromArgs(args);\n        }\n    };\n\n    c3_chart_fn.unload = function (args) {\n        var $$ = this.internal;\n        args = args || {};\n        if (args instanceof Array) {\n            args = { ids: args };\n        } else if (typeof args === 'string') {\n            args = { ids: [args] };\n        }\n        $$.unload($$.mapToTargetIds(args.ids), function () {\n            $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true, withLegend: true });\n            if (args.done) {\n                args.done();\n            }\n        });\n    };\n\n    c3_chart_fn.regions = function (regions) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (!regions) {\n            return config.regions;\n        }\n        config.regions = regions;\n        $$.redrawWithoutRescale();\n        return config.regions;\n    };\n    c3_chart_fn.regions.add = function (regions) {\n        var $$ = this.internal,\n            config = $$.config;\n        if (!regions) {\n            return config.regions;\n        }\n        config.regions = config.regions.concat(regions);\n        $$.redrawWithoutRescale();\n        return config.regions;\n    };\n    c3_chart_fn.regions.remove = function (options) {\n        var $$ = this.internal,\n            config = $$.config,\n            duration,\n            classes,\n            regions;\n\n        options = options || {};\n        duration = $$.getOption(options, \"duration\", config.transition_duration);\n        classes = $$.getOption(options, \"classes\", [CLASS.region]);\n\n        regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n            return '.' + c;\n        }));\n        (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n\n        config.regions = config.regions.filter(function (region) {\n            var found = false;\n            if (!region['class']) {\n                return true;\n            }\n            region['class'].split(' ').forEach(function (c) {\n                if (classes.indexOf(c) >= 0) {\n                    found = true;\n                }\n            });\n            return !found;\n        });\n\n        return config.regions;\n    };\n\n    c3_chart_fn.selected = function (targetId) {\n        var $$ = this.internal,\n            d3 = $$.d3;\n        return d3.merge($$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n            return d3.select(this).classed(CLASS.SELECTED);\n        }).map(function (d) {\n            return d.map(function (d) {\n                var data = d.__data__;return data.data ? data.data : data;\n            });\n        }));\n    };\n    c3_chart_fn.select = function (ids, indices, resetOther) {\n        var $$ = this.internal,\n            d3 = $$.d3,\n            config = $$.config;\n        if (!config.data_selection_enabled) {\n            return;\n        }\n        $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n            var shape = d3.select(this),\n                id = d.data ? d.data.id : d.id,\n                toggle = $$.getToggle(this, d).bind($$),\n                isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n                isTargetIndex = !indices || indices.indexOf(i) >= 0,\n                isSelected = shape.classed(CLASS.SELECTED);\n            // line/area selection not supported yet\n            if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n                return;\n            }\n            if (isTargetId && isTargetIndex) {\n                if (config.data_selection_isselectable(d) && !isSelected) {\n                    toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n                }\n            } else if (isDefined(resetOther) && resetOther) {\n                if (isSelected) {\n                    toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n                }\n            }\n        });\n    };\n    c3_chart_fn.unselect = function (ids, indices) {\n        var $$ = this.internal,\n            d3 = $$.d3,\n            config = $$.config;\n        if (!config.data_selection_enabled) {\n            return;\n        }\n        $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n            var shape = d3.select(this),\n                id = d.data ? d.data.id : d.id,\n                toggle = $$.getToggle(this, d).bind($$),\n                isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n                isTargetIndex = !indices || indices.indexOf(i) >= 0,\n                isSelected = shape.classed(CLASS.SELECTED);\n            // line/area selection not supported yet\n            if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n                return;\n            }\n            if (isTargetId && isTargetIndex) {\n                if (config.data_selection_isselectable(d)) {\n                    if (isSelected) {\n                        toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n                    }\n                }\n            }\n        });\n    };\n\n    c3_chart_fn.show = function (targetIds, options) {\n        var $$ = this.internal,\n            targets;\n\n        targetIds = $$.mapToTargetIds(targetIds);\n        options = options || {};\n\n        $$.removeHiddenTargetIds(targetIds);\n        targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n\n        targets.transition().style('opacity', 1, 'important').call($$.endall, function () {\n            targets.style('opacity', null).style('opacity', 1);\n        });\n\n        if (options.withLegend) {\n            $$.showLegend(targetIds);\n        }\n\n        $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true, withLegend: true });\n    };\n\n    c3_chart_fn.hide = function (targetIds, options) {\n        var $$ = this.internal,\n            targets;\n\n        targetIds = $$.mapToTargetIds(targetIds);\n        options = options || {};\n\n        $$.addHiddenTargetIds(targetIds);\n        targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n\n        targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n            targets.style('opacity', null).style('opacity', 0);\n        });\n\n        if (options.withLegend) {\n            $$.hideLegend(targetIds);\n        }\n\n        $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true, withLegend: true });\n    };\n\n    c3_chart_fn.toggle = function (targetIds, options) {\n        var that = this,\n            $$ = this.internal;\n        $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n            $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n        });\n    };\n\n    c3_chart_fn.tooltip = function () {};\n    c3_chart_fn.tooltip.show = function (args) {\n        var $$ = this.internal,\n            index,\n            mouse;\n\n        // determine mouse position on the chart\n        if (args.mouse) {\n            mouse = args.mouse;\n        }\n\n        // determine focus data\n        if (args.data) {\n            if ($$.isMultipleX()) {\n                // if multiple xs, target point will be determined by mouse\n                mouse = [$$.x(args.data.x), $$.getYScale(args.data.id)(args.data.value)];\n                index = null;\n            } else {\n                // TODO: when tooltip_grouped = false\n                index = isValue(args.data.index) ? args.data.index : $$.getIndexByX(args.data.x);\n            }\n        } else if (typeof args.x !== 'undefined') {\n            index = $$.getIndexByX(args.x);\n        } else if (typeof args.index !== 'undefined') {\n            index = args.index;\n        }\n\n        // emulate mouse events to show\n        $$.dispatchEvent('mouseover', index, mouse);\n        $$.dispatchEvent('mousemove', index, mouse);\n\n        $$.config.tooltip_onshow.call($$, args.data);\n    };\n    c3_chart_fn.tooltip.hide = function () {\n        // TODO: get target data by checking the state of focus\n        this.internal.dispatchEvent('mouseout', 0);\n\n        this.internal.config.tooltip_onhide.call(this);\n    };\n\n    c3_chart_fn.transform = function (type, targetIds) {\n        var $$ = this.internal,\n            options = ['pie', 'donut'].indexOf(type) >= 0 ? { withTransform: true } : null;\n        $$.transformTo(targetIds, type, options);\n    };\n\n    c3_chart_internal_fn.transformTo = function (targetIds, type, optionsForRedraw) {\n        var $$ = this,\n            withTransitionForAxis = !$$.hasArcType(),\n            options = optionsForRedraw || { withTransitionForAxis: withTransitionForAxis };\n        options.withTransitionForTransform = false;\n        $$.transiting = false;\n        $$.setTargetType(targetIds, type);\n        $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n        $$.updateAndRedraw(options);\n    };\n\n    c3_chart_fn.x = function (x) {\n        var $$ = this.internal;\n        if (arguments.length) {\n            $$.updateTargetX($$.data.targets, x);\n            $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\n        }\n        return $$.data.xs;\n    };\n    c3_chart_fn.xs = function (xs) {\n        var $$ = this.internal;\n        if (arguments.length) {\n            $$.updateTargetXs($$.data.targets, xs);\n            $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\n        }\n        return $$.data.xs;\n    };\n\n    c3_chart_fn.zoom = function (domain) {\n        var $$ = this.internal;\n        if (domain) {\n            if ($$.isTimeSeries()) {\n                domain = domain.map(function (x) {\n                    return $$.parseDate(x);\n                });\n            }\n            $$.brush.extent(domain);\n            $$.redraw({ withUpdateXDomain: true, withY: $$.config.zoom_rescale });\n            $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n        }\n        return $$.brush.extent();\n    };\n    c3_chart_fn.zoom.enable = function (enabled) {\n        var $$ = this.internal;\n        $$.config.zoom_enabled = enabled;\n        $$.updateAndRedraw();\n    };\n    c3_chart_fn.unzoom = function () {\n        var $$ = this.internal;\n        $$.brush.clear().update();\n        $$.redraw({ withUpdateXDomain: true });\n    };\n\n    c3_chart_fn.zoom.max = function (max) {\n        var $$ = this.internal,\n            config = $$.config,\n            d3 = $$.d3;\n        if (max === 0 || max) {\n            config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n        } else {\n            return config.zoom_x_max;\n        }\n    };\n\n    c3_chart_fn.zoom.min = function (min) {\n        var $$ = this.internal,\n            config = $$.config,\n            d3 = $$.d3;\n        if (min === 0 || min) {\n            config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n        } else {\n            return config.zoom_x_min;\n        }\n    };\n\n    c3_chart_fn.zoom.range = function (range) {\n        if (arguments.length) {\n            if (isDefined(range.max)) {\n                this.domain.max(range.max);\n            }\n            if (isDefined(range.min)) {\n                this.domain.min(range.min);\n            }\n        } else {\n            return {\n                max: this.domain.max(),\n                min: this.domain.min()\n            };\n        }\n    };\n\n    c3_chart_internal_fn.initPie = function () {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.pie = d3.layout.pie().value(function (d) {\n            return d.values.reduce(function (a, b) {\n                return a + b.value;\n            }, 0);\n        });\n        $$.pie.sort($$.getOrderFunction() || null);\n    };\n\n    c3_chart_internal_fn.updateRadius = function () {\n        var $$ = this,\n            config = $$.config,\n            w = config.gauge_width || config.donut_width,\n            gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n        $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n        $$.radius = $$.radiusExpanded * 0.95;\n        $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n        $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n        $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n    };\n\n    c3_chart_internal_fn.updateArc = function () {\n        var $$ = this;\n        $$.svgArc = $$.getSvgArc();\n        $$.svgArcExpanded = $$.getSvgArcExpanded();\n        $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n    };\n\n    c3_chart_internal_fn.updateAngle = function (d) {\n        var $$ = this,\n            config = $$.config,\n            found = false,\n            index = 0,\n            gMin,\n            gMax,\n            gTic,\n            gValue;\n\n        if (!config) {\n            return null;\n        }\n\n        $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n            if (!found && t.data.id === d.data.id) {\n                found = true;\n                d = t;\n                d.index = index;\n            }\n            index++;\n        });\n        if (isNaN(d.startAngle)) {\n            d.startAngle = 0;\n        }\n        if (isNaN(d.endAngle)) {\n            d.endAngle = d.startAngle;\n        }\n        if ($$.isGaugeType(d.data)) {\n            gMin = config.gauge_min;\n            gMax = config.gauge_max;\n            gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n            gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n            d.startAngle = config.gauge_startingAngle;\n            d.endAngle = d.startAngle + gTic * gValue;\n        }\n        return found ? d : null;\n    };\n\n    c3_chart_internal_fn.getSvgArc = function () {\n        var $$ = this,\n            hasGaugeType = $$.hasType('gauge'),\n            singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n            arc = $$.d3.svg.arc().outerRadius(function (d) {\n            return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n        }).innerRadius(function (d) {\n            return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n        }),\n            newArc = function newArc(d, withoutUpdate) {\n            var updated;\n            if (withoutUpdate) {\n                return arc(d);\n            } // for interpolate\n            updated = $$.updateAngle(d);\n            return updated ? arc(updated) : \"M 0 0\";\n        };\n        // TODO: extends all function\n        newArc.centroid = arc.centroid;\n        return newArc;\n    };\n\n    c3_chart_internal_fn.getSvgArcExpanded = function (rate) {\n        rate = rate || 1;\n        var $$ = this,\n            hasGaugeType = $$.hasType('gauge'),\n            singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n            expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n            arc = $$.d3.svg.arc().outerRadius(function (d) {\n            return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n        }).innerRadius(function (d) {\n            return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n        });\n        return function (d) {\n            var updated = $$.updateAngle(d);\n            return updated ? arc(updated) : \"M 0 0\";\n        };\n    };\n\n    c3_chart_internal_fn.getArc = function (d, withoutUpdate, force) {\n        return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : \"M 0 0\";\n    };\n\n    c3_chart_internal_fn.transformForArcLabel = function (d) {\n        var $$ = this,\n            config = $$.config,\n            updated = $$.updateAngle(d),\n            c,\n            x,\n            y,\n            h,\n            ratio,\n            translate = \"\",\n            hasGauge = $$.hasType('gauge');\n        if (updated && !hasGauge) {\n            c = this.svgArc.centroid(updated);\n            x = isNaN(c[0]) ? 0 : c[0];\n            y = isNaN(c[1]) ? 0 : c[1];\n            h = Math.sqrt(x * x + y * y);\n            if ($$.hasType('donut') && config.donut_label_ratio) {\n                ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n            } else if ($$.hasType('pie') && config.pie_label_ratio) {\n                ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n            } else {\n                ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n            }\n            translate = \"translate(\" + x * ratio + ',' + y * ratio + \")\";\n        } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n            var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n            x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n            y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n            translate = \"translate(\" + x + ',' + y + \")\";\n        }\n        return translate;\n    };\n\n    c3_chart_internal_fn.getArcRatio = function (d) {\n        var $$ = this,\n            config = $$.config,\n            whole = Math.PI * ($$.hasType('gauge') && !config.gauge_fullCircle ? 1 : 2);\n        return d ? (d.endAngle - d.startAngle) / whole : null;\n    };\n\n    c3_chart_internal_fn.convertToArcData = function (d) {\n        return this.addName({\n            id: d.data.id,\n            value: d.value,\n            ratio: this.getArcRatio(d),\n            index: d.index\n        });\n    };\n\n    c3_chart_internal_fn.textForArcLabel = function (d) {\n        var $$ = this,\n            updated,\n            value,\n            ratio,\n            id,\n            format;\n        if (!$$.shouldShowArcLabel()) {\n            return \"\";\n        }\n        updated = $$.updateAngle(d);\n        value = updated ? updated.value : null;\n        ratio = $$.getArcRatio(updated);\n        id = d.data.id;\n        if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n            return \"\";\n        }\n        format = $$.getArcLabelFormat();\n        return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n    };\n\n    c3_chart_internal_fn.textForGaugeMinMax = function (value, isMax) {\n        var $$ = this,\n            format = $$.getGaugeLabelExtents();\n\n        return format ? format(value, isMax) : value;\n    };\n\n    c3_chart_internal_fn.expandArc = function (targetIds) {\n        var $$ = this,\n            interval;\n\n        // MEMO: avoid to cancel transition\n        if ($$.transiting) {\n            interval = window.setInterval(function () {\n                if (!$$.transiting) {\n                    window.clearInterval(interval);\n                    if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n                        $$.expandArc(targetIds);\n                    }\n                }\n            }, 10);\n            return;\n        }\n\n        targetIds = $$.mapToTargetIds(targetIds);\n\n        $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n            if (!$$.shouldExpand(d.data.id)) {\n                return;\n            }\n            $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr(\"d\", $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr(\"d\", $$.svgArcExpandedSub).each(function (d) {\n                if ($$.isDonutType(d.data)) ;\n            });\n        });\n    };\n\n    c3_chart_internal_fn.unexpandArc = function (targetIds) {\n        var $$ = this;\n\n        if ($$.transiting) {\n            return;\n        }\n\n        targetIds = $$.mapToTargetIds(targetIds);\n\n        $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n            return $$.expandDuration(d.data.id);\n        }).attr(\"d\", $$.svgArc);\n        $$.svg.selectAll('.' + CLASS.arc);\n    };\n\n    c3_chart_internal_fn.expandDuration = function (id) {\n        var $$ = this,\n            config = $$.config;\n\n        if ($$.isDonutType(id)) {\n            return config.donut_expand_duration;\n        } else if ($$.isGaugeType(id)) {\n            return config.gauge_expand_duration;\n        } else if ($$.isPieType(id)) {\n            return config.pie_expand_duration;\n        } else {\n            return 50;\n        }\n    };\n\n    c3_chart_internal_fn.shouldExpand = function (id) {\n        var $$ = this,\n            config = $$.config;\n        return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n    };\n\n    c3_chart_internal_fn.shouldShowArcLabel = function () {\n        var $$ = this,\n            config = $$.config,\n            shouldShow = true;\n        if ($$.hasType('donut')) {\n            shouldShow = config.donut_label_show;\n        } else if ($$.hasType('pie')) {\n            shouldShow = config.pie_label_show;\n        }\n        // when gauge, always true\n        return shouldShow;\n    };\n\n    c3_chart_internal_fn.meetsArcLabelThreshold = function (ratio) {\n        var $$ = this,\n            config = $$.config,\n            threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n        return ratio >= threshold;\n    };\n\n    c3_chart_internal_fn.getArcLabelFormat = function () {\n        var $$ = this,\n            config = $$.config,\n            format = config.pie_label_format;\n        if ($$.hasType('gauge')) {\n            format = config.gauge_label_format;\n        } else if ($$.hasType('donut')) {\n            format = config.donut_label_format;\n        }\n        return format;\n    };\n\n    c3_chart_internal_fn.getGaugeLabelExtents = function () {\n        var $$ = this,\n            config = $$.config;\n        return config.gauge_label_extents;\n    };\n\n    c3_chart_internal_fn.getArcTitle = function () {\n        var $$ = this;\n        return $$.hasType('donut') ? $$.config.donut_title : \"\";\n    };\n\n    c3_chart_internal_fn.updateTargetsForArc = function (targets) {\n        var $$ = this,\n            main = $$.main,\n            mainPieUpdate,\n            mainPieEnter,\n            classChartArc = $$.classChartArc.bind($$),\n            classArcs = $$.classArcs.bind($$),\n            classFocus = $$.classFocus.bind($$);\n        mainPieUpdate = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr(\"class\", function (d) {\n            return classChartArc(d) + classFocus(d.data);\n        });\n        mainPieEnter = mainPieUpdate.enter().append(\"g\").attr(\"class\", classChartArc);\n        mainPieEnter.append('g').attr('class', classArcs);\n        mainPieEnter.append(\"text\").attr(\"dy\", $$.hasType('gauge') ? \"-.1em\" : \".35em\").style(\"opacity\", 0).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n        // MEMO: can not keep same color..., but not bad to update color in redraw\n        //mainPieUpdate.exit().remove();\n    };\n\n    c3_chart_internal_fn.initArc = function () {\n        var $$ = this;\n        $$.arcs = $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartArcs).attr(\"transform\", $$.getTranslate('arc'));\n        $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style(\"text-anchor\", \"middle\").text($$.getArcTitle());\n    };\n\n    c3_chart_internal_fn.redrawArc = function (duration, durationForExit, withTransform) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config,\n            main = $$.main,\n            mainArc,\n            backgroundArc,\n            mainArcLabelLine,\n            hasGaugeType = $$.hasType('gauge');\n        mainArc = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n        mainArc.enter().append('path').attr(\"class\", $$.classArc.bind($$)).style(\"fill\", function (d) {\n            return $$.color(d.data);\n        }).style(\"cursor\", function (d) {\n            return config.interaction_enabled && config.data_selection_isselectable(d) ? \"pointer\" : null;\n        }).each(function (d) {\n            if ($$.isGaugeType(d.data)) {\n                d.startAngle = d.endAngle = config.gauge_startingAngle;\n            }\n            this._current = d;\n        });\n        if (hasGaugeType) {\n            mainArcLabelLine = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n            mainArcLabelLine.enter().append('rect').attr(\"class\", function (d) {\n                return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n            });\n            if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n                mainArcLabelLine.style(\"display\", \"none\");\n            } else {\n                mainArcLabelLine.style(\"fill\", function (d) {\n                    return config.color_pattern.length > 0 ? $$.levelColor(d.data.values[0].value) : $$.color(d.data);\n                }).style(\"display\", config.gauge_labelLine_show ? \"\" : \"none\").each(function (d) {\n                    var lineLength = 0,\n                        lineThickness = 2,\n                        x = 0,\n                        y = 0,\n                        transform = \"\";\n                    if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n                        var updated = $$.updateAngle(d),\n                            innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n                            lineAngle = updated.endAngle - Math.PI / 2,\n                            arcInnerRadius = $$.radius - innerLineLength,\n                            linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n                        lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n                        x = Math.cos(linePositioningAngle) * arcInnerRadius;\n                        y = Math.sin(linePositioningAngle) * arcInnerRadius;\n                        transform = \"rotate(\" + lineAngle * 180 / Math.PI + \", \" + x + \", \" + y + \")\";\n                    }\n                    d3.select(this).attr({ x: x, y: y, width: lineLength, height: lineThickness, transform: transform }).style(\"stroke-dasharray\", \"0, \" + (lineLength + lineThickness) + \", 0\");\n                });\n            }\n        }\n        mainArc.attr(\"transform\", function (d) {\n            return !$$.isGaugeType(d.data) && withTransform ? \"scale(0)\" : \"\";\n        }).on('mouseover', config.interaction_enabled ? function (d) {\n            var updated, arcData;\n            if ($$.transiting) {\n                // skip while transiting\n                return;\n            }\n            updated = $$.updateAngle(d);\n            if (updated) {\n                arcData = $$.convertToArcData(updated);\n                // transitions\n                $$.expandArc(updated.data.id);\n                $$.api.focus(updated.data.id);\n                $$.toggleFocusLegend(updated.data.id, true);\n                $$.config.data_onmouseover(arcData, this);\n            }\n        } : null).on('mousemove', config.interaction_enabled ? function (d) {\n            var updated = $$.updateAngle(d),\n                arcData,\n                selectedData;\n            if (updated) {\n                arcData = $$.convertToArcData(updated), selectedData = [arcData];\n                $$.showTooltip(selectedData, this);\n            }\n        } : null).on('mouseout', config.interaction_enabled ? function (d) {\n            var updated, arcData;\n            if ($$.transiting) {\n                // skip while transiting\n                return;\n            }\n            updated = $$.updateAngle(d);\n            if (updated) {\n                arcData = $$.convertToArcData(updated);\n                // transitions\n                $$.unexpandArc(updated.data.id);\n                $$.api.revert();\n                $$.revertLegend();\n                $$.hideTooltip();\n                $$.config.data_onmouseout(arcData, this);\n            }\n        } : null).on('click', config.interaction_enabled ? function (d, i) {\n            var updated = $$.updateAngle(d),\n                arcData;\n            if (updated) {\n                arcData = $$.convertToArcData(updated);\n                if ($$.toggleShape) {\n                    $$.toggleShape(this, arcData, i);\n                }\n                $$.config.data_onclick.call($$.api, arcData, this);\n            }\n        } : null).each(function () {\n            $$.transiting = true;\n        }).transition().duration(duration).attrTween(\"d\", function (d) {\n            var updated = $$.updateAngle(d),\n                interpolate;\n            if (!updated) {\n                return function () {\n                    return \"M 0 0\";\n                };\n            }\n            //                if (this._current === d) {\n            //                    this._current = {\n            //                        startAngle: Math.PI*2,\n            //                        endAngle: Math.PI*2,\n            //                    };\n            //                }\n            if (isNaN(this._current.startAngle)) {\n                this._current.startAngle = 0;\n            }\n            if (isNaN(this._current.endAngle)) {\n                this._current.endAngle = this._current.startAngle;\n            }\n            interpolate = d3.interpolate(this._current, updated);\n            this._current = interpolate(0);\n            return function (t) {\n                var interpolated = interpolate(t);\n                interpolated.data = d.data; // data.id will be updated by interporator\n                return $$.getArc(interpolated, true);\n            };\n        }).attr(\"transform\", withTransform ? \"scale(1)\" : \"\").style(\"fill\", function (d) {\n            return $$.levelColor ? $$.levelColor(d.data.values[0].value) : $$.color(d.data.id);\n        }) // Where gauge reading color would receive customization.\n        .call($$.endall, function () {\n            $$.transiting = false;\n        });\n        mainArc.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n        main.selectAll('.' + CLASS.chartArc).select('text').style(\"opacity\", 0).attr('class', function (d) {\n            return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n        }).text($$.textForArcLabel.bind($$)).attr(\"transform\", $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n            return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n        }).transition().duration(duration).style(\"opacity\", function (d) {\n            return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n        });\n        main.select('.' + CLASS.chartArcsTitle).style(\"opacity\", $$.hasType('donut') || hasGaugeType ? 1 : 0);\n\n        if (hasGaugeType) {\n            var index = 0;\n            backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n            backgroundArc.enter().append(\"path\");\n            backgroundArc.attr(\"class\", function (d, i) {\n                return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n            }).attr(\"d\", function (d1) {\n                if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n                    return \"M 0 0\";\n                }\n\n                var d = {\n                    data: [{ value: config.gauge_max }],\n                    startAngle: config.gauge_startingAngle,\n                    endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n                    index: index++\n                };\n                return $$.getArc(d, true, true);\n            });\n            backgroundArc.exit().remove();\n\n            $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr(\"dy\", \".75em\").text(config.gauge_label_show ? config.gauge_units : '');\n            $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr(\"dx\", -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + \"px\").attr(\"dy\", \"1.2em\").text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n            $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr(\"dx\", $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + \"px\").attr(\"dy\", \"1.2em\").text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n        }\n    };\n    c3_chart_internal_fn.initGauge = function () {\n        var arcs = this.arcs;\n        if (this.hasType('gauge')) {\n            arcs.append('g').attr(\"class\", CLASS.chartArcsBackground);\n            arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeUnit).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n            arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeMin).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n            arcs.append(\"text\").attr(\"class\", CLASS.chartArcsGaugeMax).style(\"text-anchor\", \"middle\").style(\"pointer-events\", \"none\");\n        }\n    };\n    c3_chart_internal_fn.getGaugeLabelHeight = function () {\n        return this.config.gauge_label_show ? 20 : 0;\n    };\n\n    c3_chart_internal_fn.hasCaches = function (ids) {\n        for (var i = 0; i < ids.length; i++) {\n            if (!(ids[i] in this.cache)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    c3_chart_internal_fn.addCache = function (id, target) {\n        this.cache[id] = this.cloneTarget(target);\n    };\n    c3_chart_internal_fn.getCaches = function (ids) {\n        var targets = [],\n            i;\n        for (i = 0; i < ids.length; i++) {\n            if (ids[i] in this.cache) {\n                targets.push(this.cloneTarget(this.cache[ids[i]]));\n            }\n        }\n        return targets;\n    };\n\n    c3_chart_internal_fn.categoryName = function (i) {\n        var config = this.config;\n        return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n    };\n\n    c3_chart_internal_fn.generateClass = function (prefix, targetId) {\n        return \" \" + prefix + \" \" + prefix + this.getTargetSelectorSuffix(targetId);\n    };\n    c3_chart_internal_fn.classText = function (d) {\n        return this.generateClass(CLASS.text, d.index);\n    };\n    c3_chart_internal_fn.classTexts = function (d) {\n        return this.generateClass(CLASS.texts, d.id);\n    };\n    c3_chart_internal_fn.classShape = function (d) {\n        return this.generateClass(CLASS.shape, d.index);\n    };\n    c3_chart_internal_fn.classShapes = function (d) {\n        return this.generateClass(CLASS.shapes, d.id);\n    };\n    c3_chart_internal_fn.classLine = function (d) {\n        return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n    };\n    c3_chart_internal_fn.classLines = function (d) {\n        return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n    };\n    c3_chart_internal_fn.classCircle = function (d) {\n        return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n    };\n    c3_chart_internal_fn.classCircles = function (d) {\n        return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n    };\n    c3_chart_internal_fn.classBar = function (d) {\n        return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n    };\n    c3_chart_internal_fn.classBars = function (d) {\n        return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n    };\n    c3_chart_internal_fn.classArc = function (d) {\n        return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n    };\n    c3_chart_internal_fn.classArcs = function (d) {\n        return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n    };\n    c3_chart_internal_fn.classArea = function (d) {\n        return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n    };\n    c3_chart_internal_fn.classAreas = function (d) {\n        return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n    };\n    c3_chart_internal_fn.classRegion = function (d, i) {\n        return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n    };\n    c3_chart_internal_fn.classEvent = function (d) {\n        return this.generateClass(CLASS.eventRect, d.index);\n    };\n    c3_chart_internal_fn.classTarget = function (id) {\n        var $$ = this;\n        var additionalClassSuffix = $$.config.data_classes[id],\n            additionalClass = '';\n        if (additionalClassSuffix) {\n            additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n        }\n        return $$.generateClass(CLASS.target, id) + additionalClass;\n    };\n    c3_chart_internal_fn.classFocus = function (d) {\n        return this.classFocused(d) + this.classDefocused(d);\n    };\n    c3_chart_internal_fn.classFocused = function (d) {\n        return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n    };\n    c3_chart_internal_fn.classDefocused = function (d) {\n        return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n    };\n    c3_chart_internal_fn.classChartText = function (d) {\n        return CLASS.chartText + this.classTarget(d.id);\n    };\n    c3_chart_internal_fn.classChartLine = function (d) {\n        return CLASS.chartLine + this.classTarget(d.id);\n    };\n    c3_chart_internal_fn.classChartBar = function (d) {\n        return CLASS.chartBar + this.classTarget(d.id);\n    };\n    c3_chart_internal_fn.classChartArc = function (d) {\n        return CLASS.chartArc + this.classTarget(d.data.id);\n    };\n    c3_chart_internal_fn.getTargetSelectorSuffix = function (targetId) {\n        return targetId || targetId === 0 ? ('-' + targetId).replace(/[\\s?!@#$%^&*()_=+,.<>'\":;\\[\\]\\/|~`{}\\\\]/g, '-') : '';\n    };\n    c3_chart_internal_fn.selectorTarget = function (id, prefix) {\n        return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n    };\n    c3_chart_internal_fn.selectorTargets = function (ids, prefix) {\n        var $$ = this;\n        ids = ids || [];\n        return ids.length ? ids.map(function (id) {\n            return $$.selectorTarget(id, prefix);\n        }) : null;\n    };\n    c3_chart_internal_fn.selectorLegend = function (id) {\n        return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n    };\n    c3_chart_internal_fn.selectorLegends = function (ids) {\n        var $$ = this;\n        return ids && ids.length ? ids.map(function (id) {\n            return $$.selectorLegend(id);\n        }) : null;\n    };\n\n    c3_chart_internal_fn.getClipPath = function (id) {\n        var isIE9 = window.navigator.appVersion.toLowerCase().indexOf(\"msie 9.\") >= 0;\n        return \"url(\" + (isIE9 ? \"\" : document.URL.split('#')[0]) + \"#\" + id + \")\";\n    };\n    c3_chart_internal_fn.appendClip = function (parent, id) {\n        return parent.append(\"clipPath\").attr(\"id\", id).append(\"rect\");\n    };\n    c3_chart_internal_fn.getAxisClipX = function (forHorizontal) {\n        // axis line width + padding for left\n        var left = Math.max(30, this.margin.left);\n        return forHorizontal ? -(1 + left) : -(left - 1);\n    };\n    c3_chart_internal_fn.getAxisClipY = function (forHorizontal) {\n        return forHorizontal ? -20 : -this.margin.top;\n    };\n    c3_chart_internal_fn.getXAxisClipX = function () {\n        var $$ = this;\n        return $$.getAxisClipX(!$$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getXAxisClipY = function () {\n        var $$ = this;\n        return $$.getAxisClipY(!$$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getYAxisClipX = function () {\n        var $$ = this;\n        return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getYAxisClipY = function () {\n        var $$ = this;\n        return $$.getAxisClipY($$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getAxisClipWidth = function (forHorizontal) {\n        var $$ = this,\n            left = Math.max(30, $$.margin.left),\n            right = Math.max(30, $$.margin.right);\n        // width + axis line width + padding for left/right\n        return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n    };\n    c3_chart_internal_fn.getAxisClipHeight = function (forHorizontal) {\n        // less than 20 is not enough to show the axis label 'outer' without legend\n        return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n    };\n    c3_chart_internal_fn.getXAxisClipWidth = function () {\n        var $$ = this;\n        return $$.getAxisClipWidth(!$$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getXAxisClipHeight = function () {\n        var $$ = this;\n        return $$.getAxisClipHeight(!$$.config.axis_rotated);\n    };\n    c3_chart_internal_fn.getYAxisClipWidth = function () {\n        var $$ = this;\n        return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n    };\n    c3_chart_internal_fn.getYAxisClipHeight = function () {\n        var $$ = this;\n        return $$.getAxisClipHeight($$.config.axis_rotated);\n    };\n\n    c3_chart_internal_fn.generateColor = function () {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3,\n            colors = config.data_colors,\n            pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.scale.category10().range(),\n            callback = config.data_color,\n            ids = [];\n\n        return function (d) {\n            var id = d.id || d.data && d.data.id || d,\n                color;\n\n            // if callback function is provided\n            if (colors[id] instanceof Function) {\n                color = colors[id](d);\n            }\n            // if specified, choose that color\n            else if (colors[id]) {\n                    color = colors[id];\n                }\n                // if not specified, choose from pattern\n                else {\n                        if (ids.indexOf(id) < 0) {\n                            ids.push(id);\n                        }\n                        color = pattern[ids.indexOf(id) % pattern.length];\n                        colors[id] = color;\n                    }\n            return callback instanceof Function ? callback(color, d) : color;\n        };\n    };\n    c3_chart_internal_fn.generateLevelColor = function () {\n        var $$ = this,\n            config = $$.config,\n            colors = config.color_pattern,\n            threshold = config.color_threshold,\n            asValue = threshold.unit === 'value',\n            values = threshold.values && threshold.values.length ? threshold.values : [],\n            max = threshold.max || 100;\n        return notEmpty(config.color_threshold) ? function (value) {\n            var i,\n                v,\n                color = colors[colors.length - 1];\n            for (i = 0; i < values.length; i++) {\n                v = asValue ? value : value * 100 / max;\n                if (v < values[i]) {\n                    color = colors[i];\n                    break;\n                }\n            }\n            return color;\n        } : null;\n    };\n\n    c3_chart_internal_fn.getDefaultConfig = function () {\n        var config = {\n            bindto: '#chart',\n            svg_classname: undefined,\n            size_width: undefined,\n            size_height: undefined,\n            padding_left: undefined,\n            padding_right: undefined,\n            padding_top: undefined,\n            padding_bottom: undefined,\n            resize_auto: true,\n            zoom_enabled: false,\n            zoom_extent: undefined,\n            zoom_privileged: false,\n            zoom_rescale: false,\n            zoom_onzoom: function zoom_onzoom() {},\n            zoom_onzoomstart: function zoom_onzoomstart() {},\n            zoom_onzoomend: function zoom_onzoomend() {},\n            zoom_x_min: undefined,\n            zoom_x_max: undefined,\n            interaction_brighten: true,\n            interaction_enabled: true,\n            onmouseover: function onmouseover() {},\n            onmouseout: function onmouseout() {},\n            onresize: function onresize() {},\n            onresized: function onresized() {},\n            oninit: function oninit() {},\n            onrendered: function onrendered() {},\n            transition_duration: 350,\n            data_x: undefined,\n            data_xs: {},\n            data_xFormat: '%Y-%m-%d',\n            data_xLocaltime: true,\n            data_xSort: true,\n            data_idConverter: function data_idConverter(id) {\n                return id;\n            },\n            data_names: {},\n            data_classes: {},\n            data_groups: [],\n            data_axes: {},\n            data_type: undefined,\n            data_types: {},\n            data_labels: {},\n            data_order: 'desc',\n            data_regions: {},\n            data_color: undefined,\n            data_colors: {},\n            data_hide: false,\n            data_filter: undefined,\n            data_selection_enabled: false,\n            data_selection_grouped: false,\n            data_selection_isselectable: function data_selection_isselectable() {\n                return true;\n            },\n            data_selection_multiple: true,\n            data_selection_draggable: false,\n            data_onclick: function data_onclick() {},\n            data_onmouseover: function data_onmouseover() {},\n            data_onmouseout: function data_onmouseout() {},\n            data_onselected: function data_onselected() {},\n            data_onunselected: function data_onunselected() {},\n            data_url: undefined,\n            data_headers: undefined,\n            data_json: undefined,\n            data_rows: undefined,\n            data_columns: undefined,\n            data_mimeType: undefined,\n            data_keys: undefined,\n            // configuration for no plot-able data supplied.\n            data_empty_label_text: \"\",\n            // subchart\n            subchart_show: false,\n            subchart_size_height: 60,\n            subchart_axis_x_show: true,\n            subchart_onbrush: function subchart_onbrush() {},\n            // color\n            color_pattern: [],\n            color_threshold: {},\n            // legend\n            legend_show: true,\n            legend_hide: false,\n            legend_position: 'bottom',\n            legend_inset_anchor: 'top-left',\n            legend_inset_x: 10,\n            legend_inset_y: 0,\n            legend_inset_step: undefined,\n            legend_item_onclick: undefined,\n            legend_item_onmouseover: undefined,\n            legend_item_onmouseout: undefined,\n            legend_equally: false,\n            legend_padding: 0,\n            legend_item_tile_width: 10,\n            legend_item_tile_height: 10,\n            // axis\n            axis_rotated: false,\n            axis_x_show: true,\n            axis_x_type: 'indexed',\n            axis_x_localtime: true,\n            axis_x_categories: [],\n            axis_x_tick_centered: false,\n            axis_x_tick_format: undefined,\n            axis_x_tick_culling: {},\n            axis_x_tick_culling_max: 10,\n            axis_x_tick_count: undefined,\n            axis_x_tick_fit: true,\n            axis_x_tick_values: null,\n            axis_x_tick_rotate: 0,\n            axis_x_tick_outer: true,\n            axis_x_tick_multiline: true,\n            axis_x_tick_multilineMax: 0,\n            axis_x_tick_width: null,\n            axis_x_max: undefined,\n            axis_x_min: undefined,\n            axis_x_padding: {},\n            axis_x_height: undefined,\n            axis_x_extent: undefined,\n            axis_x_label: {},\n            axis_x_inner: undefined,\n            axis_y_show: true,\n            axis_y_type: undefined,\n            axis_y_max: undefined,\n            axis_y_min: undefined,\n            axis_y_inverted: false,\n            axis_y_center: undefined,\n            axis_y_inner: undefined,\n            axis_y_label: {},\n            axis_y_tick_format: undefined,\n            axis_y_tick_outer: true,\n            axis_y_tick_values: null,\n            axis_y_tick_rotate: 0,\n            axis_y_tick_count: undefined,\n            axis_y_tick_time_value: undefined,\n            axis_y_tick_time_interval: undefined,\n            axis_y_padding: {},\n            axis_y_default: undefined,\n            axis_y2_show: false,\n            axis_y2_max: undefined,\n            axis_y2_min: undefined,\n            axis_y2_inverted: false,\n            axis_y2_center: undefined,\n            axis_y2_inner: undefined,\n            axis_y2_label: {},\n            axis_y2_tick_format: undefined,\n            axis_y2_tick_outer: true,\n            axis_y2_tick_values: null,\n            axis_y2_tick_count: undefined,\n            axis_y2_padding: {},\n            axis_y2_default: undefined,\n            // grid\n            grid_x_show: false,\n            grid_x_type: 'tick',\n            grid_x_lines: [],\n            grid_y_show: false,\n            // not used\n            // grid_y_type: 'tick',\n            grid_y_lines: [],\n            grid_y_ticks: 10,\n            grid_focus_show: true,\n            grid_lines_front: true,\n            // point - point of each data\n            point_show: true,\n            point_r: 2.5,\n            point_sensitivity: 10,\n            point_focus_expand_enabled: true,\n            point_focus_expand_r: undefined,\n            point_select_r: undefined,\n            // line\n            line_connectNull: false,\n            line_step_type: 'step',\n            // bar\n            bar_width: undefined,\n            bar_width_ratio: 0.6,\n            bar_width_max: undefined,\n            bar_zerobased: true,\n            bar_space: 0,\n            // area\n            area_zerobased: true,\n            area_above: false,\n            // pie\n            pie_label_show: true,\n            pie_label_format: undefined,\n            pie_label_threshold: 0.05,\n            pie_label_ratio: undefined,\n            pie_expand: {},\n            pie_expand_duration: 50,\n            // gauge\n            gauge_fullCircle: false,\n            gauge_label_show: true,\n            gauge_labelLine_show: true,\n            gauge_label_format: undefined,\n            gauge_min: 0,\n            gauge_max: 100,\n            gauge_startingAngle: -1 * Math.PI / 2,\n            gauge_label_extents: undefined,\n            gauge_units: undefined,\n            gauge_width: undefined,\n            gauge_arcs_minWidth: 5,\n            gauge_expand: {},\n            gauge_expand_duration: 50,\n            // donut\n            donut_label_show: true,\n            donut_label_format: undefined,\n            donut_label_threshold: 0.05,\n            donut_label_ratio: undefined,\n            donut_width: undefined,\n            donut_title: \"\",\n            donut_expand: {},\n            donut_expand_duration: 50,\n            // spline\n            spline_interpolation_type: 'cardinal',\n            // region - region to change style\n            regions: [],\n            // tooltip - show when mouseover on each data\n            tooltip_show: true,\n            tooltip_grouped: true,\n            tooltip_order: undefined,\n            tooltip_format_title: undefined,\n            tooltip_format_name: undefined,\n            tooltip_format_value: undefined,\n            tooltip_position: undefined,\n            tooltip_contents: function tooltip_contents(d, defaultTitleFormat, defaultValueFormat, color) {\n                return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n            },\n            tooltip_init_show: false,\n            tooltip_init_x: 0,\n            tooltip_init_position: { top: '0px', left: '50px' },\n            tooltip_onshow: function tooltip_onshow() {},\n            tooltip_onhide: function tooltip_onhide() {},\n            // title\n            title_text: undefined,\n            title_padding: {\n                top: 0,\n                right: 0,\n                bottom: 0,\n                left: 0\n            },\n            title_position: 'top-center'\n        };\n\n        Object.keys(this.additionalConfig).forEach(function (key) {\n            config[key] = this.additionalConfig[key];\n        }, this);\n\n        return config;\n    };\n    c3_chart_internal_fn.additionalConfig = {};\n\n    c3_chart_internal_fn.loadConfig = function (config) {\n        var this_config = this.config,\n            target,\n            keys,\n            read;\n        function find() {\n            var key = keys.shift();\n            //        console.log(\"key =>\", key, \", target =>\", target);\n            if (key && target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && key in target) {\n                target = target[key];\n                return find();\n            } else if (!key) {\n                return target;\n            } else {\n                return undefined;\n            }\n        }\n        Object.keys(this_config).forEach(function (key) {\n            target = config;\n            keys = key.split('_');\n            read = find();\n            //        console.log(\"CONFIG : \", key, read);\n            if (isDefined(read)) {\n                this_config[key] = read;\n            }\n        });\n    };\n\n    c3_chart_internal_fn.convertUrlToData = function (url, mimeType, headers, keys, done) {\n        var $$ = this,\n            type = mimeType ? mimeType : 'csv';\n        var req = $$.d3.xhr(url);\n        if (headers) {\n            Object.keys(headers).forEach(function (header) {\n                req.header(header, headers[header]);\n            });\n        }\n        req.get(function (error, data) {\n            var d;\n            var dataResponse = data.response || data.responseText; // Fixes IE9 XHR issue; see #1345\n            if (!data) {\n                throw new Error(error.responseURL + ' ' + error.status + ' (' + error.statusText + ')');\n            }\n            if (type === 'json') {\n                d = $$.convertJsonToData(JSON.parse(dataResponse), keys);\n            } else if (type === 'tsv') {\n                d = $$.convertTsvToData(dataResponse);\n            } else {\n                d = $$.convertCsvToData(dataResponse);\n            }\n            done.call($$, d);\n        });\n    };\n    c3_chart_internal_fn.convertXsvToData = function (xsv, parser) {\n        var rows = parser.parseRows(xsv),\n            d;\n        if (rows.length === 1) {\n            d = [{}];\n            rows[0].forEach(function (id) {\n                d[0][id] = null;\n            });\n        } else {\n            d = parser.parse(xsv);\n        }\n        return d;\n    };\n    c3_chart_internal_fn.convertCsvToData = function (csv) {\n        return this.convertXsvToData(csv, this.d3.csv);\n    };\n    c3_chart_internal_fn.convertTsvToData = function (tsv) {\n        return this.convertXsvToData(tsv, this.d3.tsv);\n    };\n    c3_chart_internal_fn.convertJsonToData = function (json, keys) {\n        var $$ = this,\n            new_rows = [],\n            targetKeys,\n            data;\n        if (keys) {\n            // when keys specified, json would be an array that includes objects\n            if (keys.x) {\n                targetKeys = keys.value.concat(keys.x);\n                $$.config.data_x = keys.x;\n            } else {\n                targetKeys = keys.value;\n            }\n            new_rows.push(targetKeys);\n            json.forEach(function (o) {\n                var new_row = [];\n                targetKeys.forEach(function (key) {\n                    // convert undefined to null because undefined data will be removed in convertDataToTargets()\n                    var v = $$.findValueInJson(o, key);\n                    if (isUndefined(v)) {\n                        v = null;\n                    }\n                    new_row.push(v);\n                });\n                new_rows.push(new_row);\n            });\n            data = $$.convertRowsToData(new_rows);\n        } else {\n            Object.keys(json).forEach(function (key) {\n                new_rows.push([key].concat(json[key]));\n            });\n            data = $$.convertColumnsToData(new_rows);\n        }\n        return data;\n    };\n    c3_chart_internal_fn.findValueInJson = function (object, path) {\n        path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n        path = path.replace(/^\\./, ''); // strip a leading dot\n        var pathArray = path.split('.');\n        for (var i = 0; i < pathArray.length; ++i) {\n            var k = pathArray[i];\n            if (k in object) {\n                object = object[k];\n            } else {\n                return;\n            }\n        }\n        return object;\n    };\n\n    /**\n     * Converts the rows to normalized data.\n     * @param {any[][]} rows The row data\n     * @return {Object[]}\n     */\n    c3_chart_internal_fn.convertRowsToData = function (rows) {\n        var newRows = [];\n        var keys = rows[0];\n\n        for (var i = 1; i < rows.length; i++) {\n            var newRow = {};\n            for (var j = 0; j < rows[i].length; j++) {\n                if (isUndefined(rows[i][j])) {\n                    throw new Error(\"Source data is missing a component at (\" + i + \",\" + j + \")!\");\n                }\n                newRow[keys[j]] = rows[i][j];\n            }\n            newRows.push(newRow);\n        }\n        return newRows;\n    };\n\n    /**\n     * Converts the columns to normalized data.\n     * @param {any[][]} columns The column data\n     * @return {Object[]}\n     */\n    c3_chart_internal_fn.convertColumnsToData = function (columns) {\n        var newRows = [];\n\n        for (var i = 0; i < columns.length; i++) {\n            var key = columns[i][0];\n            for (var j = 1; j < columns[i].length; j++) {\n                if (isUndefined(newRows[j - 1])) {\n                    newRows[j - 1] = {};\n                }\n                if (isUndefined(columns[i][j])) {\n                    throw new Error(\"Source data is missing a component at (\" + i + \",\" + j + \")!\");\n                }\n                newRows[j - 1][key] = columns[i][j];\n            }\n        }\n\n        return newRows;\n    };\n\n    c3_chart_internal_fn.convertDataToTargets = function (data, appendXs) {\n        var $$ = this,\n            config = $$.config,\n            ids = $$.d3.keys(data[0]).filter($$.isNotX, $$),\n            xs = $$.d3.keys(data[0]).filter($$.isX, $$),\n            targets;\n\n        // save x for update data by load when custom x and c3.x API\n        ids.forEach(function (id) {\n            var xKey = $$.getXKey(id);\n\n            if ($$.isCustomX() || $$.isTimeSeries()) {\n                // if included in input data\n                if (xs.indexOf(xKey) >= 0) {\n                    $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n                        return d[xKey];\n                    }).filter(isValue).map(function (rawX, i) {\n                        return $$.generateTargetX(rawX, id, i);\n                    }));\n                }\n                // if not included in input data, find from preloaded data of other id's x\n                else if (config.data_x) {\n                        $$.data.xs[id] = $$.getOtherTargetXs();\n                    }\n                    // if not included in input data, find from preloaded data\n                    else if (notEmpty(config.data_xs)) {\n                            $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n                        }\n                // MEMO: if no x included, use same x of current will be used\n            } else {\n                $$.data.xs[id] = data.map(function (d, i) {\n                    return i;\n                });\n            }\n        });\n\n        // check x is defined\n        ids.forEach(function (id) {\n            if (!$$.data.xs[id]) {\n                throw new Error('x is not defined for id = \"' + id + '\".');\n            }\n        });\n\n        // convert to target\n        targets = ids.map(function (id, index) {\n            var convertedId = config.data_idConverter(id);\n            return {\n                id: convertedId,\n                id_org: id,\n                values: data.map(function (d, i) {\n                    var xKey = $$.getXKey(id),\n                        rawX = d[xKey],\n                        value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n                        x;\n                    // use x as categories if custom x and categorized\n                    if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n                        if (index === 0 && i === 0) {\n                            config.axis_x_categories = [];\n                        }\n                        x = config.axis_x_categories.indexOf(rawX);\n                        if (x === -1) {\n                            x = config.axis_x_categories.length;\n                            config.axis_x_categories.push(rawX);\n                        }\n                    } else {\n                        x = $$.generateTargetX(rawX, id, i);\n                    }\n                    // mark as x = undefined if value is undefined and filter to remove after mapped\n                    if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n                        x = undefined;\n                    }\n                    return { x: x, value: value, id: convertedId };\n                }).filter(function (v) {\n                    return isDefined(v.x);\n                })\n            };\n        });\n\n        // finish targets\n        targets.forEach(function (t) {\n            var i;\n            // sort values by its x\n            if (config.data_xSort) {\n                t.values = t.values.sort(function (v1, v2) {\n                    var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n                        x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n                    return x1 - x2;\n                });\n            }\n            // indexing each value\n            i = 0;\n            t.values.forEach(function (v) {\n                v.index = i++;\n            });\n            // this needs to be sorted because its index and value.index is identical\n            $$.data.xs[t.id].sort(function (v1, v2) {\n                return v1 - v2;\n            });\n        });\n\n        // cache information about values\n        $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n        $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n\n        // set target types\n        if (config.data_type) {\n            $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n                return !(id in config.data_types);\n            }), config.data_type);\n        }\n\n        // cache as original id keyed\n        targets.forEach(function (d) {\n            $$.addCache(d.id_org, d);\n        });\n\n        return targets;\n    };\n\n    c3_chart_internal_fn.isX = function (key) {\n        var $$ = this,\n            config = $$.config;\n        return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n    };\n    c3_chart_internal_fn.isNotX = function (key) {\n        return !this.isX(key);\n    };\n    c3_chart_internal_fn.getXKey = function (id) {\n        var $$ = this,\n            config = $$.config;\n        return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n    };\n    c3_chart_internal_fn.getXValuesOfXKey = function (key, targets) {\n        var $$ = this,\n            xValues,\n            ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n        ids.forEach(function (id) {\n            if ($$.getXKey(id) === key) {\n                xValues = $$.data.xs[id];\n            }\n        });\n        return xValues;\n    };\n    c3_chart_internal_fn.getIndexByX = function (x) {\n        var $$ = this,\n            data = $$.filterByX($$.data.targets, x);\n        return data.length ? data[0].index : null;\n    };\n    c3_chart_internal_fn.getXValue = function (id, i) {\n        var $$ = this;\n        return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n    };\n    c3_chart_internal_fn.getOtherTargetXs = function () {\n        var $$ = this,\n            idsForX = Object.keys($$.data.xs);\n        return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n    };\n    c3_chart_internal_fn.getOtherTargetX = function (index) {\n        var xs = this.getOtherTargetXs();\n        return xs && index < xs.length ? xs[index] : null;\n    };\n    c3_chart_internal_fn.addXs = function (xs) {\n        var $$ = this;\n        Object.keys(xs).forEach(function (id) {\n            $$.config.data_xs[id] = xs[id];\n        });\n    };\n    c3_chart_internal_fn.hasMultipleX = function (xs) {\n        return this.d3.set(Object.keys(xs).map(function (id) {\n            return xs[id];\n        })).size() > 1;\n    };\n    c3_chart_internal_fn.isMultipleX = function () {\n        return notEmpty(this.config.data_xs) || !this.config.data_xSort || this.hasType('scatter');\n    };\n    c3_chart_internal_fn.addName = function (data) {\n        var $$ = this,\n            name;\n        if (data) {\n            name = $$.config.data_names[data.id];\n            data.name = name !== undefined ? name : data.id;\n        }\n        return data;\n    };\n    c3_chart_internal_fn.getValueOnIndex = function (values, index) {\n        var valueOnIndex = values.filter(function (v) {\n            return v.index === index;\n        });\n        return valueOnIndex.length ? valueOnIndex[0] : null;\n    };\n    c3_chart_internal_fn.updateTargetX = function (targets, x) {\n        var $$ = this;\n        targets.forEach(function (t) {\n            t.values.forEach(function (v, i) {\n                v.x = $$.generateTargetX(x[i], t.id, i);\n            });\n            $$.data.xs[t.id] = x;\n        });\n    };\n    c3_chart_internal_fn.updateTargetXs = function (targets, xs) {\n        var $$ = this;\n        targets.forEach(function (t) {\n            if (xs[t.id]) {\n                $$.updateTargetX([t], xs[t.id]);\n            }\n        });\n    };\n    c3_chart_internal_fn.generateTargetX = function (rawX, id, index) {\n        var $$ = this,\n            x;\n        if ($$.isTimeSeries()) {\n            x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n        } else if ($$.isCustomX() && !$$.isCategorized()) {\n            x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n        } else {\n            x = index;\n        }\n        return x;\n    };\n    c3_chart_internal_fn.cloneTarget = function (target) {\n        return {\n            id: target.id,\n            id_org: target.id_org,\n            values: target.values.map(function (d) {\n                return { x: d.x, value: d.value, id: d.id };\n            })\n        };\n    };\n    c3_chart_internal_fn.updateXs = function () {\n        var $$ = this;\n        if ($$.data.targets.length) {\n            $$.xs = [];\n            $$.data.targets[0].values.forEach(function (v) {\n                $$.xs[v.index] = v.x;\n            });\n        }\n    };\n    c3_chart_internal_fn.getPrevX = function (i) {\n        var x = this.xs[i - 1];\n        return typeof x !== 'undefined' ? x : null;\n    };\n    c3_chart_internal_fn.getNextX = function (i) {\n        var x = this.xs[i + 1];\n        return typeof x !== 'undefined' ? x : null;\n    };\n    c3_chart_internal_fn.getMaxDataCount = function () {\n        var $$ = this;\n        return $$.d3.max($$.data.targets, function (t) {\n            return t.values.length;\n        });\n    };\n    c3_chart_internal_fn.getMaxDataCountTarget = function (targets) {\n        var length = targets.length,\n            max = 0,\n            maxTarget;\n        if (length > 1) {\n            targets.forEach(function (t) {\n                if (t.values.length > max) {\n                    maxTarget = t;\n                    max = t.values.length;\n                }\n            });\n        } else {\n            maxTarget = length ? targets[0] : null;\n        }\n        return maxTarget;\n    };\n    c3_chart_internal_fn.getEdgeX = function (targets) {\n        var $$ = this;\n        return !targets.length ? [0, 0] : [$$.d3.min(targets, function (t) {\n            return t.values[0].x;\n        }), $$.d3.max(targets, function (t) {\n            return t.values[t.values.length - 1].x;\n        })];\n    };\n    c3_chart_internal_fn.mapToIds = function (targets) {\n        return targets.map(function (d) {\n            return d.id;\n        });\n    };\n    c3_chart_internal_fn.mapToTargetIds = function (ids) {\n        var $$ = this;\n        return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n    };\n    c3_chart_internal_fn.hasTarget = function (targets, id) {\n        var ids = this.mapToIds(targets),\n            i;\n        for (i = 0; i < ids.length; i++) {\n            if (ids[i] === id) {\n                return true;\n            }\n        }\n        return false;\n    };\n    c3_chart_internal_fn.isTargetToShow = function (targetId) {\n        return this.hiddenTargetIds.indexOf(targetId) < 0;\n    };\n    c3_chart_internal_fn.isLegendToShow = function (targetId) {\n        return this.hiddenLegendIds.indexOf(targetId) < 0;\n    };\n    c3_chart_internal_fn.filterTargetsToShow = function (targets) {\n        var $$ = this;\n        return targets.filter(function (t) {\n            return $$.isTargetToShow(t.id);\n        });\n    };\n    c3_chart_internal_fn.mapTargetsToUniqueXs = function (targets) {\n        var $$ = this;\n        var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n            return t.values.map(function (v) {\n                return +v.x;\n            });\n        }))).values();\n        xs = $$.isTimeSeries() ? xs.map(function (x) {\n            return new Date(+x);\n        }) : xs.map(function (x) {\n            return +x;\n        });\n        return xs.sort(function (a, b) {\n            return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n        });\n    };\n    c3_chart_internal_fn.addHiddenTargetIds = function (targetIds) {\n        targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n        for (var i = 0; i < targetIds.length; i++) {\n            if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n                this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n            }\n        }\n    };\n    c3_chart_internal_fn.removeHiddenTargetIds = function (targetIds) {\n        this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n            return targetIds.indexOf(id) < 0;\n        });\n    };\n    c3_chart_internal_fn.addHiddenLegendIds = function (targetIds) {\n        targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n        for (var i = 0; i < targetIds.length; i++) {\n            if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n                this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n            }\n        }\n    };\n    c3_chart_internal_fn.removeHiddenLegendIds = function (targetIds) {\n        this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n            return targetIds.indexOf(id) < 0;\n        });\n    };\n    c3_chart_internal_fn.getValuesAsIdKeyed = function (targets) {\n        var ys = {};\n        targets.forEach(function (t) {\n            ys[t.id] = [];\n            t.values.forEach(function (v) {\n                ys[t.id].push(v.value);\n            });\n        });\n        return ys;\n    };\n    c3_chart_internal_fn.checkValueInTargets = function (targets, checker) {\n        var ids = Object.keys(targets),\n            i,\n            j,\n            values;\n        for (i = 0; i < ids.length; i++) {\n            values = targets[ids[i]].values;\n            for (j = 0; j < values.length; j++) {\n                if (checker(values[j].value)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    c3_chart_internal_fn.hasNegativeValueInTargets = function (targets) {\n        return this.checkValueInTargets(targets, function (v) {\n            return v < 0;\n        });\n    };\n    c3_chart_internal_fn.hasPositiveValueInTargets = function (targets) {\n        return this.checkValueInTargets(targets, function (v) {\n            return v > 0;\n        });\n    };\n    c3_chart_internal_fn.isOrderDesc = function () {\n        var config = this.config;\n        return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n    };\n    c3_chart_internal_fn.isOrderAsc = function () {\n        var config = this.config;\n        return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n    };\n    c3_chart_internal_fn.getOrderFunction = function () {\n        var $$ = this,\n            config = $$.config,\n            orderAsc = $$.isOrderAsc(),\n            orderDesc = $$.isOrderDesc();\n        if (orderAsc || orderDesc) {\n            return function (t1, t2) {\n                var reducer = function reducer(p, c) {\n                    return p + Math.abs(c.value);\n                };\n                var t1Sum = t1.values.reduce(reducer, 0),\n                    t2Sum = t2.values.reduce(reducer, 0);\n                return orderDesc ? t2Sum - t1Sum : t1Sum - t2Sum;\n            };\n        } else if (isFunction(config.data_order)) {\n            return config.data_order;\n        } else if (isArray(config.data_order)) {\n            var order = config.data_order;\n            return function (t1, t2) {\n                return order.indexOf(t1.id) - order.indexOf(t2.id);\n            };\n        }\n    };\n    c3_chart_internal_fn.orderTargets = function (targets) {\n        var fct = this.getOrderFunction();\n        if (fct) {\n            targets.sort(fct);\n            if (this.isOrderAsc() || this.isOrderDesc()) {\n                targets.reverse();\n            }\n        }\n        return targets;\n    };\n    c3_chart_internal_fn.filterByX = function (targets, x) {\n        return this.d3.merge(targets.map(function (t) {\n            return t.values;\n        })).filter(function (v) {\n            return v.x - x === 0;\n        });\n    };\n    c3_chart_internal_fn.filterRemoveNull = function (data) {\n        return data.filter(function (d) {\n            return isValue(d.value);\n        });\n    };\n    c3_chart_internal_fn.filterByXDomain = function (targets, xDomain) {\n        return targets.map(function (t) {\n            return {\n                id: t.id,\n                id_org: t.id_org,\n                values: t.values.filter(function (v) {\n                    return xDomain[0] <= v.x && v.x <= xDomain[1];\n                })\n            };\n        });\n    };\n    c3_chart_internal_fn.hasDataLabel = function () {\n        var config = this.config;\n        if (typeof config.data_labels === 'boolean' && config.data_labels) {\n            return true;\n        } else if (_typeof(config.data_labels) === 'object' && notEmpty(config.data_labels)) {\n            return true;\n        }\n        return false;\n    };\n    c3_chart_internal_fn.getDataLabelLength = function (min, max, key) {\n        var $$ = this,\n            lengths = [0, 0],\n            paddingCoef = 1.3;\n        $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n            return $$.dataLabelFormat(d.id)(d);\n        }).each(function (d, i) {\n            lengths[i] = this.getBoundingClientRect()[key] * paddingCoef;\n        }).remove();\n        return lengths;\n    };\n    c3_chart_internal_fn.isNoneArc = function (d) {\n        return this.hasTarget(this.data.targets, d.id);\n    }, c3_chart_internal_fn.isArc = function (d) {\n        return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n    };\n    c3_chart_internal_fn.findSameXOfValues = function (values, index) {\n        var i,\n            targetX = values[index].x,\n            sames = [];\n        for (i = index - 1; i >= 0; i--) {\n            if (targetX !== values[i].x) {\n                break;\n            }\n            sames.push(values[i]);\n        }\n        for (i = index; i < values.length; i++) {\n            if (targetX !== values[i].x) {\n                break;\n            }\n            sames.push(values[i]);\n        }\n        return sames;\n    };\n\n    c3_chart_internal_fn.findClosestFromTargets = function (targets, pos) {\n        var $$ = this,\n            candidates;\n\n        // map to array of closest points of each target\n        candidates = targets.map(function (target) {\n            return $$.findClosest(target.values, pos);\n        });\n\n        // decide closest point and return\n        return $$.findClosest(candidates, pos);\n    };\n    c3_chart_internal_fn.findClosest = function (values, pos) {\n        var $$ = this,\n            minDist = $$.config.point_sensitivity,\n            closest;\n\n        // find mouseovering bar\n        values.filter(function (v) {\n            return v && $$.isBarType(v.id);\n        }).forEach(function (v) {\n            var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n            if (!closest && $$.isWithinBar(shape)) {\n                closest = v;\n            }\n        });\n\n        // find closest point from non-bar\n        values.filter(function (v) {\n            return v && !$$.isBarType(v.id);\n        }).forEach(function (v) {\n            var d = $$.dist(v, pos);\n            if (d < minDist) {\n                minDist = d;\n                closest = v;\n            }\n        });\n\n        return closest;\n    };\n    c3_chart_internal_fn.dist = function (data, pos) {\n        var $$ = this,\n            config = $$.config,\n            xIndex = config.axis_rotated ? 1 : 0,\n            yIndex = config.axis_rotated ? 0 : 1,\n            y = $$.circleY(data, data.index),\n            x = $$.x(data.x);\n        return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n    };\n    c3_chart_internal_fn.convertValuesToStep = function (values) {\n        var converted = [].concat(values),\n            i;\n\n        if (!this.isCategorized()) {\n            return values;\n        }\n\n        for (i = values.length + 1; 0 < i; i--) {\n            converted[i] = converted[i - 1];\n        }\n\n        converted[0] = {\n            x: converted[0].x - 1,\n            value: converted[0].value,\n            id: converted[0].id\n        };\n        converted[values.length + 1] = {\n            x: converted[values.length].x + 1,\n            value: converted[values.length].value,\n            id: converted[values.length].id\n        };\n\n        return converted;\n    };\n    c3_chart_internal_fn.updateDataAttributes = function (name, attrs) {\n        var $$ = this,\n            config = $$.config,\n            current = config['data_' + name];\n        if (typeof attrs === 'undefined') {\n            return current;\n        }\n        Object.keys(attrs).forEach(function (id) {\n            current[id] = attrs[id];\n        });\n        $$.redraw({ withLegend: true });\n        return current;\n    };\n\n    c3_chart_internal_fn.load = function (targets, args) {\n        var $$ = this;\n        if (targets) {\n            // filter loading targets if needed\n            if (args.filter) {\n                targets = targets.filter(args.filter);\n            }\n            // set type if args.types || args.type specified\n            if (args.type || args.types) {\n                targets.forEach(function (t) {\n                    var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n                    $$.setTargetType(t.id, type);\n                });\n            }\n            // Update/Add data\n            $$.data.targets.forEach(function (d) {\n                for (var i = 0; i < targets.length; i++) {\n                    if (d.id === targets[i].id) {\n                        d.values = targets[i].values;\n                        targets.splice(i, 1);\n                        break;\n                    }\n                }\n            });\n            $$.data.targets = $$.data.targets.concat(targets); // add remained\n        }\n\n        // Set targets\n        $$.updateTargets($$.data.targets);\n\n        // Redraw with new targets\n        $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true, withLegend: true });\n\n        if (args.done) {\n            args.done();\n        }\n    };\n    c3_chart_internal_fn.loadFromArgs = function (args) {\n        var $$ = this;\n        if (args.data) {\n            $$.load($$.convertDataToTargets(args.data), args);\n        } else if (args.url) {\n            $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n                $$.load($$.convertDataToTargets(data), args);\n            });\n        } else if (args.json) {\n            $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n        } else if (args.rows) {\n            $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n        } else if (args.columns) {\n            $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n        } else {\n            $$.load(null, args);\n        }\n    };\n    c3_chart_internal_fn.unload = function (targetIds, done) {\n        var $$ = this;\n        if (!done) {\n            done = function done() {};\n        }\n        // filter existing target\n        targetIds = targetIds.filter(function (id) {\n            return $$.hasTarget($$.data.targets, id);\n        });\n        // If no target, call done and return\n        if (!targetIds || targetIds.length === 0) {\n            done();\n            return;\n        }\n        $$.svg.selectAll(targetIds.map(function (id) {\n            return $$.selectorTarget(id);\n        })).transition().style('opacity', 0).remove().call($$.endall, done);\n        targetIds.forEach(function (id) {\n            // Reset fadein for future load\n            $$.withoutFadeIn[id] = false;\n            // Remove target's elements\n            if ($$.legend) {\n                $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n            }\n            // Remove target\n            $$.data.targets = $$.data.targets.filter(function (t) {\n                return t.id !== id;\n            });\n        });\n    };\n\n    c3_chart_internal_fn.getYDomainMin = function (targets) {\n        var $$ = this,\n            config = $$.config,\n            ids = $$.mapToIds(targets),\n            ys = $$.getValuesAsIdKeyed(targets),\n            j,\n            k,\n            baseId,\n            idsInGroup,\n            id,\n            hasNegativeValue;\n        if (config.data_groups.length > 0) {\n            hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n            for (j = 0; j < config.data_groups.length; j++) {\n                // Determine baseId\n                idsInGroup = config.data_groups[j].filter(function (id) {\n                    return ids.indexOf(id) >= 0;\n                });\n                if (idsInGroup.length === 0) {\n                    continue;\n                }\n                baseId = idsInGroup[0];\n                // Consider negative values\n                if (hasNegativeValue && ys[baseId]) {\n                    ys[baseId].forEach(function (v, i) {\n                        ys[baseId][i] = v < 0 ? v : 0;\n                    });\n                }\n                // Compute min\n                for (k = 1; k < idsInGroup.length; k++) {\n                    id = idsInGroup[k];\n                    if (!ys[id]) {\n                        continue;\n                    }\n                    ys[id].forEach(function (v, i) {\n                        if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n                            ys[baseId][i] += +v;\n                        }\n                    });\n                }\n            }\n        }\n        return $$.d3.min(Object.keys(ys).map(function (key) {\n            return $$.d3.min(ys[key]);\n        }));\n    };\n    c3_chart_internal_fn.getYDomainMax = function (targets) {\n        var $$ = this,\n            config = $$.config,\n            ids = $$.mapToIds(targets),\n            ys = $$.getValuesAsIdKeyed(targets),\n            j,\n            k,\n            baseId,\n            idsInGroup,\n            id,\n            hasPositiveValue;\n        if (config.data_groups.length > 0) {\n            hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n            for (j = 0; j < config.data_groups.length; j++) {\n                // Determine baseId\n                idsInGroup = config.data_groups[j].filter(function (id) {\n                    return ids.indexOf(id) >= 0;\n                });\n                if (idsInGroup.length === 0) {\n                    continue;\n                }\n                baseId = idsInGroup[0];\n                // Consider positive values\n                if (hasPositiveValue && ys[baseId]) {\n                    ys[baseId].forEach(function (v, i) {\n                        ys[baseId][i] = v > 0 ? v : 0;\n                    });\n                }\n                // Compute max\n                for (k = 1; k < idsInGroup.length; k++) {\n                    id = idsInGroup[k];\n                    if (!ys[id]) {\n                        continue;\n                    }\n                    ys[id].forEach(function (v, i) {\n                        if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n                            ys[baseId][i] += +v;\n                        }\n                    });\n                }\n            }\n        }\n        return $$.d3.max(Object.keys(ys).map(function (key) {\n            return $$.d3.max(ys[key]);\n        }));\n    };\n    c3_chart_internal_fn.getYDomain = function (targets, axisId, xDomain) {\n        var $$ = this,\n            config = $$.config,\n            targetsByAxisId = targets.filter(function (t) {\n            return $$.axis.getId(t.id) === axisId;\n        }),\n            yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n            yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n            yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n            yDomainMin = $$.getYDomainMin(yTargets),\n            yDomainMax = $$.getYDomainMax(yTargets),\n            domain,\n            domainLength,\n            padding,\n            padding_top,\n            padding_bottom,\n            center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n            yDomainAbs,\n            lengths,\n            diff,\n            ratio,\n            isAllPositive,\n            isAllNegative,\n            isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n            isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n            showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n            showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated;\n\n        // MEMO: avoid inverting domain unexpectedly\n        yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n        yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n\n        if (yTargets.length === 0) {\n            // use current domain if target of axisId is none\n            return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n        }\n        if (isNaN(yDomainMin)) {\n            // set minimum to zero when not number\n            yDomainMin = 0;\n        }\n        if (isNaN(yDomainMax)) {\n            // set maximum to have same value as yDomainMin\n            yDomainMax = yDomainMin;\n        }\n        if (yDomainMin === yDomainMax) {\n            yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n        }\n        isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n        isAllNegative = yDomainMin <= 0 && yDomainMax <= 0;\n\n        // Cancel zerobased if axis_*_min / axis_*_max specified\n        if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n            isZeroBased = false;\n        }\n\n        // Bar/Area chart should be 0-based if all positive|negative\n        if (isZeroBased) {\n            if (isAllPositive) {\n                yDomainMin = 0;\n            }\n            if (isAllNegative) {\n                yDomainMax = 0;\n            }\n        }\n\n        domainLength = Math.abs(yDomainMax - yDomainMin);\n        padding = padding_top = padding_bottom = domainLength * 0.1;\n\n        if (typeof center !== 'undefined') {\n            yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n            yDomainMax = center + yDomainAbs;\n            yDomainMin = center - yDomainAbs;\n        }\n        // add padding for data label\n        if (showHorizontalDataLabel) {\n            lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n            diff = diffDomain($$.y.range());\n            ratio = [lengths[0] / diff, lengths[1] / diff];\n            padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n            padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n        } else if (showVerticalDataLabel) {\n            lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n            padding_top += $$.axis.convertPixelsToAxisPadding(lengths[1], domainLength);\n            padding_bottom += $$.axis.convertPixelsToAxisPadding(lengths[0], domainLength);\n        }\n        if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n            padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n            padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n        }\n        if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n            padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n            padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n        }\n        // Bar/Area chart should be 0-based if all positive|negative\n        if (isZeroBased) {\n            if (isAllPositive) {\n                padding_bottom = yDomainMin;\n            }\n            if (isAllNegative) {\n                padding_top = -yDomainMax;\n            }\n        }\n        domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n        return isInverted ? domain.reverse() : domain;\n    };\n    c3_chart_internal_fn.getXDomainMin = function (targets) {\n        var $$ = this,\n            config = $$.config;\n        return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n            return $$.d3.min(t.values, function (v) {\n                return v.x;\n            });\n        });\n    };\n    c3_chart_internal_fn.getXDomainMax = function (targets) {\n        var $$ = this,\n            config = $$.config;\n        return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n            return $$.d3.max(t.values, function (v) {\n                return v.x;\n            });\n        });\n    };\n    c3_chart_internal_fn.getXDomainPadding = function (domain) {\n        var $$ = this,\n            config = $$.config,\n            diff = domain[1] - domain[0],\n            maxDataCount,\n            padding,\n            paddingLeft,\n            paddingRight;\n        if ($$.isCategorized()) {\n            padding = 0;\n        } else if ($$.hasType('bar')) {\n            maxDataCount = $$.getMaxDataCount();\n            padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n        } else {\n            padding = diff * 0.01;\n        }\n        if (_typeof(config.axis_x_padding) === 'object' && notEmpty(config.axis_x_padding)) {\n            paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n            paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n        } else if (typeof config.axis_x_padding === 'number') {\n            paddingLeft = paddingRight = config.axis_x_padding;\n        } else {\n            paddingLeft = paddingRight = padding;\n        }\n        return { left: paddingLeft, right: paddingRight };\n    };\n    c3_chart_internal_fn.getXDomain = function (targets) {\n        var $$ = this,\n            xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n            firstX = xDomain[0],\n            lastX = xDomain[1],\n            padding = $$.getXDomainPadding(xDomain),\n            min = 0,\n            max = 0;\n        // show center of x domain if min and max are the same\n        if (firstX - lastX === 0 && !$$.isCategorized()) {\n            if ($$.isTimeSeries()) {\n                firstX = new Date(firstX.getTime() * 0.5);\n                lastX = new Date(lastX.getTime() * 1.5);\n            } else {\n                firstX = firstX === 0 ? 1 : firstX * 0.5;\n                lastX = lastX === 0 ? -1 : lastX * 1.5;\n            }\n        }\n        if (firstX || firstX === 0) {\n            min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n        }\n        if (lastX || lastX === 0) {\n            max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n        }\n        return [min, max];\n    };\n    c3_chart_internal_fn.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n        var $$ = this,\n            config = $$.config;\n\n        if (withUpdateOrgXDomain) {\n            $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n            $$.orgXDomain = $$.x.domain();\n            if (config.zoom_enabled) {\n                $$.zoom.scale($$.x).updateScaleExtent();\n            }\n            $$.subX.domain($$.x.domain());\n            if ($$.brush) {\n                $$.brush.scale($$.subX);\n            }\n        }\n        if (withUpdateXDomain) {\n            $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.extent());\n            if (config.zoom_enabled) {\n                $$.zoom.scale($$.x).updateScaleExtent();\n            }\n        }\n\n        // Trim domain when too big by zoom mousemove event\n        if (withTrim) {\n            $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n        }\n\n        return $$.x.domain();\n    };\n    c3_chart_internal_fn.trimXDomain = function (domain) {\n        var zoomDomain = this.getZoomDomain(),\n            min = zoomDomain[0],\n            max = zoomDomain[1];\n        if (domain[0] <= min) {\n            domain[1] = +domain[1] + (min - domain[0]);\n            domain[0] = min;\n        }\n        if (max <= domain[1]) {\n            domain[0] = +domain[0] - (domain[1] - max);\n            domain[1] = max;\n        }\n        return domain;\n    };\n\n    c3_chart_internal_fn.drag = function (mouse) {\n        var $$ = this,\n            config = $$.config,\n            main = $$.main,\n            d3 = $$.d3;\n        var sx, sy, mx, my, minX, maxX, minY, maxY;\n\n        if ($$.hasArcType()) {\n            return;\n        }\n        if (!config.data_selection_enabled) {\n            return;\n        } // do nothing if not selectable\n        if (config.zoom_enabled && !$$.zoom.altDomain) {\n            return;\n        } // skip if zoomable because of conflict drag dehavior\n        if (!config.data_selection_multiple) {\n            return;\n        } // skip when single selection because drag is used for multiple selection\n\n        sx = $$.dragStart[0];\n        sy = $$.dragStart[1];\n        mx = mouse[0];\n        my = mouse[1];\n        minX = Math.min(sx, mx);\n        maxX = Math.max(sx, mx);\n        minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n        maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n\n        main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY);\n        // TODO: binary search when multiple xs\n        main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).filter(function (d) {\n            return config.data_selection_isselectable(d);\n        }).each(function (d, i) {\n            var shape = d3.select(this),\n                isSelected = shape.classed(CLASS.SELECTED),\n                isIncluded = shape.classed(CLASS.INCLUDED),\n                _x,\n                _y,\n                _w,\n                _h,\n                toggle,\n                isWithin = false,\n                box;\n            if (shape.classed(CLASS.circle)) {\n                _x = shape.attr(\"cx\") * 1;\n                _y = shape.attr(\"cy\") * 1;\n                toggle = $$.togglePoint;\n                isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n            } else if (shape.classed(CLASS.bar)) {\n                box = getPathBox(this);\n                _x = box.x;\n                _y = box.y;\n                _w = box.width;\n                _h = box.height;\n                toggle = $$.togglePath;\n                isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n            } else {\n                // line/area selection not supported yet\n                return;\n            }\n            if (isWithin ^ isIncluded) {\n                shape.classed(CLASS.INCLUDED, !isIncluded);\n                // TODO: included/unincluded callback here\n                shape.classed(CLASS.SELECTED, !isSelected);\n                toggle.call($$, !isSelected, shape, d, i);\n            }\n        });\n    };\n\n    c3_chart_internal_fn.dragstart = function (mouse) {\n        var $$ = this,\n            config = $$.config;\n        if ($$.hasArcType()) {\n            return;\n        }\n        if (!config.data_selection_enabled) {\n            return;\n        } // do nothing if not selectable\n        $$.dragStart = mouse;\n        $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n        $$.dragging = true;\n    };\n\n    c3_chart_internal_fn.dragend = function () {\n        var $$ = this,\n            config = $$.config;\n        if ($$.hasArcType()) {\n            return;\n        }\n        if (!config.data_selection_enabled) {\n            return;\n        } // do nothing if not selectable\n        $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n        $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n        $$.dragging = false;\n    };\n\n    c3_chart_internal_fn.getYFormat = function (forArc) {\n        var $$ = this,\n            formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n            formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n        return function (v, ratio, id) {\n            var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n            return format.call($$, v, ratio);\n        };\n    };\n    c3_chart_internal_fn.yFormat = function (v) {\n        var $$ = this,\n            config = $$.config,\n            format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n        return format(v);\n    };\n    c3_chart_internal_fn.y2Format = function (v) {\n        var $$ = this,\n            config = $$.config,\n            format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n        return format(v);\n    };\n    c3_chart_internal_fn.defaultValueFormat = function (v) {\n        return isValue(v) ? +v : \"\";\n    };\n    c3_chart_internal_fn.defaultArcValueFormat = function (v, ratio) {\n        return (ratio * 100).toFixed(1) + '%';\n    };\n    c3_chart_internal_fn.dataLabelFormat = function (targetId) {\n        var $$ = this,\n            data_labels = $$.config.data_labels,\n            format,\n            defaultFormat = function defaultFormat(v) {\n            return isValue(v) ? +v : \"\";\n        };\n        // find format according to axis id\n        if (typeof data_labels.format === 'function') {\n            format = data_labels.format;\n        } else if (_typeof(data_labels.format) === 'object') {\n            if (data_labels.format[targetId]) {\n                format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n            } else {\n                format = function format() {\n                    return '';\n                };\n            }\n        } else {\n            format = defaultFormat;\n        }\n        return format;\n    };\n\n    c3_chart_internal_fn.initGrid = function () {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3;\n        $$.grid = $$.main.append('g').attr(\"clip-path\", $$.clipPathForGrid).attr('class', CLASS.grid);\n        if (config.grid_x_show) {\n            $$.grid.append(\"g\").attr(\"class\", CLASS.xgrids);\n        }\n        if (config.grid_y_show) {\n            $$.grid.append('g').attr('class', CLASS.ygrids);\n        }\n        if (config.grid_focus_show) {\n            $$.grid.append('g').attr(\"class\", CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n        }\n        $$.xgrid = d3.selectAll([]);\n        if (!config.grid_lines_front) {\n            $$.initGridLines();\n        }\n    };\n    c3_chart_internal_fn.initGridLines = function () {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.gridLines = $$.main.append('g').attr(\"clip-path\", $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n        $$.gridLines.append('g').attr(\"class\", CLASS.xgridLines);\n        $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n        $$.xgridLines = d3.selectAll([]);\n    };\n    c3_chart_internal_fn.updateXGrid = function (withoutUpdate) {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3,\n            xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n            tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n\n        $$.xgridAttr = config.axis_rotated ? {\n            'x1': 0,\n            'x2': $$.width,\n            'y1': function y1(d) {\n                return $$.x(d) - tickOffset;\n            },\n            'y2': function y2(d) {\n                return $$.x(d) - tickOffset;\n            }\n        } : {\n            'x1': function x1(d) {\n                return $$.x(d) + tickOffset;\n            },\n            'x2': function x2(d) {\n                return $$.x(d) + tickOffset;\n            },\n            'y1': 0,\n            'y2': $$.height\n        };\n\n        $$.xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n        $$.xgrid.enter().append('line').attr(\"class\", CLASS.xgrid);\n        if (!withoutUpdate) {\n            $$.xgrid.attr($$.xgridAttr).style(\"opacity\", function () {\n                return +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1') === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n            });\n        }\n        $$.xgrid.exit().remove();\n    };\n\n    c3_chart_internal_fn.updateYGrid = function () {\n        var $$ = this,\n            config = $$.config,\n            gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n        $$.ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n        $$.ygrid.enter().append('line').attr('class', CLASS.ygrid);\n        $$.ygrid.attr(\"x1\", config.axis_rotated ? $$.y : 0).attr(\"x2\", config.axis_rotated ? $$.y : $$.width).attr(\"y1\", config.axis_rotated ? 0 : $$.y).attr(\"y2\", config.axis_rotated ? $$.height : $$.y);\n        $$.ygrid.exit().remove();\n        $$.smoothLines($$.ygrid, 'grid');\n    };\n\n    c3_chart_internal_fn.gridTextAnchor = function (d) {\n        return d.position ? d.position : \"end\";\n    };\n    c3_chart_internal_fn.gridTextDx = function (d) {\n        return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n    };\n    c3_chart_internal_fn.xGridTextX = function (d) {\n        return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n    };\n    c3_chart_internal_fn.yGridTextX = function (d) {\n        return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n    };\n    c3_chart_internal_fn.updateGrid = function (duration) {\n        var $$ = this,\n            main = $$.main,\n            config = $$.config,\n            xgridLine,\n            ygridLine,\n            yv;\n\n        // hide if arc type\n        $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n\n        main.select('line.' + CLASS.xgridFocus).style(\"visibility\", \"hidden\");\n        if (config.grid_x_show) {\n            $$.updateXGrid();\n        }\n        $$.xgridLines = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines);\n        // enter\n        xgridLine = $$.xgridLines.enter().append('g').attr(\"class\", function (d) {\n            return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n        });\n        xgridLine.append('line').style(\"opacity\", 0);\n        xgridLine.append('text').attr(\"text-anchor\", $$.gridTextAnchor).attr(\"transform\", config.axis_rotated ? \"\" : \"rotate(-90)\").attr('dx', $$.gridTextDx).attr('dy', -5).style(\"opacity\", 0);\n        // udpate\n        // done in d3.transition() of the end of this function\n        // exit\n        $$.xgridLines.exit().transition().duration(duration).style(\"opacity\", 0).remove();\n\n        // Y-Grid\n        if (config.grid_y_show) {\n            $$.updateYGrid();\n        }\n        $$.ygridLines = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines);\n        // enter\n        ygridLine = $$.ygridLines.enter().append('g').attr(\"class\", function (d) {\n            return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n        });\n        ygridLine.append('line').style(\"opacity\", 0);\n        ygridLine.append('text').attr(\"text-anchor\", $$.gridTextAnchor).attr(\"transform\", config.axis_rotated ? \"rotate(-90)\" : \"\").attr('dx', $$.gridTextDx).attr('dy', -5).style(\"opacity\", 0);\n        // update\n        yv = $$.yv.bind($$);\n        $$.ygridLines.select('line').transition().duration(duration).attr(\"x1\", config.axis_rotated ? yv : 0).attr(\"x2\", config.axis_rotated ? yv : $$.width).attr(\"y1\", config.axis_rotated ? 0 : yv).attr(\"y2\", config.axis_rotated ? $$.height : yv).style(\"opacity\", 1);\n        $$.ygridLines.select('text').transition().duration(duration).attr(\"x\", config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr(\"y\", yv).text(function (d) {\n            return d.text;\n        }).style(\"opacity\", 1);\n        // exit\n        $$.ygridLines.exit().transition().duration(duration).style(\"opacity\", 0).remove();\n    };\n    c3_chart_internal_fn.redrawGrid = function (withTransition) {\n        var $$ = this,\n            config = $$.config,\n            xv = $$.xv.bind($$),\n            lines = $$.xgridLines.select('line'),\n            texts = $$.xgridLines.select('text');\n        return [(withTransition ? lines.transition() : lines).attr(\"x1\", config.axis_rotated ? 0 : xv).attr(\"x2\", config.axis_rotated ? $$.width : xv).attr(\"y1\", config.axis_rotated ? xv : 0).attr(\"y2\", config.axis_rotated ? xv : $$.height).style(\"opacity\", 1), (withTransition ? texts.transition() : texts).attr(\"x\", config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr(\"y\", xv).text(function (d) {\n            return d.text;\n        }).style(\"opacity\", 1)];\n    };\n    c3_chart_internal_fn.showXGridFocus = function (selectedData) {\n        var $$ = this,\n            config = $$.config,\n            dataToShow = selectedData.filter(function (d) {\n            return d && isValue(d.value);\n        }),\n            focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n            xx = $$.xx.bind($$);\n        if (!config.tooltip_show) {\n            return;\n        }\n        // Hide when scatter plot exists\n        if ($$.hasType('scatter') || $$.hasArcType()) {\n            return;\n        }\n        focusEl.style(\"visibility\", \"visible\").data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n        $$.smoothLines(focusEl, 'grid');\n    };\n    c3_chart_internal_fn.hideXGridFocus = function () {\n        this.main.select('line.' + CLASS.xgridFocus).style(\"visibility\", \"hidden\");\n    };\n    c3_chart_internal_fn.updateXgridFocus = function () {\n        var $$ = this,\n            config = $$.config;\n        $$.main.select('line.' + CLASS.xgridFocus).attr(\"x1\", config.axis_rotated ? 0 : -10).attr(\"x2\", config.axis_rotated ? $$.width : -10).attr(\"y1\", config.axis_rotated ? -10 : 0).attr(\"y2\", config.axis_rotated ? -10 : $$.height);\n    };\n    c3_chart_internal_fn.generateGridData = function (type, scale) {\n        var $$ = this,\n            gridData = [],\n            xDomain,\n            firstYear,\n            lastYear,\n            i,\n            tickNum = $$.main.select(\".\" + CLASS.axisX).selectAll('.tick').size();\n        if (type === 'year') {\n            xDomain = $$.getXDomain();\n            firstYear = xDomain[0].getFullYear();\n            lastYear = xDomain[1].getFullYear();\n            for (i = firstYear; i <= lastYear; i++) {\n                gridData.push(new Date(i + '-01-01 00:00:00'));\n            }\n        } else {\n            gridData = scale.ticks(10);\n            if (gridData.length > tickNum) {\n                // use only int\n                gridData = gridData.filter(function (d) {\n                    return (\"\" + d).indexOf('.') < 0;\n                });\n            }\n        }\n        return gridData;\n    };\n    c3_chart_internal_fn.getGridFilterToRemove = function (params) {\n        return params ? function (line) {\n            var found = false;\n            [].concat(params).forEach(function (param) {\n                if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n                    found = true;\n                }\n            });\n            return found;\n        } : function () {\n            return true;\n        };\n    };\n    c3_chart_internal_fn.removeGridLines = function (params, forX) {\n        var $$ = this,\n            config = $$.config,\n            toRemove = $$.getGridFilterToRemove(params),\n            toShow = function toShow(line) {\n            return !toRemove(line);\n        },\n            classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n            classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n        $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n        if (forX) {\n            config.grid_x_lines = config.grid_x_lines.filter(toShow);\n        } else {\n            config.grid_y_lines = config.grid_y_lines.filter(toShow);\n        }\n    };\n\n    c3_chart_internal_fn.initEventRect = function () {\n        var $$ = this;\n        $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.eventRects).style('fill-opacity', 0);\n    };\n    c3_chart_internal_fn.redrawEventRect = function () {\n        var $$ = this,\n            config = $$.config,\n            eventRectUpdate,\n            maxDataCountTarget,\n            isMultipleX = $$.isMultipleX();\n\n        // rects for mouseover\n        var eventRects = $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null).classed(CLASS.eventRectsMultiple, isMultipleX).classed(CLASS.eventRectsSingle, !isMultipleX);\n\n        // clear old rects\n        eventRects.selectAll('.' + CLASS.eventRect).remove();\n\n        // open as public variable\n        $$.eventRect = eventRects.selectAll('.' + CLASS.eventRect);\n\n        if (isMultipleX) {\n            eventRectUpdate = $$.eventRect.data([0]);\n            // enter : only one rect will be added\n            $$.generateEventRectsForMultipleXs(eventRectUpdate.enter());\n            // update\n            $$.updateEventRect(eventRectUpdate);\n            // exit : not needed because always only one rect exists\n        } else {\n            // Set data and update $$.eventRect\n            maxDataCountTarget = $$.getMaxDataCountTarget($$.data.targets);\n            eventRects.datum(maxDataCountTarget ? maxDataCountTarget.values : []);\n            $$.eventRect = eventRects.selectAll('.' + CLASS.eventRect);\n            eventRectUpdate = $$.eventRect.data(function (d) {\n                return d;\n            });\n            // enter\n            $$.generateEventRectsForSingleX(eventRectUpdate.enter());\n            // update\n            $$.updateEventRect(eventRectUpdate);\n            // exit\n            eventRectUpdate.exit().remove();\n        }\n    };\n    c3_chart_internal_fn.updateEventRect = function (eventRectUpdate) {\n        var $$ = this,\n            config = $$.config,\n            x,\n            y,\n            w,\n            h,\n            rectW,\n            rectX;\n\n        // set update selection if null\n        eventRectUpdate = eventRectUpdate || $$.eventRect.data(function (d) {\n            return d;\n        });\n\n        if ($$.isMultipleX()) {\n            // TODO: rotated not supported yet\n            x = 0;\n            y = 0;\n            w = $$.width;\n            h = $$.height;\n        } else {\n            if (($$.isCustomX() || $$.isTimeSeries()) && !$$.isCategorized()) {\n\n                // update index for x that is used by prevX and nextX\n                $$.updateXs();\n\n                rectW = function rectW(d) {\n                    var prevX = $$.getPrevX(d.index),\n                        nextX = $$.getNextX(d.index);\n\n                    // if there this is a single data point make the eventRect full width (or height)\n                    if (prevX === null && nextX === null) {\n                        return config.axis_rotated ? $$.height : $$.width;\n                    }\n\n                    if (prevX === null) {\n                        prevX = $$.x.domain()[0];\n                    }\n                    if (nextX === null) {\n                        nextX = $$.x.domain()[1];\n                    }\n\n                    return Math.max(0, ($$.x(nextX) - $$.x(prevX)) / 2);\n                };\n                rectX = function rectX(d) {\n                    var prevX = $$.getPrevX(d.index),\n                        nextX = $$.getNextX(d.index),\n                        thisX = $$.data.xs[d.id][d.index];\n\n                    // if there this is a single data point position the eventRect at 0\n                    if (prevX === null && nextX === null) {\n                        return 0;\n                    }\n\n                    if (prevX === null) {\n                        prevX = $$.x.domain()[0];\n                    }\n\n                    return ($$.x(thisX) + $$.x(prevX)) / 2;\n                };\n            } else {\n                rectW = $$.getEventRectWidth();\n                rectX = function rectX(d) {\n                    return $$.x(d.x) - rectW / 2;\n                };\n            }\n            x = config.axis_rotated ? 0 : rectX;\n            y = config.axis_rotated ? rectX : 0;\n            w = config.axis_rotated ? $$.width : rectW;\n            h = config.axis_rotated ? rectW : $$.height;\n        }\n\n        eventRectUpdate.attr('class', $$.classEvent.bind($$)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", w).attr(\"height\", h);\n    };\n    c3_chart_internal_fn.generateEventRectsForSingleX = function (eventRectEnter) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config;\n        eventRectEnter.append(\"rect\").attr(\"class\", $$.classEvent.bind($$)).style(\"cursor\", config.data_selection_enabled && config.data_selection_grouped ? \"pointer\" : null).on('mouseover', function (d) {\n            var index = d.index;\n\n            if ($$.dragging || $$.flowing) {\n                return;\n            } // do nothing while dragging/flowing\n            if ($$.hasArcType()) {\n                return;\n            }\n\n            // Expand shapes for selection\n            if (config.point_focus_expand_enabled) {\n                $$.expandCircles(index, null, true);\n            }\n            $$.expandBars(index, null, true);\n\n            // Call event handler\n            $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n                config.data_onmouseover.call($$.api, d);\n            });\n        }).on('mouseout', function (d) {\n            var index = d.index;\n            if (!$$.config) {\n                return;\n            } // chart is destroyed\n            if ($$.hasArcType()) {\n                return;\n            }\n            $$.hideXGridFocus();\n            $$.hideTooltip();\n            // Undo expanded shapes\n            $$.unexpandCircles();\n            $$.unexpandBars();\n            // Call event handler\n            $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n                config.data_onmouseout.call($$.api, d);\n            });\n        }).on('mousemove', function (d) {\n            var selectedData,\n                index = d.index,\n                eventRect = $$.svg.select('.' + CLASS.eventRect + '-' + index);\n\n            if ($$.dragging || $$.flowing) {\n                return;\n            } // do nothing while dragging/flowing\n            if ($$.hasArcType()) {\n                return;\n            }\n\n            if ($$.isStepType(d) && $$.config.line_step_type === 'step-after' && d3.mouse(this)[0] < $$.x($$.getXValue(d.id, index))) {\n                index -= 1;\n            }\n\n            // Show tooltip\n            selectedData = $$.filterTargetsToShow($$.data.targets).map(function (t) {\n                return $$.addName($$.getValueOnIndex(t.values, index));\n            });\n\n            if (config.tooltip_grouped) {\n                $$.showTooltip(selectedData, this);\n                $$.showXGridFocus(selectedData);\n            }\n\n            if (config.tooltip_grouped && (!config.data_selection_enabled || config.data_selection_grouped)) {\n                return;\n            }\n\n            $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function () {\n                d3.select(this).classed(CLASS.EXPANDED, true);\n                if (config.data_selection_enabled) {\n                    eventRect.style('cursor', config.data_selection_grouped ? 'pointer' : null);\n                }\n                if (!config.tooltip_grouped) {\n                    $$.hideXGridFocus();\n                    $$.hideTooltip();\n                    if (!config.data_selection_grouped) {\n                        $$.unexpandCircles(index);\n                        $$.unexpandBars(index);\n                    }\n                }\n            }).filter(function (d) {\n                return $$.isWithinShape(this, d);\n            }).each(function (d) {\n                if (config.data_selection_enabled && (config.data_selection_grouped || config.data_selection_isselectable(d))) {\n                    eventRect.style('cursor', 'pointer');\n                }\n                if (!config.tooltip_grouped) {\n                    $$.showTooltip([d], this);\n                    $$.showXGridFocus([d]);\n                    if (config.point_focus_expand_enabled) {\n                        $$.expandCircles(index, d.id, true);\n                    }\n                    $$.expandBars(index, d.id, true);\n                }\n            });\n        }).on('click', function (d) {\n            var index = d.index;\n            if ($$.hasArcType() || !$$.toggleShape) {\n                return;\n            }\n            if ($$.cancelClick) {\n                $$.cancelClick = false;\n                return;\n            }\n            if ($$.isStepType(d) && config.line_step_type === 'step-after' && d3.mouse(this)[0] < $$.x($$.getXValue(d.id, index))) {\n                index -= 1;\n            }\n            $$.main.selectAll('.' + CLASS.shape + '-' + index).each(function (d) {\n                if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n                    $$.toggleShape(this, d, index);\n                    $$.config.data_onclick.call($$.api, d, this);\n                }\n            });\n        }).call(config.data_selection_draggable && $$.drag ? d3.behavior.drag().origin(Object).on('drag', function () {\n            $$.drag(d3.mouse(this));\n        }).on('dragstart', function () {\n            $$.dragstart(d3.mouse(this));\n        }).on('dragend', function () {\n            $$.dragend();\n        }) : function () {});\n    };\n\n    c3_chart_internal_fn.generateEventRectsForMultipleXs = function (eventRectEnter) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config;\n\n        function mouseout() {\n            $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n            $$.hideXGridFocus();\n            $$.hideTooltip();\n            $$.unexpandCircles();\n            $$.unexpandBars();\n        }\n\n        eventRectEnter.append('rect').attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).attr('class', CLASS.eventRect).on('mouseout', function () {\n            if (!$$.config) {\n                return;\n            } // chart is destroyed\n            if ($$.hasArcType()) {\n                return;\n            }\n            mouseout();\n        }).on('mousemove', function () {\n            var targetsToShow = $$.filterTargetsToShow($$.data.targets);\n            var mouse, closest, sameXData, selectedData;\n\n            if ($$.dragging) {\n                return;\n            } // do nothing when dragging\n            if ($$.hasArcType(targetsToShow)) {\n                return;\n            }\n\n            mouse = d3.mouse(this);\n            closest = $$.findClosestFromTargets(targetsToShow, mouse);\n\n            if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id)) {\n                config.data_onmouseout.call($$.api, $$.mouseover);\n                $$.mouseover = undefined;\n            }\n\n            if (!closest) {\n                mouseout();\n                return;\n            }\n\n            if ($$.isScatterType(closest) || !config.tooltip_grouped) {\n                sameXData = [closest];\n            } else {\n                sameXData = $$.filterByX(targetsToShow, closest.x);\n            }\n\n            // show tooltip when cursor is close to some point\n            selectedData = sameXData.map(function (d) {\n                return $$.addName(d);\n            });\n            $$.showTooltip(selectedData, this);\n\n            // expand points\n            if (config.point_focus_expand_enabled) {\n                $$.expandCircles(closest.index, closest.id, true);\n            }\n            $$.expandBars(closest.index, closest.id, true);\n\n            // Show xgrid focus line\n            $$.showXGridFocus(selectedData);\n\n            // Show cursor as pointer if point is close to mouse position\n            if ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity) {\n                $$.svg.select('.' + CLASS.eventRect).style('cursor', 'pointer');\n                if (!$$.mouseover) {\n                    config.data_onmouseover.call($$.api, closest);\n                    $$.mouseover = closest;\n                }\n            }\n        }).on('click', function () {\n            var targetsToShow = $$.filterTargetsToShow($$.data.targets);\n            var mouse, closest;\n            if ($$.hasArcType(targetsToShow)) {\n                return;\n            }\n\n            mouse = d3.mouse(this);\n            closest = $$.findClosestFromTargets(targetsToShow, mouse);\n            if (!closest) {\n                return;\n            }\n            // select if selection enabled\n            if ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity) {\n                $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).selectAll('.' + CLASS.shape + '-' + closest.index).each(function () {\n                    if (config.data_selection_grouped || $$.isWithinShape(this, closest)) {\n                        $$.toggleShape(this, closest, closest.index);\n                        $$.config.data_onclick.call($$.api, closest, this);\n                    }\n                });\n            }\n        }).call(config.data_selection_draggable && $$.drag ? d3.behavior.drag().origin(Object).on('drag', function () {\n            $$.drag(d3.mouse(this));\n        }).on('dragstart', function () {\n            $$.dragstart(d3.mouse(this));\n        }).on('dragend', function () {\n            $$.dragend();\n        }) : function () {});\n    };\n    c3_chart_internal_fn.dispatchEvent = function (type, index, mouse) {\n        var $$ = this,\n            selector = '.' + CLASS.eventRect + (!$$.isMultipleX() ? '-' + index : ''),\n            eventRect = $$.main.select(selector).node(),\n            box = eventRect.getBoundingClientRect(),\n            x = box.left + (mouse ? mouse[0] : 0),\n            y = box.top + (mouse ? mouse[1] : 0),\n            event = document.createEvent(\"MouseEvents\");\n\n        event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n        eventRect.dispatchEvent(event);\n    };\n\n    c3_chart_internal_fn.initLegend = function () {\n        var $$ = this;\n        $$.legendItemTextBox = {};\n        $$.legendHasRendered = false;\n        $$.legend = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('legend'));\n        if (!$$.config.legend_show) {\n            $$.legend.style('visibility', 'hidden');\n            $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n            return;\n        }\n        // MEMO: call here to update legend box and tranlate for all\n        // MEMO: translate will be upated by this, so transform not needed in updateLegend()\n        $$.updateLegendWithDefaults();\n    };\n    c3_chart_internal_fn.updateLegendWithDefaults = function () {\n        var $$ = this;\n        $$.updateLegend($$.mapToIds($$.data.targets), { withTransform: false, withTransitionForTransform: false, withTransition: false });\n    };\n    c3_chart_internal_fn.updateSizeForLegend = function (legendHeight, legendWidth) {\n        var $$ = this,\n            config = $$.config,\n            insetLegendPosition = {\n            top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n            left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n        };\n\n        $$.margin3 = {\n            top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n            right: NaN,\n            bottom: 0,\n            left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n        };\n    };\n    c3_chart_internal_fn.transformLegend = function (withTransition) {\n        var $$ = this;\n        (withTransition ? $$.legend.transition() : $$.legend).attr(\"transform\", $$.getTranslate('legend'));\n    };\n    c3_chart_internal_fn.updateLegendStep = function (step) {\n        this.legendStep = step;\n    };\n    c3_chart_internal_fn.updateLegendItemWidth = function (w) {\n        this.legendItemWidth = w;\n    };\n    c3_chart_internal_fn.updateLegendItemHeight = function (h) {\n        this.legendItemHeight = h;\n    };\n    c3_chart_internal_fn.getLegendWidth = function () {\n        var $$ = this;\n        return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n    };\n    c3_chart_internal_fn.getLegendHeight = function () {\n        var $$ = this,\n            h = 0;\n        if ($$.config.legend_show) {\n            if ($$.isLegendRight) {\n                h = $$.currentHeight;\n            } else {\n                h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n            }\n        }\n        return h;\n    };\n    c3_chart_internal_fn.opacityForLegend = function (legendItem) {\n        return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n    };\n    c3_chart_internal_fn.opacityForUnfocusedLegend = function (legendItem) {\n        return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n    };\n    c3_chart_internal_fn.toggleFocusLegend = function (targetIds, focus) {\n        var $$ = this;\n        targetIds = $$.mapToTargetIds(targetIds);\n        $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n            return targetIds.indexOf(id) >= 0;\n        }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n            var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n            return opacity.call($$, $$.d3.select(this));\n        });\n    };\n    c3_chart_internal_fn.revertLegend = function () {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n            return $$.opacityForLegend(d3.select(this));\n        });\n    };\n    c3_chart_internal_fn.showLegend = function (targetIds) {\n        var $$ = this,\n            config = $$.config;\n        if (!config.legend_show) {\n            config.legend_show = true;\n            $$.legend.style('visibility', 'visible');\n            if (!$$.legendHasRendered) {\n                $$.updateLegendWithDefaults();\n            }\n        }\n        $$.removeHiddenLegendIds(targetIds);\n        $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n            return $$.opacityForLegend($$.d3.select(this));\n        });\n    };\n    c3_chart_internal_fn.hideLegend = function (targetIds) {\n        var $$ = this,\n            config = $$.config;\n        if (config.legend_show && isEmpty(targetIds)) {\n            config.legend_show = false;\n            $$.legend.style('visibility', 'hidden');\n        }\n        $$.addHiddenLegendIds(targetIds);\n        $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n    };\n    c3_chart_internal_fn.clearLegendItemTextBoxCache = function () {\n        this.legendItemTextBox = {};\n    };\n    c3_chart_internal_fn.updateLegend = function (targetIds, options, transitions) {\n        var $$ = this,\n            config = $$.config;\n        var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n        var paddingTop = 4,\n            paddingRight = 10,\n            maxWidth = 0,\n            maxHeight = 0,\n            posMin = 10,\n            tileWidth = config.legend_item_tile_width + 5;\n        var l,\n            totalLength = 0,\n            offsets = {},\n            widths = {},\n            heights = {},\n            margins = [0],\n            steps = {},\n            step = 0;\n        var withTransition, withTransitionForTransform;\n        var texts, rects, tiles, background;\n\n        // Skip elements when their name is set to null\n        targetIds = targetIds.filter(function (id) {\n            return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n        });\n\n        options = options || {};\n        withTransition = getOption(options, \"withTransition\", true);\n        withTransitionForTransform = getOption(options, \"withTransitionForTransform\", true);\n\n        function getTextBox(textElement, id) {\n            if (!$$.legendItemTextBox[id]) {\n                $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n            }\n            return $$.legendItemTextBox[id];\n        }\n\n        function updatePositions(textElement, id, index) {\n            var reset = index === 0,\n                isLast = index === targetIds.length - 1,\n                box = getTextBox(textElement, id),\n                itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n                itemHeight = box.height + paddingTop,\n                itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n                areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n                margin,\n                maxLength;\n\n            // MEMO: care about condifion of step, totalLength\n            function updateValues(id, withoutStep) {\n                if (!withoutStep) {\n                    margin = (areaLength - totalLength - itemLength) / 2;\n                    if (margin < posMin) {\n                        margin = (areaLength - itemLength) / 2;\n                        totalLength = 0;\n                        step++;\n                    }\n                }\n                steps[id] = step;\n                margins[step] = $$.isLegendInset ? 10 : margin;\n                offsets[id] = totalLength;\n                totalLength += itemLength;\n            }\n\n            if (reset) {\n                totalLength = 0;\n                step = 0;\n                maxWidth = 0;\n                maxHeight = 0;\n            }\n\n            if (config.legend_show && !$$.isLegendToShow(id)) {\n                widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n                return;\n            }\n\n            widths[id] = itemWidth;\n            heights[id] = itemHeight;\n\n            if (!maxWidth || itemWidth >= maxWidth) {\n                maxWidth = itemWidth;\n            }\n            if (!maxHeight || itemHeight >= maxHeight) {\n                maxHeight = itemHeight;\n            }\n            maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n\n            if (config.legend_equally) {\n                Object.keys(widths).forEach(function (id) {\n                    widths[id] = maxWidth;\n                });\n                Object.keys(heights).forEach(function (id) {\n                    heights[id] = maxHeight;\n                });\n                margin = (areaLength - maxLength * targetIds.length) / 2;\n                if (margin < posMin) {\n                    totalLength = 0;\n                    step = 0;\n                    targetIds.forEach(function (id) {\n                        updateValues(id);\n                    });\n                } else {\n                    updateValues(id, true);\n                }\n            } else {\n                updateValues(id);\n            }\n        }\n\n        if ($$.isLegendInset) {\n            step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n            $$.updateLegendStep(step);\n        }\n\n        if ($$.isLegendRight) {\n            xForLegend = function xForLegend(id) {\n                return maxWidth * steps[id];\n            };\n            yForLegend = function yForLegend(id) {\n                return margins[steps[id]] + offsets[id];\n            };\n        } else if ($$.isLegendInset) {\n            xForLegend = function xForLegend(id) {\n                return maxWidth * steps[id] + 10;\n            };\n            yForLegend = function yForLegend(id) {\n                return margins[steps[id]] + offsets[id];\n            };\n        } else {\n            xForLegend = function xForLegend(id) {\n                return margins[steps[id]] + offsets[id];\n            };\n            yForLegend = function yForLegend(id) {\n                return maxHeight * steps[id];\n            };\n        }\n        xForLegendText = function xForLegendText(id, i) {\n            return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n        };\n        yForLegendText = function yForLegendText(id, i) {\n            return yForLegend(id, i) + 9;\n        };\n        xForLegendRect = function xForLegendRect(id, i) {\n            return xForLegend(id, i);\n        };\n        yForLegendRect = function yForLegendRect(id, i) {\n            return yForLegend(id, i) - 5;\n        };\n        x1ForLegendTile = function x1ForLegendTile(id, i) {\n            return xForLegend(id, i) - 2;\n        };\n        x2ForLegendTile = function x2ForLegendTile(id, i) {\n            return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n        };\n        yForLegendTile = function yForLegendTile(id, i) {\n            return yForLegend(id, i) + 4;\n        };\n\n        // Define g for legend area\n        l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n            return $$.generateClass(CLASS.legendItem, id);\n        }).style('visibility', function (id) {\n            return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n        }).style('cursor', 'pointer').on('click', function (id) {\n            if (config.legend_item_onclick) {\n                config.legend_item_onclick.call($$, id);\n            } else {\n                if ($$.d3.event.altKey) {\n                    $$.api.hide();\n                    $$.api.show(id);\n                } else {\n                    $$.api.toggle(id);\n                    $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n                }\n            }\n        }).on('mouseover', function (id) {\n            if (config.legend_item_onmouseover) {\n                config.legend_item_onmouseover.call($$, id);\n            } else {\n                $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n                if (!$$.transiting && $$.isTargetToShow(id)) {\n                    $$.api.focus(id);\n                }\n            }\n        }).on('mouseout', function (id) {\n            if (config.legend_item_onmouseout) {\n                config.legend_item_onmouseout.call($$, id);\n            } else {\n                $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n                $$.api.revert();\n            }\n        });\n        l.append('text').text(function (id) {\n            return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n        }).each(function (id, i) {\n            updatePositions(this, id, i);\n        }).style(\"pointer-events\", \"none\").attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n        l.append('rect').attr(\"class\", CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n        l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style(\"pointer-events\", \"none\").attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height);\n\n        // Set background for inset legend\n        background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n        if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n            background = $$.legend.insert('g', '.' + CLASS.legendItem).attr(\"class\", CLASS.legendBackground).append('rect');\n        }\n\n        texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n            return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n        }) // MEMO: needed for update\n        .each(function (id, i) {\n            updatePositions(this, id, i);\n        });\n        (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n\n        rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n        (withTransition ? rects.transition() : rects).attr('width', function (id) {\n            return widths[id];\n        }).attr('height', function (id) {\n            return heights[id];\n        }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n\n        tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n        (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n            return $$.levelColor($$.cache[id].values[0].value);\n        } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n\n        if (background) {\n            (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n        }\n\n        // toggle legend state\n        $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n            return !$$.isTargetToShow(id);\n        });\n\n        // Update all to reflect change of legend\n        $$.updateLegendItemWidth(maxWidth);\n        $$.updateLegendItemHeight(maxHeight);\n        $$.updateLegendStep(step);\n        // Update size and scale\n        $$.updateSizes();\n        $$.updateScales();\n        $$.updateSvgSize();\n        // Update g positions\n        $$.transformAll(withTransitionForTransform, transitions);\n        $$.legendHasRendered = true;\n    };\n\n    c3_chart_internal_fn.initRegion = function () {\n        var $$ = this;\n        $$.region = $$.main.append('g').attr(\"clip-path\", $$.clipPath).attr(\"class\", CLASS.regions);\n    };\n    c3_chart_internal_fn.updateRegion = function (duration) {\n        var $$ = this,\n            config = $$.config;\n\n        // hide if arc type\n        $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n\n        $$.mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n        $$.mainRegion.enter().append('g').append('rect').style(\"fill-opacity\", 0);\n        $$.mainRegion.attr('class', $$.classRegion.bind($$));\n        $$.mainRegion.exit().transition().duration(duration).style(\"opacity\", 0).remove();\n    };\n    c3_chart_internal_fn.redrawRegion = function (withTransition) {\n        var $$ = this,\n            regions = $$.mainRegion.selectAll('rect').each(function () {\n            // data is binded to g and it's not transferred to rect (child node) automatically,\n            // then data of each rect has to be updated manually.\n            // TODO: there should be more efficient way to solve this?\n            var parentData = $$.d3.select(this.parentNode).datum();\n            $$.d3.select(this).datum(parentData);\n        }),\n            x = $$.regionX.bind($$),\n            y = $$.regionY.bind($$),\n            w = $$.regionWidth.bind($$),\n            h = $$.regionHeight.bind($$);\n        return [(withTransition ? regions.transition() : regions).attr(\"x\", x).attr(\"y\", y).attr(\"width\", w).attr(\"height\", h).style(\"fill-opacity\", function (d) {\n            return isValue(d.opacity) ? d.opacity : 0.1;\n        })];\n    };\n    c3_chart_internal_fn.regionX = function (d) {\n        var $$ = this,\n            config = $$.config,\n            xPos,\n            yScale = d.axis === 'y' ? $$.y : $$.y2;\n        if (d.axis === 'y' || d.axis === 'y2') {\n            xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n        } else {\n            xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n        }\n        return xPos;\n    };\n    c3_chart_internal_fn.regionY = function (d) {\n        var $$ = this,\n            config = $$.config,\n            yPos,\n            yScale = d.axis === 'y' ? $$.y : $$.y2;\n        if (d.axis === 'y' || d.axis === 'y2') {\n            yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n        } else {\n            yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n        }\n        return yPos;\n    };\n    c3_chart_internal_fn.regionWidth = function (d) {\n        var $$ = this,\n            config = $$.config,\n            start = $$.regionX(d),\n            end,\n            yScale = d.axis === 'y' ? $$.y : $$.y2;\n        if (d.axis === 'y' || d.axis === 'y2') {\n            end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n        } else {\n            end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n        }\n        return end < start ? 0 : end - start;\n    };\n    c3_chart_internal_fn.regionHeight = function (d) {\n        var $$ = this,\n            config = $$.config,\n            start = this.regionY(d),\n            end,\n            yScale = d.axis === 'y' ? $$.y : $$.y2;\n        if (d.axis === 'y' || d.axis === 'y2') {\n            end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n        } else {\n            end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n        }\n        return end < start ? 0 : end - start;\n    };\n    c3_chart_internal_fn.isRegionOnX = function (d) {\n        return !d.axis || d.axis === 'x';\n    };\n\n    c3_chart_internal_fn.getScale = function (min, max, forTimeseries) {\n        return (forTimeseries ? this.d3.time.scale() : this.d3.scale.linear()).range([min, max]);\n    };\n    c3_chart_internal_fn.getX = function (min, max, domain, offset) {\n        var $$ = this,\n            scale = $$.getScale(min, max, $$.isTimeSeries()),\n            _scale = domain ? scale.domain(domain) : scale,\n            key;\n        // Define customized scale if categorized axis\n        if ($$.isCategorized()) {\n            offset = offset || function () {\n                return 0;\n            };\n            scale = function scale(d, raw) {\n                var v = _scale(d) + offset(d);\n                return raw ? v : Math.ceil(v);\n            };\n        } else {\n            scale = function scale(d, raw) {\n                var v = _scale(d);\n                return raw ? v : Math.ceil(v);\n            };\n        }\n        // define functions\n        for (key in _scale) {\n            scale[key] = _scale[key];\n        }\n        scale.orgDomain = function () {\n            return _scale.domain();\n        };\n        // define custom domain() for categorized axis\n        if ($$.isCategorized()) {\n            scale.domain = function (domain) {\n                if (!arguments.length) {\n                    domain = this.orgDomain();\n                    return [domain[0], domain[1] + 1];\n                }\n                _scale.domain(domain);\n                return scale;\n            };\n        }\n        return scale;\n    };\n    c3_chart_internal_fn.getY = function (min, max, domain) {\n        var scale = this.getScale(min, max, this.isTimeSeriesY());\n        if (domain) {\n            scale.domain(domain);\n        }\n        return scale;\n    };\n    c3_chart_internal_fn.getYScale = function (id) {\n        return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n    };\n    c3_chart_internal_fn.getSubYScale = function (id) {\n        return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n    };\n    c3_chart_internal_fn.updateScales = function () {\n        var $$ = this,\n            config = $$.config,\n            forInit = !$$.x;\n        // update edges\n        $$.xMin = config.axis_rotated ? 1 : 0;\n        $$.xMax = config.axis_rotated ? $$.height : $$.width;\n        $$.yMin = config.axis_rotated ? 0 : $$.height;\n        $$.yMax = config.axis_rotated ? $$.width : 1;\n        $$.subXMin = $$.xMin;\n        $$.subXMax = $$.xMax;\n        $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n        $$.subYMax = config.axis_rotated ? $$.width2 : 1;\n        // update scales\n        $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n            return $$.xAxis.tickOffset();\n        });\n        $$.y = $$.getY($$.yMin, $$.yMax, forInit ? config.axis_y_default : $$.y.domain());\n        $$.y2 = $$.getY($$.yMin, $$.yMax, forInit ? config.axis_y2_default : $$.y2.domain());\n        $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n            return d % 1 ? 0 : $$.subXAxis.tickOffset();\n        });\n        $$.subY = $$.getY($$.subYMin, $$.subYMax, forInit ? config.axis_y_default : $$.subY.domain());\n        $$.subY2 = $$.getY($$.subYMin, $$.subYMax, forInit ? config.axis_y2_default : $$.subY2.domain());\n        // update axes\n        $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n        $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n        $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n        $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n\n        $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n        $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n        $$.yAxis = $$.axis.getYAxis($$.y, $$.yOrient, config.axis_y_tick_format, $$.yAxisTickValues, config.axis_y_tick_outer);\n        $$.y2Axis = $$.axis.getYAxis($$.y2, $$.y2Orient, config.axis_y2_tick_format, $$.y2AxisTickValues, config.axis_y2_tick_outer);\n\n        // Set initialized scales to brush and zoom\n        if (!forInit) {\n            if ($$.brush) {\n                $$.brush.scale($$.subX);\n            }\n            if (config.zoom_enabled) {\n                $$.zoom.scale($$.x);\n            }\n        }\n        // update for arc\n        if ($$.updateArc) {\n            $$.updateArc();\n        }\n    };\n\n    c3_chart_internal_fn.selectPoint = function (target, d, i) {\n        var $$ = this,\n            config = $$.config,\n            cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n            cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n            r = $$.pointSelectR.bind($$);\n        config.data_onselected.call($$.api, d, target.node());\n        // add selected-circle on low layer g\n        $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr(\"class\", function () {\n            return $$.generateClass(CLASS.selectedCircle, i);\n        }).attr(\"cx\", cx).attr(\"cy\", cy).attr(\"stroke\", function () {\n            return $$.color(d);\n        }).attr(\"r\", function (d) {\n            return $$.pointSelectR(d) * 1.4;\n        }).transition().duration(100).attr(\"r\", r);\n    };\n    c3_chart_internal_fn.unselectPoint = function (target, d, i) {\n        var $$ = this;\n        $$.config.data_onunselected.call($$.api, d, target.node());\n        // remove selected-circle from low layer g\n        $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n    };\n    c3_chart_internal_fn.togglePoint = function (selected, target, d, i) {\n        selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n    };\n    c3_chart_internal_fn.selectPath = function (target, d) {\n        var $$ = this;\n        $$.config.data_onselected.call($$, d, target.node());\n        if ($$.config.interaction_brighten) {\n            target.transition().duration(100).style(\"fill\", function () {\n                return $$.d3.rgb($$.color(d)).brighter(0.75);\n            });\n        }\n    };\n    c3_chart_internal_fn.unselectPath = function (target, d) {\n        var $$ = this;\n        $$.config.data_onunselected.call($$, d, target.node());\n        if ($$.config.interaction_brighten) {\n            target.transition().duration(100).style(\"fill\", function () {\n                return $$.color(d);\n            });\n        }\n    };\n    c3_chart_internal_fn.togglePath = function (selected, target, d, i) {\n        selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n    };\n    c3_chart_internal_fn.getToggle = function (that, d) {\n        var $$ = this,\n            toggle;\n        if (that.nodeName === 'circle') {\n            if ($$.isStepType(d)) {\n                // circle is hidden in step chart, so treat as within the click area\n                toggle = function toggle() {}; // TODO: how to select step chart?\n            } else {\n                toggle = $$.togglePoint;\n            }\n        } else if (that.nodeName === 'path') {\n            toggle = $$.togglePath;\n        }\n        return toggle;\n    };\n    c3_chart_internal_fn.toggleShape = function (that, d, i) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config,\n            shape = d3.select(that),\n            isSelected = shape.classed(CLASS.SELECTED),\n            toggle = $$.getToggle(that, d).bind($$);\n\n        if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n            if (!config.data_selection_multiple) {\n                $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : \"\")).selectAll('.' + CLASS.shape).each(function (d, i) {\n                    var shape = d3.select(this);\n                    if (shape.classed(CLASS.SELECTED)) {\n                        toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n                    }\n                });\n            }\n            shape.classed(CLASS.SELECTED, !isSelected);\n            toggle(!isSelected, shape, d, i);\n        }\n    };\n\n    c3_chart_internal_fn.initBar = function () {\n        var $$ = this;\n        $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartBars);\n    };\n    c3_chart_internal_fn.updateTargetsForBar = function (targets) {\n        var $$ = this,\n            config = $$.config,\n            mainBarUpdate,\n            mainBarEnter,\n            classChartBar = $$.classChartBar.bind($$),\n            classBars = $$.classBars.bind($$),\n            classFocus = $$.classFocus.bind($$);\n        mainBarUpdate = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n            return classChartBar(d) + classFocus(d);\n        });\n        mainBarEnter = mainBarUpdate.enter().append('g').attr('class', classChartBar).style(\"pointer-events\", \"none\");\n        // Bars for each data\n        mainBarEnter.append('g').attr(\"class\", classBars).style(\"cursor\", function (d) {\n            return config.data_selection_isselectable(d) ? \"pointer\" : null;\n        });\n    };\n    c3_chart_internal_fn.updateBar = function (durationForExit) {\n        var $$ = this,\n            barData = $$.barData.bind($$),\n            classBar = $$.classBar.bind($$),\n            initialOpacity = $$.initialOpacity.bind($$),\n            color = function color(d) {\n            return $$.color(d.id);\n        };\n        $$.mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n        $$.mainBar.enter().append('path').attr(\"class\", classBar).style(\"stroke\", color).style(\"fill\", color);\n        $$.mainBar.style(\"opacity\", initialOpacity);\n        $$.mainBar.exit().transition().duration(durationForExit).remove();\n    };\n    c3_chart_internal_fn.redrawBar = function (drawBar, withTransition) {\n        return [(withTransition ? this.mainBar.transition(Math.random().toString()) : this.mainBar).attr('d', drawBar).style(\"stroke\", this.color).style(\"fill\", this.color).style(\"opacity\", 1)];\n    };\n    c3_chart_internal_fn.getBarW = function (axis, barTargetsNum) {\n        var $$ = this,\n            config = $$.config,\n            w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n        return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n    };\n    c3_chart_internal_fn.getBars = function (i, id) {\n        var $$ = this;\n        return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n    };\n    c3_chart_internal_fn.expandBars = function (i, id, reset) {\n        var $$ = this;\n        if (reset) {\n            $$.unexpandBars();\n        }\n        $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n    };\n    c3_chart_internal_fn.unexpandBars = function (i) {\n        var $$ = this;\n        $$.getBars(i).classed(CLASS.EXPANDED, false);\n    };\n    c3_chart_internal_fn.generateDrawBar = function (barIndices, isSub) {\n        var $$ = this,\n            config = $$.config,\n            getPoints = $$.generateGetBarPoints(barIndices, isSub);\n        return function (d, i) {\n            // 4 points that make a bar\n            var points = getPoints(d, i);\n\n            // switch points if axis is rotated, not applicable for sub chart\n            var indexX = config.axis_rotated ? 1 : 0;\n            var indexY = config.axis_rotated ? 0 : 1;\n\n            var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n\n            return path;\n        };\n    };\n    c3_chart_internal_fn.generateGetBarPoints = function (barIndices, isSub) {\n        var $$ = this,\n            axis = isSub ? $$.subXAxis : $$.xAxis,\n            barTargetsNum = barIndices.__max__ + 1,\n            barW = $$.getBarW(axis, barTargetsNum),\n            barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n            barY = $$.getShapeY(!!isSub),\n            barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n            barSpaceOffset = barW * ($$.config.bar_space / 2),\n            yScale = isSub ? $$.getSubYScale : $$.getYScale;\n        return function (d, i) {\n            var y0 = yScale.call($$, d.id)(0),\n                offset = barOffset(d, i) || y0,\n                // offset is for stacked bar chart\n            posX = barX(d),\n                posY = barY(d);\n            // fix posY not to overflow opposite quadrant\n            if ($$.config.axis_rotated) {\n                if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n                    posY = y0;\n                }\n            }\n            // 4 points that make a bar\n            return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY - (y0 - offset)], [posX + barW - barSpaceOffset, posY - (y0 - offset)], [posX + barW - barSpaceOffset, offset]];\n        };\n    };\n    c3_chart_internal_fn.isWithinBar = function (that) {\n        var mouse = this.d3.mouse(that),\n            box = that.getBoundingClientRect(),\n            seg0 = that.pathSegList.getItem(0),\n            seg1 = that.pathSegList.getItem(1),\n            x = Math.min(seg0.x, seg1.x),\n            y = Math.min(seg0.y, seg1.y),\n            w = box.width,\n            h = box.height,\n            offset = 2,\n            sx = x - offset,\n            ex = x + w + offset,\n            sy = y + h + offset,\n            ey = y - offset;\n        return sx < mouse[0] && mouse[0] < ex && ey < mouse[1] && mouse[1] < sy;\n    };\n\n    c3_chart_internal_fn.getShapeIndices = function (typeFilter) {\n        var $$ = this,\n            config = $$.config,\n            indices = {},\n            i = 0,\n            j,\n            k;\n        $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n            for (j = 0; j < config.data_groups.length; j++) {\n                if (config.data_groups[j].indexOf(d.id) < 0) {\n                    continue;\n                }\n                for (k = 0; k < config.data_groups[j].length; k++) {\n                    if (config.data_groups[j][k] in indices) {\n                        indices[d.id] = indices[config.data_groups[j][k]];\n                        break;\n                    }\n                }\n            }\n            if (isUndefined(indices[d.id])) {\n                indices[d.id] = i++;\n            }\n        });\n        indices.__max__ = i - 1;\n        return indices;\n    };\n    c3_chart_internal_fn.getShapeX = function (offset, targetsNum, indices, isSub) {\n        var $$ = this,\n            scale = isSub ? $$.subX : $$.x;\n        return function (d) {\n            var index = d.id in indices ? indices[d.id] : 0;\n            return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n        };\n    };\n    c3_chart_internal_fn.getShapeY = function (isSub) {\n        var $$ = this;\n        return function (d) {\n            var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n            return scale(d.value);\n        };\n    };\n    c3_chart_internal_fn.getShapeOffset = function (typeFilter, indices, isSub) {\n        var $$ = this,\n            targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n            targetIds = targets.map(function (t) {\n            return t.id;\n        });\n        return function (d, i) {\n            var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n                y0 = scale(0),\n                offset = y0;\n            targets.forEach(function (t) {\n                var values = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n                if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n                    return;\n                }\n                if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n                    // check if the x values line up\n                    if (typeof values[i] === 'undefined' || +values[i].x !== +d.x) {\n                        // \"+\" for timeseries\n                        // if not, try to find the value that does line up\n                        i = -1;\n                        values.forEach(function (v, j) {\n                            if (v.x === d.x) {\n                                i = j;\n                            }\n                        });\n                    }\n                    if (i in values && values[i].value * d.value >= 0) {\n                        offset += scale(values[i].value) - y0;\n                    }\n                }\n            });\n            return offset;\n        };\n    };\n    c3_chart_internal_fn.isWithinShape = function (that, d) {\n        var $$ = this,\n            shape = $$.d3.select(that),\n            isWithin;\n        if (!$$.isTargetToShow(d.id)) {\n            isWithin = false;\n        } else if (that.nodeName === 'circle') {\n            isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n        } else if (that.nodeName === 'path') {\n            isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar(that) : true;\n        }\n        return isWithin;\n    };\n\n    c3_chart_internal_fn.getInterpolate = function (d) {\n        var $$ = this,\n            interpolation = $$.isInterpolationType($$.config.spline_interpolation_type) ? $$.config.spline_interpolation_type : 'cardinal';\n        return $$.isSplineType(d) ? interpolation : $$.isStepType(d) ? $$.config.line_step_type : \"linear\";\n    };\n\n    c3_chart_internal_fn.initLine = function () {\n        var $$ = this;\n        $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartLines);\n    };\n    c3_chart_internal_fn.updateTargetsForLine = function (targets) {\n        var $$ = this,\n            config = $$.config,\n            mainLineUpdate,\n            mainLineEnter,\n            classChartLine = $$.classChartLine.bind($$),\n            classLines = $$.classLines.bind($$),\n            classAreas = $$.classAreas.bind($$),\n            classCircles = $$.classCircles.bind($$),\n            classFocus = $$.classFocus.bind($$);\n        mainLineUpdate = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n            return classChartLine(d) + classFocus(d);\n        });\n        mainLineEnter = mainLineUpdate.enter().append('g').attr('class', classChartLine).style('opacity', 0).style(\"pointer-events\", \"none\");\n        // Lines for each data\n        mainLineEnter.append('g').attr(\"class\", classLines);\n        // Areas\n        mainLineEnter.append('g').attr('class', classAreas);\n        // Circles for each data point on lines\n        mainLineEnter.append('g').attr(\"class\", function (d) {\n            return $$.generateClass(CLASS.selectedCircles, d.id);\n        });\n        mainLineEnter.append('g').attr(\"class\", classCircles).style(\"cursor\", function (d) {\n            return config.data_selection_isselectable(d) ? \"pointer\" : null;\n        });\n        // Update date for selected circles\n        targets.forEach(function (t) {\n            $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n                d.value = t.values[d.index].value;\n            });\n        });\n        // MEMO: can not keep same color...\n        //mainLineUpdate.exit().remove();\n    };\n    c3_chart_internal_fn.updateLine = function (durationForExit) {\n        var $$ = this;\n        $$.mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n        $$.mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style(\"stroke\", $$.color);\n        $$.mainLine.style(\"opacity\", $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n            return $$.isStepType(d) ? 'crispEdges' : '';\n        }).attr('transform', null);\n        $$.mainLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawLine = function (drawLine, withTransition) {\n        return [(withTransition ? this.mainLine.transition(Math.random().toString()) : this.mainLine).attr(\"d\", drawLine).style(\"stroke\", this.color).style(\"opacity\", 1)];\n    };\n    c3_chart_internal_fn.generateDrawLine = function (lineIndices, isSub) {\n        var $$ = this,\n            config = $$.config,\n            line = $$.d3.svg.line(),\n            getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n            yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n            xValue = function xValue(d) {\n            return (isSub ? $$.subxx : $$.xx).call($$, d);\n        },\n            yValue = function yValue(d, i) {\n            return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n        };\n\n        line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n        if (!config.line_connectNull) {\n            line = line.defined(function (d) {\n                return d.value != null;\n            });\n        }\n        return function (d) {\n            var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n                x = isSub ? $$.subX : $$.x,\n                y = yScaleGetter.call($$, d.id),\n                x0 = 0,\n                y0 = 0,\n                path;\n            if ($$.isLineType(d)) {\n                if (config.data_regions[d.id]) {\n                    path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n                } else {\n                    if ($$.isStepType(d)) {\n                        values = $$.convertValuesToStep(values);\n                    }\n                    path = line.interpolate($$.getInterpolate(d))(values);\n                }\n            } else {\n                if (values[0]) {\n                    x0 = x(values[0].x);\n                    y0 = y(values[0].value);\n                }\n                path = config.axis_rotated ? \"M \" + y0 + \" \" + x0 : \"M \" + x0 + \" \" + y0;\n            }\n            return path ? path : \"M 0 0\";\n        };\n    };\n    c3_chart_internal_fn.generateGetLinePoints = function (lineIndices, isSub) {\n        // partial duplication of generateGetBarPoints\n        var $$ = this,\n            config = $$.config,\n            lineTargetsNum = lineIndices.__max__ + 1,\n            x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n            y = $$.getShapeY(!!isSub),\n            lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n            yScale = isSub ? $$.getSubYScale : $$.getYScale;\n        return function (d, i) {\n            var y0 = yScale.call($$, d.id)(0),\n                offset = lineOffset(d, i) || y0,\n                // offset is for stacked area chart\n            posX = x(d),\n                posY = y(d);\n            // fix posY not to overflow opposite quadrant\n            if (config.axis_rotated) {\n                if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n                    posY = y0;\n                }\n            }\n            // 1 point that marks the line position\n            return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n            [posX, posY - (y0 - offset)], // needed for compatibility\n            [posX, posY - (y0 - offset)] // needed for compatibility\n            ];\n        };\n    };\n\n    c3_chart_internal_fn.lineWithRegions = function (d, x, y, _regions) {\n        var $$ = this,\n            config = $$.config,\n            prev = -1,\n            i,\n            j,\n            s = \"M\",\n            sWithRegion,\n            xp,\n            yp,\n            dx,\n            dy,\n            dd,\n            diff,\n            diffx2,\n            xOffset = $$.isCategorized() ? 0.5 : 0,\n            xValue,\n            yValue,\n            regions = [];\n\n        function isWithinRegions(x, regions) {\n            var i;\n            for (i = 0; i < regions.length; i++) {\n                if (regions[i].start < x && x <= regions[i].end) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        // Check start/end of regions\n        if (isDefined(_regions)) {\n            for (i = 0; i < _regions.length; i++) {\n                regions[i] = {};\n                if (isUndefined(_regions[i].start)) {\n                    regions[i].start = d[0].x;\n                } else {\n                    regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n                }\n                if (isUndefined(_regions[i].end)) {\n                    regions[i].end = d[d.length - 1].x;\n                } else {\n                    regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n                }\n            }\n        }\n\n        // Set scales\n        xValue = config.axis_rotated ? function (d) {\n            return y(d.value);\n        } : function (d) {\n            return x(d.x);\n        };\n        yValue = config.axis_rotated ? function (d) {\n            return x(d.x);\n        } : function (d) {\n            return y(d.value);\n        };\n\n        // Define svg generator function for region\n        function generateM(points) {\n            return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n        }\n        if ($$.isTimeSeries()) {\n            sWithRegion = function sWithRegion(d0, d1, j, diff) {\n                var x0 = d0.x.getTime(),\n                    x_diff = d1.x - d0.x,\n                    xv0 = new Date(x0 + x_diff * j),\n                    xv1 = new Date(x0 + x_diff * (j + diff)),\n                    points;\n                if (config.axis_rotated) {\n                    points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n                } else {\n                    points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n                }\n                return generateM(points);\n            };\n        } else {\n            sWithRegion = function sWithRegion(d0, d1, j, diff) {\n                var points;\n                if (config.axis_rotated) {\n                    points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n                } else {\n                    points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n                }\n                return generateM(points);\n            };\n        }\n\n        // Generate\n        for (i = 0; i < d.length; i++) {\n\n            // Draw as normal\n            if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n                s += \" \" + xValue(d[i]) + \" \" + yValue(d[i]);\n            }\n            // Draw with region // TODO: Fix for horizotal charts\n            else {\n                    xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n                    yp = $$.getScale(d[i - 1].value, d[i].value);\n\n                    dx = x(d[i].x) - x(d[i - 1].x);\n                    dy = y(d[i].value) - y(d[i - 1].value);\n                    dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n                    diff = 2 / dd;\n                    diffx2 = diff * 2;\n\n                    for (j = diff; j <= 1; j += diffx2) {\n                        s += sWithRegion(d[i - 1], d[i], j, diff);\n                    }\n                }\n            prev = d[i].x;\n        }\n\n        return s;\n    };\n\n    c3_chart_internal_fn.updateArea = function (durationForExit) {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n        $$.mainArea.enter().append('path').attr(\"class\", $$.classArea.bind($$)).style(\"fill\", $$.color).style(\"opacity\", function () {\n            $$.orgAreaOpacity = +d3.select(this).style('opacity');return 0;\n        });\n        $$.mainArea.style(\"opacity\", $$.orgAreaOpacity);\n        $$.mainArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawArea = function (drawArea, withTransition) {\n        return [(withTransition ? this.mainArea.transition(Math.random().toString()) : this.mainArea).attr(\"d\", drawArea).style(\"fill\", this.color).style(\"opacity\", this.orgAreaOpacity)];\n    };\n    c3_chart_internal_fn.generateDrawArea = function (areaIndices, isSub) {\n        var $$ = this,\n            config = $$.config,\n            area = $$.d3.svg.area(),\n            getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n            yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n            xValue = function xValue(d) {\n            return (isSub ? $$.subxx : $$.xx).call($$, d);\n        },\n            value0 = function value0(d, i) {\n            return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n        },\n            value1 = function value1(d, i) {\n            return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n        };\n\n        area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n        if (!config.line_connectNull) {\n            area = area.defined(function (d) {\n                return d.value !== null;\n            });\n        }\n\n        return function (d) {\n            var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n                x0 = 0,\n                y0 = 0,\n                path;\n            if ($$.isAreaType(d)) {\n                if ($$.isStepType(d)) {\n                    values = $$.convertValuesToStep(values);\n                }\n                path = area.interpolate($$.getInterpolate(d))(values);\n            } else {\n                if (values[0]) {\n                    x0 = $$.x(values[0].x);\n                    y0 = $$.getYScale(d.id)(values[0].value);\n                }\n                path = config.axis_rotated ? \"M \" + y0 + \" \" + x0 : \"M \" + x0 + \" \" + y0;\n            }\n            return path ? path : \"M 0 0\";\n        };\n    };\n    c3_chart_internal_fn.getAreaBaseValue = function () {\n        return 0;\n    };\n    c3_chart_internal_fn.generateGetAreaPoints = function (areaIndices, isSub) {\n        // partial duplication of generateGetBarPoints\n        var $$ = this,\n            config = $$.config,\n            areaTargetsNum = areaIndices.__max__ + 1,\n            x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n            y = $$.getShapeY(!!isSub),\n            areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n            yScale = isSub ? $$.getSubYScale : $$.getYScale;\n        return function (d, i) {\n            var y0 = yScale.call($$, d.id)(0),\n                offset = areaOffset(d, i) || y0,\n                // offset is for stacked area chart\n            posX = x(d),\n                posY = y(d);\n            // fix posY not to overflow opposite quadrant\n            if (config.axis_rotated) {\n                if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n                    posY = y0;\n                }\n            }\n            // 1 point that marks the area position\n            return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n            [posX, offset] // needed for compatibility\n            ];\n        };\n    };\n\n    c3_chart_internal_fn.updateCircle = function () {\n        var $$ = this;\n        $$.mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterData.bind($$));\n        $$.mainCircle.enter().append(\"circle\").attr(\"class\", $$.classCircle.bind($$)).attr(\"r\", $$.pointR.bind($$)).style(\"fill\", $$.color);\n        $$.mainCircle.style(\"opacity\", $$.initialOpacityForCircle.bind($$));\n        $$.mainCircle.exit().remove();\n    };\n    c3_chart_internal_fn.redrawCircle = function (cx, cy, withTransition) {\n        var selectedCircles = this.main.selectAll('.' + CLASS.selectedCircle);\n        return [(withTransition ? this.mainCircle.transition(Math.random().toString()) : this.mainCircle).style('opacity', this.opacityForCircle.bind(this)).style(\"fill\", this.color).attr(\"cx\", cx).attr(\"cy\", cy), (withTransition ? selectedCircles.transition(Math.random().toString()) : selectedCircles).attr(\"cx\", cx).attr(\"cy\", cy)];\n    };\n    c3_chart_internal_fn.circleX = function (d) {\n        return d.x || d.x === 0 ? this.x(d.x) : null;\n    };\n    c3_chart_internal_fn.updateCircleY = function () {\n        var $$ = this,\n            lineIndices,\n            getPoints;\n        if ($$.config.data_groups.length > 0) {\n            lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n            $$.circleY = function (d, i) {\n                return getPoints(d, i)[0][1];\n            };\n        } else {\n            $$.circleY = function (d) {\n                return $$.getYScale(d.id)(d.value);\n            };\n        }\n    };\n    c3_chart_internal_fn.getCircles = function (i, id) {\n        var $$ = this;\n        return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n    };\n    c3_chart_internal_fn.expandCircles = function (i, id, reset) {\n        var $$ = this,\n            r = $$.pointExpandedR.bind($$);\n        if (reset) {\n            $$.unexpandCircles();\n        }\n        $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n    };\n    c3_chart_internal_fn.unexpandCircles = function (i) {\n        var $$ = this,\n            r = $$.pointR.bind($$);\n        $$.getCircles(i).filter(function () {\n            return $$.d3.select(this).classed(CLASS.EXPANDED);\n        }).classed(CLASS.EXPANDED, false).attr('r', r);\n    };\n    c3_chart_internal_fn.pointR = function (d) {\n        var $$ = this,\n            config = $$.config;\n        return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n    };\n    c3_chart_internal_fn.pointExpandedR = function (d) {\n        var $$ = this,\n            config = $$.config;\n        if (config.point_focus_expand_enabled) {\n            return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n        } else {\n            return $$.pointR(d);\n        }\n    };\n    c3_chart_internal_fn.pointSelectR = function (d) {\n        var $$ = this,\n            config = $$.config;\n        return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n    };\n    c3_chart_internal_fn.isWithinCircle = function (that, r) {\n        var d3 = this.d3,\n            mouse = d3.mouse(that),\n            d3_this = d3.select(that),\n            cx = +d3_this.attr(\"cx\"),\n            cy = +d3_this.attr(\"cy\");\n        return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n    };\n    c3_chart_internal_fn.isWithinStep = function (that, y) {\n        return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n    };\n\n    c3_chart_internal_fn.getCurrentWidth = function () {\n        var $$ = this,\n            config = $$.config;\n        return config.size_width ? config.size_width : $$.getParentWidth();\n    };\n    c3_chart_internal_fn.getCurrentHeight = function () {\n        var $$ = this,\n            config = $$.config,\n            h = config.size_height ? config.size_height : $$.getParentHeight();\n        return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n    };\n    c3_chart_internal_fn.getCurrentPaddingTop = function () {\n        var $$ = this,\n            config = $$.config,\n            padding = isValue(config.padding_top) ? config.padding_top : 0;\n        if ($$.title && $$.title.node()) {\n            padding += $$.getTitlePadding();\n        }\n        return padding;\n    };\n    c3_chart_internal_fn.getCurrentPaddingBottom = function () {\n        var config = this.config;\n        return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n    };\n    c3_chart_internal_fn.getCurrentPaddingLeft = function (withoutRecompute) {\n        var $$ = this,\n            config = $$.config;\n        if (isValue(config.padding_left)) {\n            return config.padding_left;\n        } else if (config.axis_rotated) {\n            return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n        } else if (!config.axis_y_show || config.axis_y_inner) {\n            // && !config.axis_rotated\n            return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n        } else {\n            return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n        }\n    };\n    c3_chart_internal_fn.getCurrentPaddingRight = function () {\n        var $$ = this,\n            config = $$.config,\n            defaultPadding = 10,\n            legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n        if (isValue(config.padding_right)) {\n            return config.padding_right + 1; // 1 is needed not to hide tick line\n        } else if (config.axis_rotated) {\n            return defaultPadding + legendWidthOnRight;\n        } else if (!config.axis_y2_show || config.axis_y2_inner) {\n            // && !config.axis_rotated\n            return 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n        } else {\n            return ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n        }\n    };\n\n    c3_chart_internal_fn.getParentRectValue = function (key) {\n        var parent = this.selectChart.node(),\n            v;\n        while (parent && parent.tagName !== 'BODY') {\n            try {\n                v = parent.getBoundingClientRect()[key];\n            } catch (e) {\n                if (key === 'width') {\n                    // In IE in certain cases getBoundingClientRect\n                    // will cause an \"unspecified error\"\n                    v = parent.offsetWidth;\n                }\n            }\n            if (v) {\n                break;\n            }\n            parent = parent.parentNode;\n        }\n        return v;\n    };\n    c3_chart_internal_fn.getParentWidth = function () {\n        return this.getParentRectValue('width');\n    };\n    c3_chart_internal_fn.getParentHeight = function () {\n        var h = this.selectChart.style('height');\n        return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n    };\n\n    c3_chart_internal_fn.getSvgLeft = function (withoutRecompute) {\n        var $$ = this,\n            config = $$.config,\n            hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n            leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n            leftAxis = $$.main.select('.' + leftAxisClass).node(),\n            svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : { right: 0 },\n            chartRect = $$.selectChart.node().getBoundingClientRect(),\n            hasArc = $$.hasArcType(),\n            svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n        return svgLeft > 0 ? svgLeft : 0;\n    };\n\n    c3_chart_internal_fn.getAxisWidthByAxisId = function (id, withoutRecompute) {\n        var $$ = this,\n            position = $$.axis.getLabelPositionById(id);\n        return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n    };\n    c3_chart_internal_fn.getHorizontalAxisHeight = function (axisId) {\n        var $$ = this,\n            config = $$.config,\n            h = 30;\n        if (axisId === 'x' && !config.axis_x_show) {\n            return 8;\n        }\n        if (axisId === 'x' && config.axis_x_height) {\n            return config.axis_x_height;\n        }\n        if (axisId === 'y' && !config.axis_y_show) {\n            return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n        }\n        if (axisId === 'y2' && !config.axis_y2_show) {\n            return $$.rotated_padding_top;\n        }\n        // Calculate x axis height when tick rotated\n        if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n            h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - config.axis_x_tick_rotate) / 180);\n        }\n        // Calculate y axis height when tick rotated\n        if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n            h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - config.axis_y_tick_rotate) / 180);\n        }\n        return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n    };\n\n    c3_chart_internal_fn.getEventRectWidth = function () {\n        return Math.max(0, this.xAxis.tickInterval());\n    };\n\n    c3_chart_internal_fn.initBrush = function () {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.brush = d3.svg.brush().on(\"brush\", function () {\n            $$.redrawForBrush();\n        });\n        $$.brush.update = function () {\n            if ($$.context) {\n                $$.context.select('.' + CLASS.brush).call(this);\n            }\n            return this;\n        };\n        $$.brush.scale = function (scale) {\n            return $$.config.axis_rotated ? this.y(scale) : this.x(scale);\n        };\n    };\n    c3_chart_internal_fn.initSubchart = function () {\n        var $$ = this,\n            config = $$.config,\n            context = $$.context = $$.svg.append(\"g\").attr(\"transform\", $$.getTranslate('context')),\n            visibility = config.subchart_show ? 'visible' : 'hidden';\n\n        context.style('visibility', visibility);\n\n        // Define g for chart area\n        context.append('g').attr(\"clip-path\", $$.clipPathForSubchart).attr('class', CLASS.chart);\n\n        // Define g for bar chart area\n        context.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartBars);\n\n        // Define g for line chart area\n        context.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartLines);\n\n        // Add extent rect for Brush\n        context.append(\"g\").attr(\"clip-path\", $$.clipPath).attr(\"class\", CLASS.brush).call($$.brush);\n\n        // ATTENTION: This must be called AFTER chart added\n        // Add Axis\n        $$.axes.subx = context.append(\"g\").attr(\"class\", CLASS.axisX).attr(\"transform\", $$.getTranslate('subx')).attr(\"clip-path\", config.axis_rotated ? \"\" : $$.clipPathForXAxis).style(\"visibility\", config.subchart_axis_x_show ? visibility : 'hidden');\n    };\n    c3_chart_internal_fn.updateTargetsForSubchart = function (targets) {\n        var $$ = this,\n            context = $$.context,\n            config = $$.config,\n            contextLineEnter,\n            contextLineUpdate,\n            contextBarEnter,\n            contextBarUpdate,\n            classChartBar = $$.classChartBar.bind($$),\n            classBars = $$.classBars.bind($$),\n            classChartLine = $$.classChartLine.bind($$),\n            classLines = $$.classLines.bind($$),\n            classAreas = $$.classAreas.bind($$);\n\n        if (config.subchart_show) {\n            //-- Bar --//\n            contextBarUpdate = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', classChartBar);\n            contextBarEnter = contextBarUpdate.enter().append('g').style('opacity', 0).attr('class', classChartBar);\n            // Bars for each data\n            contextBarEnter.append('g').attr(\"class\", classBars);\n\n            //-- Line --//\n            contextLineUpdate = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', classChartLine);\n            contextLineEnter = contextLineUpdate.enter().append('g').style('opacity', 0).attr('class', classChartLine);\n            // Lines for each data\n            contextLineEnter.append(\"g\").attr(\"class\", classLines);\n            // Area\n            contextLineEnter.append(\"g\").attr(\"class\", classAreas);\n\n            //-- Brush --//\n            context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? \"width\" : \"height\", config.axis_rotated ? $$.width2 : $$.height2);\n        }\n    };\n    c3_chart_internal_fn.updateBarForSubchart = function (durationForExit) {\n        var $$ = this;\n        $$.contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n        $$.contextBar.enter().append('path').attr(\"class\", $$.classBar.bind($$)).style(\"stroke\", 'none').style(\"fill\", $$.color);\n        $$.contextBar.style(\"opacity\", $$.initialOpacity.bind($$));\n        $$.contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n        (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n    };\n    c3_chart_internal_fn.updateLineForSubchart = function (durationForExit) {\n        var $$ = this;\n        $$.contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n        $$.contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n        $$.contextLine.style(\"opacity\", $$.initialOpacity.bind($$));\n        $$.contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n        (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr(\"d\", drawLineOnSub).style('opacity', 1);\n    };\n    c3_chart_internal_fn.updateAreaForSubchart = function (durationForExit) {\n        var $$ = this,\n            d3 = $$.d3;\n        $$.contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n        $$.contextArea.enter().append('path').attr(\"class\", $$.classArea.bind($$)).style(\"fill\", $$.color).style(\"opacity\", function () {\n            $$.orgAreaOpacity = +d3.select(this).style('opacity');return 0;\n        });\n        $$.contextArea.style(\"opacity\", 0);\n        $$.contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n        (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr(\"d\", drawAreaOnSub).style(\"fill\", this.color).style(\"opacity\", this.orgAreaOpacity);\n    };\n    c3_chart_internal_fn.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config,\n            drawAreaOnSub,\n            drawBarOnSub,\n            drawLineOnSub;\n\n        $$.context.style('visibility', config.subchart_show ? 'visible' : 'hidden');\n\n        // subchart\n        if (config.subchart_show) {\n            // reflect main chart to extent on subchart if zoomed\n            if (d3.event && d3.event.type === 'zoom') {\n                $$.brush.extent($$.x.orgDomain()).update();\n            }\n            // update subchart elements if needed\n            if (withSubchart) {\n\n                // extent rect\n                if (!$$.brush.empty()) {\n                    $$.brush.extent($$.x.orgDomain()).update();\n                }\n                // setup drawer - MEMO: this must be called after axis updated\n                drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n                drawBarOnSub = $$.generateDrawBar(barIndices, true);\n                drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n\n                $$.updateBarForSubchart(duration);\n                $$.updateLineForSubchart(duration);\n                $$.updateAreaForSubchart(duration);\n\n                $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n                $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n                $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n            }\n        }\n    };\n    c3_chart_internal_fn.redrawForBrush = function () {\n        var $$ = this,\n            x = $$.x;\n        $$.redraw({\n            withTransition: false,\n            withY: $$.config.zoom_rescale,\n            withSubchart: false,\n            withUpdateXDomain: true,\n            withDimension: false\n        });\n        $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n    };\n    c3_chart_internal_fn.transformContext = function (withTransition, transitions) {\n        var $$ = this,\n            subXAxis;\n        if (transitions && transitions.axisSubX) {\n            subXAxis = transitions.axisSubX;\n        } else {\n            subXAxis = $$.context.select('.' + CLASS.axisX);\n            if (withTransition) {\n                subXAxis = subXAxis.transition();\n            }\n        }\n        $$.context.attr(\"transform\", $$.getTranslate('context'));\n        subXAxis.attr(\"transform\", $$.getTranslate('subx'));\n    };\n    c3_chart_internal_fn.getDefaultExtent = function () {\n        var $$ = this,\n            config = $$.config,\n            extent = isFunction(config.axis_x_extent) ? config.axis_x_extent($$.getXDomain($$.data.targets)) : config.axis_x_extent;\n        if ($$.isTimeSeries()) {\n            extent = [$$.parseDate(extent[0]), $$.parseDate(extent[1])];\n        }\n        return extent;\n    };\n\n    c3_chart_internal_fn.initText = function () {\n        var $$ = this;\n        $$.main.select('.' + CLASS.chart).append(\"g\").attr(\"class\", CLASS.chartTexts);\n        $$.mainText = $$.d3.selectAll([]);\n    };\n    c3_chart_internal_fn.updateTargetsForText = function (targets) {\n        var $$ = this,\n            mainTextUpdate,\n            mainTextEnter,\n            classChartText = $$.classChartText.bind($$),\n            classTexts = $$.classTexts.bind($$),\n            classFocus = $$.classFocus.bind($$);\n        mainTextUpdate = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets).attr('class', function (d) {\n            return classChartText(d) + classFocus(d);\n        });\n        mainTextEnter = mainTextUpdate.enter().append('g').attr('class', classChartText).style('opacity', 0).style(\"pointer-events\", \"none\");\n        mainTextEnter.append('g').attr('class', classTexts);\n    };\n    c3_chart_internal_fn.updateText = function (durationForExit) {\n        var $$ = this,\n            config = $$.config,\n            barOrLineData = $$.barOrLineData.bind($$),\n            classText = $$.classText.bind($$);\n        $$.mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n        $$.mainText.enter().append('text').attr(\"class\", classText).attr('text-anchor', function (d) {\n            return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n        }).style(\"stroke\", 'none').style(\"fill\", function (d) {\n            return $$.color(d);\n        }).style(\"fill-opacity\", 0);\n        $$.mainText.text(function (d, i, j) {\n            return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n        });\n        $$.mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n    };\n    c3_chart_internal_fn.redrawText = function (xForText, yForText, forFlow, withTransition) {\n        return [(withTransition ? this.mainText.transition() : this.mainText).attr('x', xForText).attr('y', yForText).style(\"fill\", this.color).style(\"fill-opacity\", forFlow ? 0 : this.opacityForText.bind(this))];\n    };\n    c3_chart_internal_fn.getTextRect = function (text, cls, element) {\n        var dummy = this.d3.select('body').append('div').classed('c3', true),\n            svg = dummy.append(\"svg\").style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n            font = this.d3.select(element).style('font'),\n            rect;\n        svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : \"\", true).style('font', font).text(text).each(function () {\n            rect = this.getBoundingClientRect();\n        });\n        dummy.remove();\n        return rect;\n    };\n    c3_chart_internal_fn.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n        var $$ = this,\n            getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n            getBarPoints = $$.generateGetBarPoints(barIndices, false),\n            getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n            getter = forX ? $$.getXForText : $$.getYForText;\n        return function (d, i) {\n            var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n            return getter.call($$, getPoints(d, i), d, this);\n        };\n    };\n    c3_chart_internal_fn.getXForText = function (points, d, textElement) {\n        var $$ = this,\n            box = textElement.getBoundingClientRect(),\n            xPos,\n            padding;\n        if ($$.config.axis_rotated) {\n            padding = $$.isBarType(d) ? 4 : 6;\n            xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n        } else {\n            xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n        }\n        // show labels regardless of the domain if value is null\n        if (d.value === null) {\n            if (xPos > $$.width) {\n                xPos = $$.width - box.width;\n            } else if (xPos < 0) {\n                xPos = 4;\n            }\n        }\n        return xPos;\n    };\n    c3_chart_internal_fn.getYForText = function (points, d, textElement) {\n        var $$ = this,\n            box = textElement.getBoundingClientRect(),\n            yPos;\n        if ($$.config.axis_rotated) {\n            yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n        } else {\n            yPos = points[2][1];\n            if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n                yPos += box.height;\n                if ($$.isBarType(d) && $$.isSafari()) {\n                    yPos -= 3;\n                } else if (!$$.isBarType(d) && $$.isChrome()) {\n                    yPos += 3;\n                }\n            } else {\n                yPos += $$.isBarType(d) ? -3 : -6;\n            }\n        }\n        // show labels regardless of the domain if value is null\n        if (d.value === null && !$$.config.axis_rotated) {\n            if (yPos < box.height) {\n                yPos = box.height;\n            } else if (yPos > this.height) {\n                yPos = this.height - 4;\n            }\n        }\n        return yPos;\n    };\n\n    c3_chart_internal_fn.initTitle = function () {\n        var $$ = this;\n        $$.title = $$.svg.append(\"text\").text($$.config.title_text).attr(\"class\", $$.CLASS.title);\n    };\n    c3_chart_internal_fn.redrawTitle = function () {\n        var $$ = this;\n        $$.title.attr(\"x\", $$.xForTitle.bind($$)).attr(\"y\", $$.yForTitle.bind($$));\n    };\n    c3_chart_internal_fn.xForTitle = function () {\n        var $$ = this,\n            config = $$.config,\n            position = config.title_position || 'left',\n            x;\n        if (position.indexOf('right') >= 0) {\n            x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n        } else if (position.indexOf('center') >= 0) {\n            x = ($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2;\n        } else {\n            // left\n            x = config.title_padding.left;\n        }\n        return x;\n    };\n    c3_chart_internal_fn.yForTitle = function () {\n        var $$ = this;\n        return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n    };\n    c3_chart_internal_fn.getTitlePadding = function () {\n        var $$ = this;\n        return $$.yForTitle() + $$.config.title_padding.bottom;\n    };\n\n    c3_chart_internal_fn.initTooltip = function () {\n        var $$ = this,\n            config = $$.config,\n            i;\n        $$.tooltip = $$.selectChart.style(\"position\", \"relative\").append(\"div\").attr('class', CLASS.tooltipContainer).style(\"position\", \"absolute\").style(\"pointer-events\", \"none\").style(\"display\", \"none\");\n        // Show tooltip if needed\n        if (config.tooltip_init_show) {\n            if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n                config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n                for (i = 0; i < $$.data.targets[0].values.length; i++) {\n                    if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n                        break;\n                    }\n                }\n                config.tooltip_init_x = i;\n            }\n            $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n                return $$.addName(d.values[config.tooltip_init_x]);\n            }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n            $$.tooltip.style(\"top\", config.tooltip_init_position.top).style(\"left\", config.tooltip_init_position.left).style(\"display\", \"block\");\n        }\n    };\n    c3_chart_internal_fn.getTooltipSortFunction = function () {\n        var $$ = this,\n            config = $$.config;\n\n        if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n            // if data are not grouped or if an order is specified\n            // for the tooltip values we sort them by their values\n\n            var order = config.tooltip_order;\n            if (order === undefined) {\n                order = config.data_order;\n            }\n\n            var valueOf = function valueOf(obj) {\n                return obj ? obj.value : null;\n            };\n\n            // if data are not grouped, we sort them by their value\n            if (isString(order) && order.toLowerCase() === 'asc') {\n                return function (a, b) {\n                    return valueOf(a) - valueOf(b);\n                };\n            } else if (isString(order) && order.toLowerCase() === 'desc') {\n                return function (a, b) {\n                    return valueOf(b) - valueOf(a);\n                };\n            } else if (isFunction(order)) {\n\n                // if the function is from data_order we need\n                // to wrap the returned function in order to format\n                // the sorted value to the expected format\n\n                var sortFunction = order;\n\n                if (config.tooltip_order === undefined) {\n                    sortFunction = function sortFunction(a, b) {\n                        return order(a ? {\n                            id: a.id,\n                            values: [a]\n                        } : null, b ? {\n                            id: b.id,\n                            values: [b]\n                        } : null);\n                    };\n                }\n\n                return sortFunction;\n            } else if (isArray(order)) {\n                return function (a, b) {\n                    return order.indexOf(a.id) - order.indexOf(b.id);\n                };\n            }\n        } else {\n            // if data are grouped, we follow the order of grouped targets\n            var ids = $$.orderTargets($$.data.targets).map(function (i) {\n                return i.id;\n            });\n\n            // if it was either asc or desc we need to invert the order\n            // returned by orderTargets\n            if ($$.isOrderAsc() || $$.isOrderDesc()) {\n                ids = ids.reverse();\n            }\n\n            return function (a, b) {\n                return ids.indexOf(a.id) - ids.indexOf(b.id);\n            };\n        }\n    };\n    c3_chart_internal_fn.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n        var $$ = this,\n            config = $$.config,\n            titleFormat = config.tooltip_format_title || defaultTitleFormat,\n            nameFormat = config.tooltip_format_name || function (name) {\n            return name;\n        },\n            valueFormat = config.tooltip_format_value || defaultValueFormat,\n            text,\n            i,\n            title,\n            value,\n            name,\n            bgcolor;\n\n        var tooltipSortFunction = this.getTooltipSortFunction();\n        if (tooltipSortFunction) {\n            d.sort(tooltipSortFunction);\n        }\n\n        for (i = 0; i < d.length; i++) {\n            if (!(d[i] && (d[i].value || d[i].value === 0))) {\n                continue;\n            }\n\n            if (!text) {\n                title = sanitise(titleFormat ? titleFormat(d[i].x) : d[i].x);\n                text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + \"</th></tr>\" : \"\");\n            }\n\n            value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n            if (value !== undefined) {\n                // Skip elements when their name is set to null\n                if (d[i].name === null) {\n                    continue;\n                }\n                name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n                bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n\n                text += \"<tr class='\" + $$.CLASS.tooltipName + \"-\" + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n                text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + \"</td>\";\n                text += \"<td class='value'>\" + value + \"</td>\";\n                text += \"</tr>\";\n            }\n        }\n        return text + \"</table>\";\n    };\n    c3_chart_internal_fn.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3;\n        var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n        var forArc = $$.hasArcType(),\n            mouse = d3.mouse(element);\n        // Determin tooltip position\n        if (forArc) {\n            tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n            tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n        } else {\n            svgLeft = $$.getSvgLeft(true);\n            if (config.axis_rotated) {\n                tooltipLeft = svgLeft + mouse[0] + 100;\n                tooltipRight = tooltipLeft + tWidth;\n                chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n                tooltipTop = $$.x(dataToShow[0].x) + 20;\n            } else {\n                tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n                tooltipRight = tooltipLeft + tWidth;\n                chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n                tooltipTop = mouse[1] + 15;\n            }\n\n            if (tooltipRight > chartRight) {\n                // 20 is needed for Firefox to keep tooltip width\n                tooltipLeft -= tooltipRight - chartRight + 20;\n            }\n            if (tooltipTop + tHeight > $$.currentHeight) {\n                tooltipTop -= tHeight + 30;\n            }\n        }\n        if (tooltipTop < 0) {\n            tooltipTop = 0;\n        }\n        return { top: tooltipTop, left: tooltipLeft };\n    };\n    c3_chart_internal_fn.showTooltip = function (selectedData, element) {\n        var $$ = this,\n            config = $$.config;\n        var tWidth, tHeight, position;\n        var forArc = $$.hasArcType(),\n            dataToShow = selectedData.filter(function (d) {\n            return d && isValue(d.value);\n        }),\n            positionFunction = config.tooltip_position || c3_chart_internal_fn.tooltipPosition;\n        if (dataToShow.length === 0 || !config.tooltip_show) {\n            return;\n        }\n        $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style(\"display\", \"block\");\n\n        // Get tooltip dimensions\n        tWidth = $$.tooltip.property('offsetWidth');\n        tHeight = $$.tooltip.property('offsetHeight');\n\n        position = positionFunction.call(this, dataToShow, tWidth, tHeight, element);\n        // Set tooltip\n        $$.tooltip.style(\"top\", position.top + \"px\").style(\"left\", position.left + 'px');\n    };\n    c3_chart_internal_fn.hideTooltip = function () {\n        this.tooltip.style(\"display\", \"none\");\n    };\n\n    c3_chart_internal_fn.setTargetType = function (targetIds, type) {\n        var $$ = this,\n            config = $$.config;\n        $$.mapToTargetIds(targetIds).forEach(function (id) {\n            $$.withoutFadeIn[id] = type === config.data_types[id];\n            config.data_types[id] = type;\n        });\n        if (!targetIds) {\n            config.data_type = type;\n        }\n    };\n    c3_chart_internal_fn.hasType = function (type, targets) {\n        var $$ = this,\n            types = $$.config.data_types,\n            has = false;\n        targets = targets || $$.data.targets;\n        if (targets && targets.length) {\n            targets.forEach(function (target) {\n                var t = types[target.id];\n                if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n                    has = true;\n                }\n            });\n        } else if (Object.keys(types).length) {\n            Object.keys(types).forEach(function (id) {\n                if (types[id] === type) {\n                    has = true;\n                }\n            });\n        } else {\n            has = $$.config.data_type === type;\n        }\n        return has;\n    };\n    c3_chart_internal_fn.hasArcType = function (targets) {\n        return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n    };\n    c3_chart_internal_fn.isLineType = function (d) {\n        var config = this.config,\n            id = isString(d) ? d : d.id;\n        return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n    };\n    c3_chart_internal_fn.isStepType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n    };\n    c3_chart_internal_fn.isSplineType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n    };\n    c3_chart_internal_fn.isAreaType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n    };\n    c3_chart_internal_fn.isBarType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return this.config.data_types[id] === 'bar';\n    };\n    c3_chart_internal_fn.isScatterType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return this.config.data_types[id] === 'scatter';\n    };\n    c3_chart_internal_fn.isPieType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return this.config.data_types[id] === 'pie';\n    };\n    c3_chart_internal_fn.isGaugeType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return this.config.data_types[id] === 'gauge';\n    };\n    c3_chart_internal_fn.isDonutType = function (d) {\n        var id = isString(d) ? d : d.id;\n        return this.config.data_types[id] === 'donut';\n    };\n    c3_chart_internal_fn.isArcType = function (d) {\n        return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n    };\n    c3_chart_internal_fn.lineData = function (d) {\n        return this.isLineType(d) ? [d] : [];\n    };\n    c3_chart_internal_fn.arcData = function (d) {\n        return this.isArcType(d.data) ? [d] : [];\n    };\n    /* not used\n     function scatterData(d) {\n     return isScatterType(d) ? d.values : [];\n     }\n     */\n    c3_chart_internal_fn.barData = function (d) {\n        return this.isBarType(d) ? d.values : [];\n    };\n    c3_chart_internal_fn.lineOrScatterData = function (d) {\n        return this.isLineType(d) || this.isScatterType(d) ? d.values : [];\n    };\n    c3_chart_internal_fn.barOrLineData = function (d) {\n        return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n    };\n    c3_chart_internal_fn.isInterpolationType = function (type) {\n        return ['linear', 'linear-closed', 'basis', 'basis-open', 'basis-closed', 'bundle', 'cardinal', 'cardinal-open', 'cardinal-closed', 'monotone'].indexOf(type) >= 0;\n    };\n\n    c3_chart_internal_fn.isSafari = function () {\n        var ua = window.navigator.userAgent;\n        return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n    };\n    c3_chart_internal_fn.isChrome = function () {\n        var ua = window.navigator.userAgent;\n        return ua.indexOf('Chrome') >= 0;\n    };\n\n    c3_chart_internal_fn.initZoom = function () {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config,\n            startEvent;\n\n        $$.zoom = d3.behavior.zoom().on(\"zoomstart\", function () {\n            startEvent = d3.event.sourceEvent;\n            $$.zoom.altDomain = d3.event.sourceEvent.altKey ? $$.x.orgDomain() : null;\n            config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n        }).on(\"zoom\", function () {\n            $$.redrawForZoom.call($$);\n        }).on('zoomend', function () {\n            var event = d3.event.sourceEvent;\n            // if click, do nothing. otherwise, click interaction will be canceled.\n            if (event && startEvent.clientX === event.clientX && startEvent.clientY === event.clientY) {\n                return;\n            }\n            $$.redrawEventRect();\n            $$.updateZoom();\n            config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n        });\n        $$.zoom.scale = function (scale) {\n            return config.axis_rotated ? this.y(scale) : this.x(scale);\n        };\n        $$.zoom.orgScaleExtent = function () {\n            var extent = config.zoom_extent ? config.zoom_extent : [1, 10];\n            return [extent[0], Math.max($$.getMaxDataCount() / extent[1], extent[1])];\n        };\n        $$.zoom.updateScaleExtent = function () {\n            var ratio = diffDomain($$.x.orgDomain()) / diffDomain($$.getZoomDomain()),\n                extent = this.orgScaleExtent();\n            this.scaleExtent([extent[0] * ratio, extent[1] * ratio]);\n            return this;\n        };\n    };\n    c3_chart_internal_fn.getZoomDomain = function () {\n        var $$ = this,\n            config = $$.config,\n            d3 = $$.d3,\n            min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n            max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n        return [min, max];\n    };\n    c3_chart_internal_fn.updateZoom = function () {\n        var $$ = this,\n            z = $$.config.zoom_enabled ? $$.zoom : function () {};\n        $$.main.select('.' + CLASS.zoomRect).call(z).on(\"dblclick.zoom\", null);\n        $$.main.selectAll('.' + CLASS.eventRect).call(z).on(\"dblclick.zoom\", null);\n    };\n    c3_chart_internal_fn.redrawForZoom = function () {\n        var $$ = this,\n            d3 = $$.d3,\n            config = $$.config,\n            zoom = $$.zoom,\n            x = $$.x;\n        if (!config.zoom_enabled) {\n            return;\n        }\n        if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n            return;\n        }\n        if (d3.event.sourceEvent.type === 'mousemove' && zoom.altDomain) {\n            x.domain(zoom.altDomain);\n            zoom.scale(x).updateScaleExtent();\n            return;\n        }\n        if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n            x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n        }\n        $$.redraw({\n            withTransition: false,\n            withY: config.zoom_rescale,\n            withSubchart: false,\n            withEventRect: false,\n            withDimension: false\n        });\n        if (d3.event.sourceEvent.type === 'mousemove') {\n            $$.cancelClick = true;\n        }\n        config.zoom_onzoom.call($$.api, x.orgDomain());\n    };\n\n    return c3;\n\n})));\n"]},"metadata":{},"sourceType":"script"}